"use strict";(globalThis.webpackChunkwp_event_solution=globalThis.webpackChunkwp_event_solution||[]).push([[728],{21020:(e,t,n)=>{var o=n(51609),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var o,i={},c=null,d=null;for(o in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,o)&&!l.hasOwnProperty(o)&&(i[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===i[o]&&(i[o]=t[o]);return{$$typeof:r,type:e,key:c,ref:d,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},74848:(e,t,n)=>{e.exports=n(21020)},19728:(e,t,n)=>{n.d(t,{tL:()=>mu,eb:()=>wu,fB:()=>Ut});var o=n(74848),r=n(51609),i=n(36492),a=n(79888),s=n(31058),l=n(87959),c=n(50400),d=n(67313),u=n(71524),h=n(90070),f=n(19549),g=n(51643),p=n(32099),m=n(60742),y=n(54861),v=n(46942),b=n.n(v),x=n(89379),w=n(3453),S=n(88966),C=n(30981),E=r.createContext(null),_=r.createContext({});const k=E;var N=n(64467),M=n(58168),A=n(30156),P=n(16928),j=n(72065),O=n(80045),z=n(8719),D=["prefixCls","className","containerRef"];const I=function(e){var t=e.prefixCls,n=e.className,o=e.containerRef,i=(0,O.A)(e,D),a=r.useContext(_).panel,s=(0,z.xK)(a,o);return r.createElement("div",(0,M.A)({className:b()("".concat(t,"-content"),n),role:"dialog",ref:s},(0,j.A)(e,{aria:!0}),{"aria-modal":"true"},i))};var $=n(68210);function R(e){return"string"==typeof e&&String(Number(e))===e?((0,$.Ay)(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var T={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function L(e,t){var n,o,i,a=e.prefixCls,s=e.open,l=e.placement,c=e.inline,d=e.push,u=e.forceRender,h=e.autoFocus,f=e.keyboard,g=e.classNames,p=e.rootClassName,m=e.rootStyle,y=e.zIndex,v=e.className,S=e.id,C=e.style,E=e.motion,_=e.width,O=e.height,z=e.children,D=e.mask,$=e.maskClosable,L=e.maskMotion,B=e.maskClassName,V=e.maskStyle,H=e.afterOpenChange,F=e.onClose,Y=e.onMouseEnter,X=e.onMouseOver,Z=e.onMouseLeave,W=e.onClick,q=e.onKeyDown,K=e.onKeyUp,U=e.styles,G=e.drawerRender,Q=r.useRef(),J=r.useRef(),ee=r.useRef();r.useImperativeHandle(t,(function(){return Q.current})),r.useEffect((function(){var e;s&&h&&(null===(e=Q.current)||void 0===e||e.focus({preventScroll:!0}))}),[s]);var te=r.useState(!1),ne=(0,w.A)(te,2),oe=ne[0],re=ne[1],ie=r.useContext(k),ae=null!==(n=null!==(o=null===(i="boolean"==typeof d?d?{}:{distance:0}:d||{})||void 0===i?void 0:i.distance)&&void 0!==o?o:null==ie?void 0:ie.pushDistance)&&void 0!==n?n:180,se=r.useMemo((function(){return{pushDistance:ae,push:function(){re(!0)},pull:function(){re(!1)}}}),[ae]);r.useEffect((function(){var e,t;s?null==ie||null===(e=ie.push)||void 0===e||e.call(ie):null==ie||null===(t=ie.pull)||void 0===t||t.call(ie)}),[s]),r.useEffect((function(){return function(){var e;null==ie||null===(e=ie.pull)||void 0===e||e.call(ie)}}),[]);var le=D&&r.createElement(A.Ay,(0,M.A)({key:"mask"},L,{visible:s}),(function(e,t){var n=e.className,o=e.style;return r.createElement("div",{className:b()("".concat(a,"-mask"),n,null==g?void 0:g.mask,B),style:(0,x.A)((0,x.A)((0,x.A)({},o),V),null==U?void 0:U.mask),onClick:$&&s?F:void 0,ref:t})})),ce="function"==typeof E?E(l):E,de={};if(oe&&ae)switch(l){case"top":de.transform="translateY(".concat(ae,"px)");break;case"bottom":de.transform="translateY(".concat(-ae,"px)");break;case"left":de.transform="translateX(".concat(ae,"px)");break;default:de.transform="translateX(".concat(-ae,"px)")}"left"===l||"right"===l?de.width=R(_):de.height=R(O);var ue={onMouseEnter:Y,onMouseOver:X,onMouseLeave:Z,onClick:W,onKeyDown:q,onKeyUp:K},he=r.createElement(A.Ay,(0,M.A)({key:"panel"},ce,{visible:s,forceRender:u,onVisibleChanged:function(e){null==H||H(e)},removeOnLeave:!1,leavedClassName:"".concat(a,"-content-wrapper-hidden")}),(function(t,n){var o=t.className,i=t.style,s=r.createElement(I,(0,M.A)({id:S,containerRef:n,prefixCls:a,className:b()(v,null==g?void 0:g.content),style:(0,x.A)((0,x.A)({},C),null==U?void 0:U.content)},(0,j.A)(e,{aria:!0}),ue),z);return r.createElement("div",(0,M.A)({className:b()("".concat(a,"-content-wrapper"),null==g?void 0:g.wrapper,o),style:(0,x.A)((0,x.A)((0,x.A)({},de),i),null==U?void 0:U.wrapper)},(0,j.A)(e,{data:!0})),G?G(s):s)})),fe=(0,x.A)({},m);return y&&(fe.zIndex=y),r.createElement(k.Provider,{value:se},r.createElement("div",{className:b()(a,"".concat(a,"-").concat(l),p,(0,N.A)((0,N.A)({},"".concat(a,"-open"),s),"".concat(a,"-inline"),c)),style:fe,tabIndex:-1,ref:Q,onKeyDown:function(e){var t=e.keyCode,n=e.shiftKey;switch(t){case P.A.TAB:var o;if(t===P.A.TAB)if(n||document.activeElement!==ee.current){if(n&&document.activeElement===J.current){var r;null===(r=ee.current)||void 0===r||r.focus({preventScroll:!0})}}else null===(o=J.current)||void 0===o||o.focus({preventScroll:!0});break;case P.A.ESC:F&&f&&(e.stopPropagation(),F(e))}}},le,r.createElement("div",{tabIndex:0,ref:J,style:T,"aria-hidden":"true","data-sentinel":"start"}),he,r.createElement("div",{tabIndex:0,ref:ee,style:T,"aria-hidden":"true","data-sentinel":"end"})))}const B=r.forwardRef(L),V=function(e){var t=e.open,n=void 0!==t&&t,o=e.prefixCls,i=void 0===o?"rc-drawer":o,a=e.placement,s=void 0===a?"right":a,l=e.autoFocus,c=void 0===l||l,d=e.keyboard,u=void 0===d||d,h=e.width,f=void 0===h?378:h,g=e.mask,p=void 0===g||g,m=e.maskClosable,y=void 0===m||m,v=e.getContainer,b=e.forceRender,E=e.afterOpenChange,k=e.destroyOnClose,N=e.onMouseEnter,M=e.onMouseOver,A=e.onMouseLeave,P=e.onClick,j=e.onKeyDown,O=e.onKeyUp,z=e.panelRef,D=r.useState(!1),I=(0,w.A)(D,2),$=I[0],R=I[1],T=r.useState(!1),L=(0,w.A)(T,2),V=L[0],H=L[1];(0,C.A)((function(){H(!0)}),[]);var F=!!V&&n,Y=r.useRef(),X=r.useRef();(0,C.A)((function(){F&&(X.current=document.activeElement)}),[F]);var Z=r.useMemo((function(){return{panel:z}}),[z]);if(!b&&!$&&!F&&k)return null;var W={onMouseEnter:N,onMouseOver:M,onMouseLeave:A,onClick:P,onKeyDown:j,onKeyUp:O},q=(0,x.A)((0,x.A)({},e),{},{open:F,prefixCls:i,placement:s,autoFocus:c,keyboard:u,width:f,mask:p,maskClosable:y,inline:!1===v,afterOpenChange:function(e){var t,n;R(e),null==E||E(e),e||!X.current||null!==(t=Y.current)&&void 0!==t&&t.contains(X.current)||null===(n=X.current)||void 0===n||n.focus({preventScroll:!0})},ref:Y},W);return r.createElement(_.Provider,{value:Z},r.createElement(S.A,{open:F||b||$,autoDestroy:!1,getContainer:v,autoLock:p&&(F||$)},r.createElement(B,q)))};var H=n(62897),F=n(60275),Y=n(23723),X=n(72616),Z=n(62279),W=n(28557),q=n(70064),K=n(75063);const U=e=>{var t,n;const{prefixCls:o,title:i,footer:a,extra:s,loading:l,onClose:c,headerStyle:d,bodyStyle:u,footerStyle:h,children:f,classNames:g,styles:p}=e,{drawer:m}=r.useContext(Z.QO),y=r.useCallback((e=>r.createElement("button",{type:"button",onClick:c,"aria-label":"Close",className:`${o}-close`},e)),[c]),[v,x]=(0,q.A)((0,q.d)(e),(0,q.d)(m),{closable:!0,closeIconRender:y}),w=r.useMemo((()=>{var e,t;return i||v?r.createElement("div",{style:Object.assign(Object.assign(Object.assign({},null===(e=null==m?void 0:m.styles)||void 0===e?void 0:e.header),d),null==p?void 0:p.header),className:b()(`${o}-header`,{[`${o}-header-close-only`]:v&&!i&&!s},null===(t=null==m?void 0:m.classNames)||void 0===t?void 0:t.header,null==g?void 0:g.header)},r.createElement("div",{className:`${o}-header-title`},x,i&&r.createElement("div",{className:`${o}-title`},i)),s&&r.createElement("div",{className:`${o}-extra`},s)):null}),[v,x,s,d,o,i]),S=r.useMemo((()=>{var e,t;if(!a)return null;const n=`${o}-footer`;return r.createElement("div",{className:b()(n,null===(e=null==m?void 0:m.classNames)||void 0===e?void 0:e.footer,null==g?void 0:g.footer),style:Object.assign(Object.assign(Object.assign({},null===(t=null==m?void 0:m.styles)||void 0===t?void 0:t.footer),h),null==p?void 0:p.footer)},a)}),[a,h,o]);return r.createElement(r.Fragment,null,w,r.createElement("div",{className:b()(`${o}-body`,null==g?void 0:g.body,null===(t=null==m?void 0:m.classNames)||void 0===t?void 0:t.body),style:Object.assign(Object.assign(Object.assign({},null===(n=null==m?void 0:m.styles)||void 0===n?void 0:n.body),u),null==p?void 0:p.body)},l?r.createElement(K.A,{active:!0,title:!1,paragraph:{rows:5},className:`${o}-body-skeleton`}):f),S)};var G=n(54018),Q=n(25905),J=n(37358),ee=n(67906);const te=e=>{const t="100%";return{left:`translateX(-${t})`,right:`translateX(${t})`,top:`translateY(-${t})`,bottom:`translateY(${t})`}[e]},ne=(e,t)=>({"&-enter, &-appear":Object.assign(Object.assign({},e),{"&-active":t}),"&-leave":Object.assign(Object.assign({},t),{"&-active":e})}),oe=(e,t)=>Object.assign({"&-enter, &-appear, &-leave":{"&-start":{transition:"none"},"&-active":{transition:`all ${t}`}}},ne({opacity:e},{opacity:1})),re=(e,t)=>[oe(.7,t),ne({transform:te(e)},{transform:"none"})],ie=e=>{const{componentCls:t,motionDurationSlow:n}=e;return{[t]:{[`${t}-mask-motion`]:oe(0,n),[`${t}-panel-motion`]:["left","right","top","bottom"].reduce(((e,t)=>Object.assign(Object.assign({},e),{[`&-${t}`]:re(t,n)})),{})}}},ae=e=>{const{borderRadiusSM:t,componentCls:n,zIndexPopup:o,colorBgMask:r,colorBgElevated:i,motionDurationSlow:a,motionDurationMid:s,paddingXS:l,padding:c,paddingLG:d,fontSizeLG:u,lineHeightLG:h,lineWidth:f,lineType:g,colorSplit:p,marginXS:m,colorIcon:y,colorIconHover:v,colorBgTextHover:b,colorBgTextActive:x,colorText:w,fontWeightStrong:S,footerPaddingBlock:C,footerPaddingInline:E,calc:_}=e,k=`${n}-content-wrapper`;return{[n]:{position:"fixed",inset:0,zIndex:o,pointerEvents:"none",color:w,"&-pure":{position:"relative",background:i,display:"flex",flexDirection:"column",[`&${n}-left`]:{boxShadow:e.boxShadowDrawerLeft},[`&${n}-right`]:{boxShadow:e.boxShadowDrawerRight},[`&${n}-top`]:{boxShadow:e.boxShadowDrawerUp},[`&${n}-bottom`]:{boxShadow:e.boxShadowDrawerDown}},"&-inline":{position:"absolute"},[`${n}-mask`]:{position:"absolute",inset:0,zIndex:o,background:r,pointerEvents:"auto"},[k]:{position:"absolute",zIndex:o,maxWidth:"100vw",transition:`all ${a}`,"&-hidden":{display:"none"}},[`&-left > ${k}`]:{top:0,bottom:0,left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowDrawerLeft},[`&-right > ${k}`]:{top:0,right:{_skip_check_:!0,value:0},bottom:0,boxShadow:e.boxShadowDrawerRight},[`&-top > ${k}`]:{top:0,insetInline:0,boxShadow:e.boxShadowDrawerUp},[`&-bottom > ${k}`]:{bottom:0,insetInline:0,boxShadow:e.boxShadowDrawerDown},[`${n}-content`]:{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"auto",background:i,pointerEvents:"auto"},[`${n}-header`]:{display:"flex",flex:0,alignItems:"center",padding:`${(0,G.zA)(c)} ${(0,G.zA)(d)}`,fontSize:u,lineHeight:h,borderBottom:`${(0,G.zA)(f)} ${g} ${p}`,"&-title":{display:"flex",flex:1,alignItems:"center",minWidth:0,minHeight:0}},[`${n}-extra`]:{flex:"none"},[`${n}-close`]:Object.assign({display:"inline-flex",width:_(u).add(l).equal(),height:_(u).add(l).equal(),borderRadius:t,justifyContent:"center",alignItems:"center",marginInlineEnd:m,color:y,fontWeight:S,fontSize:u,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",textDecoration:"none",background:"transparent",border:0,cursor:"pointer",transition:`all ${s}`,textRendering:"auto","&:hover":{color:v,backgroundColor:b,textDecoration:"none"},"&:active":{backgroundColor:x}},(0,Q.K8)(e)),[`${n}-title`]:{flex:1,margin:0,fontWeight:e.fontWeightStrong,fontSize:u,lineHeight:h},[`${n}-body`]:{flex:1,minWidth:0,minHeight:0,padding:d,overflow:"auto",[`${n}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center"}},[`${n}-footer`]:{flexShrink:0,padding:`${(0,G.zA)(C)} ${(0,G.zA)(E)}`,borderTop:`${(0,G.zA)(f)} ${g} ${p}`},"&-rtl":{direction:"rtl"}}}},se=(0,J.OF)("Drawer",(e=>{const t=(0,ee.oX)(e,{});return[ae(t),ie(t)]}),(e=>({zIndexPopup:e.zIndexPopupBase,footerPaddingBlock:e.paddingXS,footerPaddingInline:e.padding})));var le=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const ce={distance:180},de=e=>{const{rootClassName:t,width:n,height:o,size:i="default",mask:a=!0,push:s=ce,open:l,afterOpenChange:c,onClose:d,prefixCls:u,getContainer:h,style:f,className:g,visible:p,afterVisibleChange:m,maskStyle:y,drawerStyle:v,contentWrapperStyle:x}=e,w=le(e,["rootClassName","width","height","size","mask","push","open","afterOpenChange","onClose","prefixCls","getContainer","style","className","visible","afterVisibleChange","maskStyle","drawerStyle","contentWrapperStyle"]),{getPopupContainer:S,getPrefixCls:C,direction:E,drawer:_}=r.useContext(Z.QO),k=C("drawer",u),[N,M,A]=se(k),P=void 0===h&&S?()=>S(document.body):h,j=b()({"no-mask":!a,[`${k}-rtl`]:"rtl"===E},t,M,A),O=r.useMemo((()=>null!=n?n:"large"===i?736:378),[n,i]),z=r.useMemo((()=>null!=o?o:"large"===i?736:378),[o,i]),D={motionName:(0,Y.b)(k,"mask-motion"),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500},I=(0,W.f)(),[$,R]=(0,F.YK)("Drawer",w.zIndex),{classNames:T={},styles:L={}}=w,{classNames:B={},styles:q={}}=_||{};return N(r.createElement(H.A,{form:!0,space:!0},r.createElement(X.A.Provider,{value:R},r.createElement(V,Object.assign({prefixCls:k,onClose:d,maskMotion:D,motion:e=>({motionName:(0,Y.b)(k,`panel-motion-${e}`),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500})},w,{classNames:{mask:b()(T.mask,B.mask),content:b()(T.content,B.content),wrapper:b()(T.wrapper,B.wrapper)},styles:{mask:Object.assign(Object.assign(Object.assign({},L.mask),y),q.mask),content:Object.assign(Object.assign(Object.assign({},L.content),v),q.content),wrapper:Object.assign(Object.assign(Object.assign({},L.wrapper),x),q.wrapper)},open:null!=l?l:p,mask:a,push:s,width:O,height:z,style:Object.assign(Object.assign({},null==_?void 0:_.style),f),className:b()(null==_?void 0:_.className,g),rootClassName:j,getContainer:P,afterOpenChange:null!=c?c:m,panelRef:I,zIndex:$}),r.createElement(U,Object.assign({prefixCls:k},w,{onClose:d}))))))};de._InternalPanelDoNotUseOrYouWillBeFired=e=>{const{prefixCls:t,style:n,className:o,placement:i="right"}=e,a=le(e,["prefixCls","style","className","placement"]),{getPrefixCls:s}=r.useContext(Z.QO),l=s("drawer",t),[c,d,u]=se(l),h=b()(l,`${l}-pure`,`${l}-${i}`,d,u,o);return c(r.createElement("div",{className:h,style:n},r.createElement(U,Object.assign({prefixCls:l},a))))};const ue=de;var he=n(87667),fe=n(428),ge=n(43960),pe=n(11721),me=n(16784),ye=n(75795),ve=n(74353),be=n(45708),xe=(0,r.createContext)({});function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},we.apply(null,arguments)}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t);else for(;!(l=(o=i.call(n)).done)&&(s.push(o.value),s.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Se(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function _e(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ee(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ee(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ke(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;n[o]=e[o]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ne(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Me,Ae={exports:{}};Me=Ae,function(){var e={}.hasOwnProperty;function t(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=o(e,n(r)))}return e}function n(n){if("string"==typeof n||"number"==typeof n)return n;if("object"!=typeof n)return"";if(Array.isArray(n))return t.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var r="";for(var i in n)e.call(n,i)&&n[i]&&(r=o(r,i));return r}function o(e,t){return t?e?e+" "+t:e+t:e}Me.exports?(t.default=t,Me.exports=t):window.classNames=t}();var Pe=Ne(Ae.exports);const je=Math.round;function Oe(e,t){const n=e.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],o=n.map((e=>parseFloat(e)));for(let e=0;e<3;e+=1)o[e]=t(o[e]||0,n[e]||"",e);return n[3]?o[3]=n[3].includes("%")?o[3]/100:o[3]:o[3]=1,o}const ze=(e,t,n)=>0===n?e:e/100;function De(e,t){const n=t||255;return e>n?n:e<0?0:e}class Ie{constructor(e){function t(t){return t[0]in e&&t[1]in e&&t[2]in e}if(_e(this,"isValid",!0),_e(this,"r",0),_e(this,"g",0),_e(this,"b",0),_e(this,"a",1),_e(this,"_h",void 0),_e(this,"_s",void 0),_e(this,"_l",void 0),_e(this,"_v",void 0),_e(this,"_max",void 0),_e(this,"_min",void 0),_e(this,"_brightness",void 0),e)if("string"==typeof e){const n=e.trim();function o(e){return n.startsWith(e)}/^#?[A-F\d]{3,8}$/i.test(n)?this.fromHexString(n):o("rgb")?this.fromRgbString(n):o("hsl")?this.fromHslString(n):(o("hsv")||o("hsb"))&&this.fromHsvString(n)}else if(e instanceof Ie)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(t("rgb"))this.r=De(e.r),this.g=De(e.g),this.b=De(e.b),this.a="number"==typeof e.a?De(e.a,1):1;else if(t("hsl"))this.fromHsl(e);else{if(!t("hsv"))throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e));this.fromHsv(e)}}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const t=this.toHsv();return t.h=e,this._c(t)}getLuminance(){function e(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}return.2126*e(this.r)+.7152*e(this.g)+.0722*e(this.b)}getHue(){if(void 0===this._h){const e=this.getMax()-this.getMin();this._h=0===e?0:je(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(void 0===this._s){const e=this.getMax()-this.getMin();this._s=0===e?0:e/this.getMax()}return this._s}getLightness(){return void 0===this._l&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return void 0===this._v&&(this._v=this.getMax()/255),this._v}getBrightness(){return void 0===this._brightness&&(this._brightness=(299*this.r+587*this.g+114*this.b)/1e3),this._brightness}darken(e=10){const t=this.getHue(),n=this.getSaturation();let o=this.getLightness()-e/100;return o<0&&(o=0),this._c({h:t,s:n,l:o,a:this.a})}lighten(e=10){const t=this.getHue(),n=this.getSaturation();let o=this.getLightness()+e/100;return o>1&&(o=1),this._c({h:t,s:n,l:o,a:this.a})}mix(e,t=50){const n=this._c(e),o=t/100,r=e=>(n[e]-this[e])*o+this[e],i={r:je(r("r")),g:je(r("g")),b:je(r("b")),a:je(100*r("a"))/100};return this._c(i)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const t=this._c(e),n=this.a+t.a*(1-this.a),o=e=>je((this[e]*this.a+t[e]*t.a*(1-this.a))/n);return this._c({r:o("r"),g:o("g"),b:o("b"),a:n})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const t=(this.r||0).toString(16);e+=2===t.length?t:"0"+t;const n=(this.g||0).toString(16);e+=2===n.length?n:"0"+n;const o=(this.b||0).toString(16);if(e+=2===o.length?o:"0"+o,"number"==typeof this.a&&this.a>=0&&this.a<1){const t=je(255*this.a).toString(16);e+=2===t.length?t:"0"+t}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),t=je(100*this.getSaturation()),n=je(100*this.getLightness());return 1!==this.a?`hsla(${e},${t}%,${n}%,${this.a})`:`hsl(${e},${t}%,${n}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return 1!==this.a?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,t,n){const o=this.clone();return o[e]=De(t,n),o}_c(e){return new this.constructor(e)}getMax(){return void 0===this._max&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return void 0===this._min&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const t=e.replace("#","");function n(e,n){return parseInt(t[e]+t[n||e],16)}t.length<6?(this.r=n(0),this.g=n(1),this.b=n(2),this.a=t[3]?n(3)/255:1):(this.r=n(0,1),this.g=n(2,3),this.b=n(4,5),this.a=t[6]?n(6,7)/255:1)}fromHsl({h:e,s:t,l:n,a:o}){if(this._h=e%360,this._s=t,this._l=n,this.a="number"==typeof o?o:1,t<=0){const e=je(255*n);this.r=e,this.g=e,this.b=e}let r=0,i=0,a=0;const s=e/60,l=(1-Math.abs(2*n-1))*t,c=l*(1-Math.abs(s%2-1));s>=0&&s<1?(r=l,i=c):s>=1&&s<2?(r=c,i=l):s>=2&&s<3?(i=l,a=c):s>=3&&s<4?(i=c,a=l):s>=4&&s<5?(r=c,a=l):s>=5&&s<6&&(r=l,a=c);const d=n-l/2;this.r=je(255*(r+d)),this.g=je(255*(i+d)),this.b=je(255*(a+d))}fromHsv({h:e,s:t,v:n,a:o}){this._h=e%360,this._s=t,this._v=n,this.a="number"==typeof o?o:1;const r=je(255*n);if(this.r=r,this.g=r,this.b=r,t<=0)return;const i=e/60,a=Math.floor(i),s=i-a,l=je(n*(1-t)*255),c=je(n*(1-t*s)*255),d=je(n*(1-t*(1-s))*255);switch(a){case 0:this.g=d,this.b=l;break;case 1:this.r=c,this.b=l;break;case 2:this.r=l,this.b=d;break;case 3:this.r=l,this.g=c;break;case 4:this.r=d,this.g=l;break;default:this.g=l,this.b=c}}fromHsvString(e){const t=Oe(e,ze);this.fromHsv({h:t[0],s:t[1],v:t[2],a:t[3]})}fromHslString(e){const t=Oe(e,ze);this.fromHsl({h:t[0],s:t[1],l:t[2],a:t[3]})}fromRgbString(e){const t=Oe(e,((e,t)=>t.includes("%")?je(e/100*255):e));this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]}}var $e=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function Re(e,t,n){var o;return(o=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-2*t:Math.round(e.h)+2*t:n?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?o+=360:o>=360&&(o-=360),o}function Te(e,t,n){return 0===e.h&&0===e.s?e.s:((o=n?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(o=1),n&&5===t&&o>.1&&(o=.1),o<.06&&(o=.06),Math.round(100*o)/100);var o}function Le(e,t,n){var o;return o=n?e.v+.05*t:e.v-.15*t,o=Math.max(0,Math.min(1,o)),Math.round(100*o)/100}var Be=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Be.primary=Be[5];var Fe="data-rc-order",Ye="data-rc-priority",Xe=new Map;function Ze(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):"rc-util-key"}function We(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function qe(e){return Array.from((Xe.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function Ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("undefined"==typeof window||!window.document||!window.document.createElement)return null;var n=t.csp,o=t.prepend,r=t.priority,i=void 0===r?0:r,a=function(e){return"queue"===e?"prependQueue":e?"prepend":"append"}(o),s="prependQueue"===a,l=document.createElement("style");l.setAttribute(Fe,a),s&&i&&l.setAttribute(Ye,"".concat(i)),null!=n&&n.nonce&&(l.nonce=null==n?void 0:n.nonce),l.innerHTML=e;var c=We(t),d=c.firstChild;if(o){if(s){var u=(t.styles||qe(c)).filter((function(e){if(!["prepend","prependQueue"].includes(e.getAttribute(Fe)))return!1;var t=Number(e.getAttribute(Ye)||0);return i>=t}));if(u.length)return c.insertBefore(l,u[u.length-1].nextSibling),l}c.insertBefore(l,d)}else c.appendChild(l);return l}function Ue(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}var Ge={},Qe=[];function Je(e,t){}function et(e,t){}function tt(e,t,n){t||Ge[n]||(e(!1,n),Ge[n]=!0)}function nt(e,t){tt(Je,e,t)}function ot(e){return"object"===Ee(e)&&"string"==typeof e.name&&"string"==typeof e.theme&&("object"===Ee(e.icon)||"function"==typeof e.icon)}function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var o,r=e[n];return"class"===n?(t.className=r,delete t.class):(delete t[n],t[(o=n,o.replace(/-(.)/g,(function(e,t){return t.toUpperCase()})))]=r),t}),{})}function it(e,t,n){return n?r.createElement(e.tag,He(He({key:t},rt(e.attrs)),n),(e.children||[]).map((function(n,o){return it(n,"".concat(t,"-").concat(e.tag,"-").concat(o))}))):r.createElement(e.tag,He({key:t},rt(e.attrs)),(e.children||[]).map((function(n,o){return it(n,"".concat(t,"-").concat(e.tag,"-").concat(o))})))}function at(e){return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],o=new Ie(e),r=o.toHsv(),i=5;i>0;i-=1){var a=new Ie({h:Re(r,i,!0),s:Te(r,i,!0),v:Le(r,i,!0)});n.push(a)}n.push(o);for(var s=1;s<=4;s+=1){var l=new Ie({h:Re(r,s),s:Te(r,s),v:Le(r,s)});n.push(l)}return"dark"===t.theme?$e.map((function(e){var o=e.index,r=e.amount;return new Ie(t.backgroundColor||"#141414").mix(n[o],r).toHexString()})):n.map((function(e){return e.toHexString()}))}(e)[0]}function st(e){return e?Array.isArray(e)?e:[e]:[]}nt.preMessage=function(e){Qe.push(e)},nt.resetWarned=function(){Ge={}},nt.noteOnce=function(e,t){tt(et,e,t)};var lt=["icon","className","onClick","style","primaryColor","secondaryColor"],ct={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1},dt=function(e){var t,n,o,i,a,s,l=e.icon,c=e.className,d=e.onClick,u=e.style,h=e.primaryColor,f=e.secondaryColor,g=ke(e,lt),p=r.useRef(),m=ct;if(h&&(m={primaryColor:h,secondaryColor:f||at(h)}),t=p,n=(0,r.useContext)(xe),o=n.csp,i=n.prefixCls,a=n.layer,s="\n.anticon {\n  display: inline-flex;\n  align-items: center;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",i&&(s=s.replace(/anticon/g,i)),a&&(s="@layer ".concat(a," {\n").concat(s,"\n}")),(0,r.useEffect)((function(){var e=function(e){return function(e){return Ue(e)instanceof ShadowRoot}(e)?Ue(e):null}(t.current);!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=We(n),r=qe(o),i=He(He({},n),{},{styles:r});!function(e,t){var n=Xe.get(e);if(!n||!function(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}(document,n)){var o=Ke("",t),r=o.parentNode;Xe.set(e,r),e.removeChild(o)}}(o,i);var a,s,l,c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=We(t);return(t.styles||qe(n)).find((function(n){return n.getAttribute(Ze(t))===e}))}(t,i);if(c)return null!==(a=i.csp)&&void 0!==a&&a.nonce&&c.nonce!==(null===(s=i.csp)||void 0===s?void 0:s.nonce)&&(c.nonce=null===(l=i.csp)||void 0===l?void 0:l.nonce),c.innerHTML!==e&&(c.innerHTML=e),c;Ke(e,i).setAttribute(Ze(i),t)}(s,"@ant-design-icons",{prepend:!a,csp:o,attachTo:e})}),[]),function(e,t){nt(e,"[@ant-design/icons] ".concat(t))}(ot(l),"icon should be icon definiton, but got ".concat(l)),!ot(l))return null;var y=l;return y&&"function"==typeof y.icon&&(y=He(He({},y),{},{icon:y.icon(m.primaryColor,m.secondaryColor)})),it(y.icon,"svg-".concat(y.name),He(He({className:c,onClick:d,style:u,"data-icon":y.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},g),{},{ref:p}))};function ut(e){var t=Ce(st(e),2),n=t[0],o=t[1];return dt.setTwoToneColors({primaryColor:n,secondaryColor:o})}dt.displayName="IconReact",dt.getTwoToneColors=function(){return He({},ct)},dt.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;ct.primaryColor=t,ct.secondaryColor=n||at(t),ct.calculated=!!n};var ht=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];ut(Be.primary);var ft=r.forwardRef((function(e,t){var n=e.className,o=e.icon,i=e.spin,a=e.rotate,s=e.tabIndex,l=e.onClick,c=e.twoToneColor,d=ke(e,ht),u=r.useContext(xe),h=u.prefixCls,f=void 0===h?"anticon":h,g=u.rootClassName,p=Pe(g,f,_e(_e({},"".concat(f,"-").concat(o.name),!!o.name),"".concat(f,"-spin"),!!i||"loading"===o.name),n),m=s;void 0===m&&l&&(m=-1);var y=a?{msTransform:"rotate(".concat(a,"deg)"),transform:"rotate(".concat(a,"deg)")}:void 0,v=Ce(st(c),2),b=v[0],x=v[1];return r.createElement("span",we({role:"img","aria-label":o.name},d,{ref:t,tabIndex:m,onClick:l,className:p}),r.createElement(dt,{icon:o,primaryColor:b,secondaryColor:x,style:y}))}));ft.displayName="AntdIcon",ft.getTwoToneColor=function(){var e=dt.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},ft.setTwoToneColor=ut;var gt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"},pt=r.forwardRef((function(e,t){return r.createElement(ft,we({},e,{ref:t,icon:gt}))})),mt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M816 768h-24V428c0-141.1-104.3-257.7-240-277.1V112c0-22.1-17.9-40-40-40s-40 17.9-40 40v38.9c-135.7 19.4-240 136-240 277.1v340h-24c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h216c0 61.8 50.2 112 112 112s112-50.2 112-112h216c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM512 888c-26.5 0-48-21.5-48-48h96c0 26.5-21.5 48-48 48zM304 768V428c0-55.6 21.6-107.8 60.9-147.1S456.4 220 512 220c55.6 0 107.8 21.6 147.1 60.9S720 372.4 720 428v340H304z"}}]},name:"bell",theme:"outlined"},yt=r.forwardRef((function(e,t){return r.createElement(ft,we({},e,{ref:t,icon:mt}))})),vt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},bt=r.forwardRef((function(e,t){return r.createElement(ft,we({},e,{ref:t,icon:vt}))})),xt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},wt=r.forwardRef((function(e,t){return r.createElement(ft,we({},e,{ref:t,icon:xt}))})),St={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},Ct=r.forwardRef((function(e,t){return r.createElement(ft,we({},e,{ref:t,icon:St}))})),Et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},_t=r.forwardRef((function(e,t){return r.createElement(ft,we({},e,{ref:t,icon:Et}))})),kt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},Nt=r.forwardRef((function(e,t){return r.createElement(ft,we({},e,{ref:t,icon:kt}))})),Mt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},At=r.forwardRef((function(e,t){return r.createElement(ft,we({},e,{ref:t,icon:Mt}))})),Pt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},jt=r.forwardRef((function(e,t){return r.createElement(ft,we({},e,{ref:t,icon:Pt}))})),Ot={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 305H624V192c0-17.7-14.3-32-32-32H184v-40c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v784c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V640h248v113c0 17.7 14.3 32 32 32h416c17.7 0 32-14.3 32-32V337c0-17.7-14.3-32-32-32zM184 568V232h368v336H184zm656 145H504v-73h112c4.4 0 8-3.6 8-8V377h216v336z"}}]},name:"flag",theme:"outlined"},zt=r.forwardRef((function(e,t){return r.createElement(ft,we({},e,{ref:t,icon:Ot}))})),Dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"},It=r.forwardRef((function(e,t){return r.createElement(ft,we({},e,{ref:t,icon:Dt}))})),$t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},Rt=r.forwardRef((function(e,t){return r.createElement(ft,we({},e,{ref:t,icon:$t}))})),Tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},Lt=r.forwardRef((function(e,t){return r.createElement(ft,we({},e,{ref:t,icon:Tt}))})),Bt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},Vt=r.forwardRef((function(e,t){return r.createElement(ft,we({},e,{ref:t,icon:Bt}))})),Ht={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},Ft=r.forwardRef((function(e,t){return r.createElement(ft,we({},e,{ref:t,icon:Ht}))})),Yt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},Xt=r.forwardRef((function(e,t){return r.createElement(ft,we({},e,{ref:t,icon:Yt}))})),Zt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},Wt=r.forwardRef((function(e,t){return r.createElement(ft,we({},e,{ref:t,icon:Zt}))}));class qt{constructor({baseUrl:e,pluginSlug:t="poptics",apiVersion:n="v1",nonce:o=""}){this.baseUrl=e,this.pluginSlug=t,this.apiVersion=n,this.nonce=o}getApiUrl(e){return`${this.baseUrl}/wp-json/${this.pluginSlug}/${this.apiVersion}/${e}`}async fetchWithAuth(e,t={}){const n=this.getApiUrl(e),o={"Content-Type":"application/json",...this.nonce?{"X-WP-Nonce":this.nonce}:{},...t.headers},r=await fetch(n,{...t,headers:o});if(!r.ok){const e=await r.text();throw new Error(`API Error (${r.status}): ${e}`)}return r.json()}async getAllFlows(){return this.fetchWithAuth("poptics-notification-flow")}async getFlowById(e){return this.fetchWithAuth(`notification-flow/${e}`)}async updateFlow(e,t){return this.fetchWithAuth(`notification-flow/${e}`,{method:"PUT",body:JSON.stringify(t)})}async createFlow(e){return this.fetchWithAuth("notification-flow",{method:"POST",body:JSON.stringify(e)})}async deleteFlow(e){return this.fetchWithAuth(`notification-flow/${e}`,{method:"DELETE"})}async bulkDeleteFlow(e){return this.fetchWithAuth("notification-flow",{method:"DELETE",body:JSON.stringify(e)})}async cloneFlow(e){return this.fetchWithAuth(`notification-flow/${e}/clone`,{method:"POST"})}async getFilteredFlows(e){const t=new URLSearchParams;e.trigger&&t.append("trigger",e.trigger),e.status&&t.append("status",e.status),e.searchKey&&t.append("search_key",e.searchKey);const n=t.toString(),o="notification-flow"+(n?`?${n}`:"");return this.fetchWithAuth(o)}}let Kt={prefix:"pt"};const Ut=e=>{Kt={...Kt,...e}},Gt=()=>{return{...Kt,prefix:(e=Kt.prefix,`${e}_ens_data`)};var e},Qt={poptics_ens_data:{nonce:"a8ad90e706",api_version:"v1",plugin_slug:"poptics",base_url:"http://poptics-demo.local",triggers:[{trigger_label:"Order Completed",trigger_value:"order_completed",trigger_data:[{label:"Order Amount",value:"order_amount",type:"number"},{label:"Order Status",value:"order_status",type:"string"},{label:"Order Date",value:"order_date",type:"date"},{label:"email",value:"email",type:"string"}],delay_dependencies:[{label:"Order Date",value:"order_date"},{label:"Event Date",value:"event_date"}],email_receivers:[{label:"User Email",value:"user_email"},{label:"Admin Email",value:"admin_email"}]},{trigger_label:"Event Created",trigger_value:"event_created",trigger_data:[{label:"Purchase Price",value:"purchase_price",type:"number"},{label:"Purchase Status",value:"purchase_status",type:"string"},{label:"Purchase Date",value:"purchase_date",type:"date"},{label:"email",value:"email",type:"string"}],delay_dependencies:[{label:"Order Date",value:"order_date"}],email_receivers:[{label:"User Email",value:"user_email"},{label:"Admin Email",value:"admin_email"}]}]}},Jt=[{label:"Send Email",value:"send_email"},{label:"Add Delay",value:"add_delay"}],en={send_email:{label:"Send Email",formFields:[{name:"receiverType",label:"Receiver Type",component:i.A,required:!0,props:{style:{width:"100%"},options:[],placeholder:"Select user type",getPopupContainer:e=>e.parentNode},rules:[{required:!0,message:"Please select a user type"}]},{name:"from",label:"From Address",component:a.A,required:!1,props:{style:{width:"100%"},placeholder:"Enter from address",type:"email"},rules:[{required:!1,type:"email",message:"Please enter a valid email address"}]},{name:"subject",label:"Email Subject",component:a.A,required:!0,props:{style:{width:"100%"},placeholder:"Enter email subject"},rules:[{required:!0,message:"Please enter email subject"}]},{name:"body",label:"Email Body",component:"richText",required:!0,props:{style:{height:"200px"},modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],["link","image"],["clean"]]}},rules:[{required:!0,message:"Please enter email content"}]}]},add_delay:{label:"Add Delay",formFields:[{name:"delay",label:"Wait Time",component:s.A,required:!0,props:{style:{width:"100%"},min:0,placeholder:"Delay amount in number"},rules:[{required:!0,message:"Please enter delay amount"}]},{name:"delayUnit",label:"Wait Time Unit",component:i.A,required:!0,props:{style:{width:"100%"},options:[{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"},{value:"weeks",label:"Weeks"}],placeholder:"Select time unit",getPopupContainer:e=>e.parentNode},rules:[{required:!0,message:"Please select a time unit"}]},{name:"delayCondition",label:"Delay condition",component:i.A,required:!1,tooltip:{title:"Select when the delay should be calculated from. This determines the reference point for your wait time.",icon:"info",placement:"topRight"},props:{style:{width:"100%"},options:[],placeholder:"Select delay condition",getPopupContainer:e=>e.parentNode}}]}},tn=[{label:"Equal to (=)",value:"equal"},{label:"Not equal to (≠)",value:"not_equal"},{label:"Greater than (>)",value:"greater_then"},{label:"Greater than or equal to (≥)",value:"greater_equal"},{label:"Less than (<)",value:"less_then"},{label:"Less than or equal to (≤)",value:"less_equal"}],nn=[{label:"Equal to (=)",value:"equal"},{label:"Not equal to (≠)",value:"not_equal"}],on=[{label:"Equal to (=)",value:"equal"},{label:"Not equal to (≠)",value:"not_equal"},{label:"Before (<)",value:"less_then"},{label:"After (>)",value:"greater_then"}],rn=()=>{const{prefix:e}=Gt(),{api_version:t="",base_url:n="",plugin_slug:o="",nonce:i=""}="undefined"!=typeof window&&window[e]?window[e]:Qt.poptics_ens_data,a=new qt({baseUrl:n,apiVersion:t,pluginSlug:o,nonce:i}),[s,c]=(0,r.useState)({}),[d,u]=(0,r.useState)(),[h,f]=(0,r.useState)([]),[g,p]=(0,r.useState)({trigger:"",status:"",searchKey:""});(0,r.useEffect)((()=>{l.Ay.config({top:32,duration:3})}),[]);const m=e=>{c((t=>({...t,[e]:!0})))},y=e=>{c((t=>({...t,[e]:!1})))},v=e=>!!s[e],b=(0,r.useCallback)((async e=>{var t,n,o;m("listFlows");const r=e||g;try{const{data:e}=await a.getFilteredFlows(r);return f((null==e?void 0:e.items)||[]),u({draft:(null===(t=null==e?void 0:e.status_count)||void 0===t?void 0:t.draft)||0,trash:(null===(n=null==e?void 0:e.status_count)||void 0===n?void 0:n.trash)||0,publish:(null===(o=null==e?void 0:e.status_count)||void 0===o?void 0:o.publish)||0}),{data:e}}catch(e){return console.error("Error fetching flows:",e),l.Ay.error("Failed to load flows"),{error:e}}finally{y("listFlows")}}),[a,g]),x=(0,r.useCallback)((async e=>{m("getFlow");try{return await a.getFlowById(e)}catch(e){return console.error("Error fetching flow:",e),l.Ay.error("Failed to load flow"),{error:e}}finally{y("getFlow")}}),[a]),w=(0,r.useCallback)((async(e,t,n=!1)=>{m("updateFlow");try{await a.updateFlow(e,t),l.Ay.success("Flow updated successfully"),n&&await b()}catch(e){return console.error("Error updating flow:",e),l.Ay.error("Failed to update flow"),{error:e}}finally{y("updateFlow")}}),[a]),S=(0,r.useCallback)((async e=>{m("deleteFlow");try{await a.deleteFlow(e),l.Ay.success("Flow deleted successfully"),await b()}catch(e){l.Ay.error("Failed to delete flow: "+(e instanceof Error?e.message:"Unknown error")),console.error("Error deleting flow:",e)}finally{y("deleteFlow")}}),[b]),C=(0,r.useCallback)((async e=>{m("cloneFlow");try{await a.cloneFlow(e),await b(),l.Ay.success("Flow cloned successfully")}catch(e){l.Ay.error("Failed to clone flow: "+(e instanceof Error?e.message:"Unknown error")),console.error("Error cloning flow:",e)}finally{y("cloneFlow")}}),[b]),E=(0,r.useCallback)((async e=>{m("createFlow");try{const t=await a.createFlow(e);return l.Ay.success("Flow created successfully"),await b(),null==t?void 0:t.data}catch(e){l.Ay.error("Failed to create flow: "+(e instanceof Error?e.message:"Unknown error")),console.error("Error creating flow:",e)}finally{y("createFlow")}}),[b]),_=(0,r.useCallback)((async e=>{m("bulkDelete");try{await a.bulkDeleteFlow(e),l.Ay.success(`${e.length} flows deleted successfully`),await b()}catch(e){l.Ay.error("Failed to delete flows: "+(e instanceof Error?e.message:"Unknown error")),console.error("Error bulk deleting flows:",e)}finally{y("bulkDelete")}}),[b]),k=(0,r.useCallback)((e=>{p((t=>{const n={...t,...e};return setTimeout((()=>{b(n)}),0),n}))}),[b]),N=(0,r.useCallback)((e=>{k({searchKey:e})}),[k]),M=(0,r.useCallback)((e=>{k({status:e})}),[k]),A=(0,r.useCallback)((e=>{k({trigger:e})}),[k]);return{notificationFlows:h,fetchFlows:b,editFlow:w,cloneFlow:C,createFlow:E,getFlowById:x,deleteFlow:S,bulkDeleteFlows:_,refresh:b,statusCount:d,isFlowListLoading:()=>v("listFlows"),isFlowLoading:()=>v("getFlow"),isFlowSaving:()=>v("updateFlow"),isFlowDeleting:()=>v("deleteFlow"),isFlowCloning:()=>v("cloneFlow"),isFlowCreating:()=>v("createFlow"),isFlowBulkDeleting:()=>v("bulkDelete"),filterFlows:k,searchFlows:N,filterByStatus:M,filterByTrigger:A,currentFilters:g}};function an(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,o=0;o<e.length;o++)""!==(n=an(e[o]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var sn={value:()=>{}};function ln(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new cn(o)}function cn(e){this._=e}function dn(e,t){for(var n,o=0,r=e.length;o<r;++o)if((n=e[o]).name===t)return n.value}function un(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=sn,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}cn.prototype=ln.prototype={constructor:cn,on:function(e,t){var n,o,r=this._,i=(o=r,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!o.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=i[a]).type)r[n]=un(r[n],e.name,t);else if(null==t)for(n in r)r[n]=un(r[n],e.name,null);return this}for(;++a<s;)if((n=(e=i[a]).type)&&(n=dn(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new cn(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(o=this._[e]).length;i<n;++i)o[i].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};var hn="http://www.w3.org/1999/xhtml",fn={svg:"http://www.w3.org/2000/svg",xhtml:hn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gn(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),fn.hasOwnProperty(t)?{space:fn[t],local:e}:e}function pn(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===hn&&t.documentElement.namespaceURI===hn?t.createElement(e):t.createElementNS(n,e)}}function mn(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function yn(e){var t=gn(e);return(t.local?mn:pn)(t)}function vn(){}function bn(e){return null==e?vn:function(){return this.querySelector(e)}}function xn(){return[]}function wn(e){return null==e?xn:function(){return this.querySelectorAll(e)}}function Sn(e){return function(){return this.matches(e)}}function Cn(e){return function(t){return t.matches(e)}}var En=Array.prototype.find;function kn(){return this.firstElementChild}var Nn=Array.prototype.filter;function Mn(){return Array.from(this.children)}function An(e){return new Array(e.length)}function Pn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function jn(e,t,n,o,r,i){for(var a,s=0,l=t.length,c=i.length;s<c;++s)(a=t[s])?(a.__data__=i[s],o[s]=a):n[s]=new Pn(e,i[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function On(e,t,n,o,r,i,a){var s,l,c,d=new Map,u=t.length,h=i.length,f=new Array(u);for(s=0;s<u;++s)(l=t[s])&&(f[s]=c=a.call(l,l.__data__,s,t)+"",d.has(c)?r[s]=l:d.set(c,l));for(s=0;s<h;++s)c=a.call(e,i[s],s,i)+"",(l=d.get(c))?(o[s]=l,l.__data__=i[s],d.delete(c)):n[s]=new Pn(e,i[s]);for(s=0;s<u;++s)(l=t[s])&&d.get(f[s])===l&&(r[s]=l)}function zn(e){return e.__data__}function Dn(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function In(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $n(e){return function(){this.removeAttribute(e)}}function Rn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Tn(e,t){return function(){this.setAttribute(e,t)}}function _n(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ln(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Bn(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Vn(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Hn(e){return function(){this.style.removeProperty(e)}}function Fn(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Yn(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Xn(e,t){return e.style.getPropertyValue(t)||Vn(e).getComputedStyle(e,null).getPropertyValue(t)}function Zn(e){return function(){delete this[e]}}function Wn(e,t){return function(){this[e]=t}}function qn(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Kn(e){return e.trim().split(/^|\s+/)}function Un(e){return e.classList||new Gn(e)}function Gn(e){this._node=e,this._names=Kn(e.getAttribute("class")||"")}function Qn(e,t){for(var n=Un(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function Jn(e,t){for(var n=Un(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function eo(e){return function(){Qn(this,e)}}function to(e){return function(){Jn(this,e)}}function no(e,t){return function(){(t.apply(this,arguments)?Qn:Jn)(this,e)}}function oo(){this.textContent=""}function ro(e){return function(){this.textContent=e}}function io(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ao(){this.innerHTML=""}function so(e){return function(){this.innerHTML=e}}function lo(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function co(){this.nextSibling&&this.parentNode.appendChild(this)}function uo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ho(){return null}function fo(){var e=this.parentNode;e&&e.removeChild(this)}function go(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function po(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function mo(e){return function(){var t=this.__on;if(t){for(var n,o=0,r=-1,i=t.length;o<i;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function yo(e,t,n){return function(){var o,r=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var a=0,s=r.length;a<s;++a)if((o=r[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),void(o.value=t);this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function vo(e,t,n){var o=Vn(e),r=o.CustomEvent;"function"==typeof r?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function bo(e,t){return function(){return vo(this,e,t)}}function xo(e,t){return function(){return vo(this,e,t.apply(this,arguments))}}Pn.prototype={constructor:Pn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},Gn.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var wo=[null];function So(e,t){this._groups=e,this._parents=t}function Co(){return new So([[document.documentElement]],wo)}function Eo(e){return"string"==typeof e?new So([[document.querySelector(e)]],[document.documentElement]):new So([[e]],wo)}function _o(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}So.prototype=Co.prototype={constructor:So,select:function(e){"function"!=typeof e&&(e=bn(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a,s=t[r],l=s.length,c=o[r]=new Array(l),d=0;d<l;++d)(i=s[d])&&(a=e.call(i,i.__data__,d,s))&&("__data__"in i&&(a.__data__=i.__data__),c[d]=a);return new So(o,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}(e):wn(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a,s=t[i],l=s.length,c=0;c<l;++c)(a=s[c])&&(o.push(e.call(a,a.__data__,c,s)),r.push(a));return new So(o,r)},selectChild:function(e){return this.select(null==e?kn:function(e){return function(){return En.call(this.children,e)}}("function"==typeof e?e:Cn(e)))},selectChildren:function(e){return this.selectAll(null==e?Mn:function(e){return function(){return Nn.call(this.children,e)}}("function"==typeof e?e:Cn(e)))},filter:function(e){"function"!=typeof e&&(e=Sn(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],s=a.length,l=o[r]=[],c=0;c<s;++c)(i=a[c])&&e.call(i,i.__data__,c,a)&&l.push(i);return new So(o,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,zn);var n,o=t?On:jn,r=this._parents,i=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=i.length,s=new Array(a),l=new Array(a),c=new Array(a),d=0;d<a;++d){var u=r[d],h=i[d],f=h.length,g=Dn(e.call(u,u&&u.__data__,d,r)),p=g.length,m=l[d]=new Array(p),y=s[d]=new Array(p);o(u,h,m,y,c[d]=new Array(f),g,t);for(var v,b,x=0,w=0;x<p;++x)if(v=m[x]){for(x>=w&&(w=x+1);!(b=y[w])&&++w<p;);v._next=b||null}}return(s=new So(s,r))._enter=l,s._exit=c,s},enter:function(){return new So(this._enter||this._groups.map(An),this._parents)},exit:function(){return new So(this._exit||this._groups.map(An),this._parents)},join:function(e,t,n){var o=this.enter(),r=this,i=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?i.remove():n(i),o&&r?o.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),s=new Array(r),l=0;l<a;++l)for(var c,d=n[l],u=o[l],h=d.length,f=s[l]=new Array(h),g=0;g<h;++g)(c=d[g]||u[g])&&(f[g]=c);for(;l<r;++l)s[l]=n[l];return new So(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,r=e[t],i=r.length-1,a=r[i];--i>=0;)(o=r[i])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=In);for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a,s=n[i],l=s.length,c=r[i]=new Array(l),d=0;d<l;++d)(a=s[d])&&(c[d]=a);c.sort(t)}return new So(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r,i=t[n],a=0,s=i.length;a<s;++a)(r=i[a])&&e.call(r,r.__data__,a,i);return this},attr:function(e,t){var n=gn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?Rn:$n:"function"==typeof t?n.local?Bn:Ln:n.local?_n:Tn)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Hn:"function"==typeof t?Yn:Fn)(e,t,null==n?"":n)):Xn(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Zn:"function"==typeof t?qn:Wn)(e,t)):this.node()[e]},classed:function(e,t){var n=Kn(e+"");if(arguments.length<2){for(var o=Un(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?no:t?eo:to)(n,t))},text:function(e){return arguments.length?this.each(null==e?oo:("function"==typeof e?io:ro)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ao:("function"==typeof e?lo:so)(e)):this.node().innerHTML},raise:function(){return this.each(co)},lower:function(){return this.each(uo)},append:function(e){var t="function"==typeof e?e:yn(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:yn(e),o=null==t?ho:"function"==typeof t?t:bn(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(fo)},clone:function(e){return this.select(e?po:go)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,r,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=i.length;if(!(arguments.length<2)){for(s=t?yo:mo,o=0;o<a;++o)this.each(s(i[o],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,d=s.length;c<d;++c)for(o=0,l=s[c];o<a;++o)if((r=i[o]).type===l.type&&r.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?xo:bo)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,r=e[t],i=0,a=r.length;i<a;++i)(o=r[i])&&(yield o)}};const ko={passive:!1},No={capture:!0,passive:!1};function Mo(e){e.stopImmediatePropagation()}function Ao(e){e.preventDefault(),e.stopImmediatePropagation()}function Po(e){var t=e.document.documentElement,n=Eo(e).on("dragstart.drag",Ao,No);"onselectstart"in t?n.on("selectstart.drag",Ao,No):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function jo(e,t){var n=e.document.documentElement,o=Eo(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ao,No),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Oo=e=>()=>e;function zo(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:s,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function Do(e){return!e.ctrlKey&&!e.button}function Io(){return this.parentNode}function $o(e,t){return null==t?{x:e.x,y:e.y}:t}function Ro(){return navigator.maxTouchPoints||"ontouchstart"in this}function To(){var e,t,n,o,r=Do,i=Io,a=$o,s=Ro,l={},c=ln("start","drag","end"),d=0,u=0;function h(e){e.on("mousedown.drag",f).filter(s).on("touchstart.drag",m).on("touchmove.drag",y,ko).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(a,s){if(!o&&r.call(this,a,s)){var l=b(this,i.call(this,a,s),a,s,"mouse");l&&(Eo(a.view).on("mousemove.drag",g,No).on("mouseup.drag",p,No),Po(a.view),Mo(a),n=!1,e=a.clientX,t=a.clientY,l("start",a))}}function g(o){if(Ao(o),!n){var r=o.clientX-e,i=o.clientY-t;n=r*r+i*i>u}l.mouse("drag",o)}function p(e){Eo(e.view).on("mousemove.drag mouseup.drag",null),jo(e.view,n),Ao(e),l.mouse("end",e)}function m(e,t){if(r.call(this,e,t)){var n,o,a=e.changedTouches,s=i.call(this,e,t),l=a.length;for(n=0;n<l;++n)(o=b(this,s,e,t,a[n].identifier,a[n]))&&(Mo(e),o("start",e,a[n]))}}function y(e){var t,n,o=e.changedTouches,r=o.length;for(t=0;t<r;++t)(n=l[o[t].identifier])&&(Ao(e),n("drag",e,o[t]))}function v(e){var t,n,r=e.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),t=0;t<i;++t)(n=l[r[t].identifier])&&(Mo(e),n("end",e,r[t]))}function b(e,t,n,o,r,i){var s,u,f,g=c.copy(),p=_o(i||n,t);if(null!=(f=a.call(e,new zo("beforestart",{sourceEvent:n,target:h,identifier:r,active:d,x:p[0],y:p[1],dx:0,dy:0,dispatch:g}),o)))return s=f.x-p[0]||0,u=f.y-p[1]||0,function n(i,a,c){var m,y=p;switch(i){case"start":l[r]=n,m=d++;break;case"end":delete l[r],--d;case"drag":p=_o(c||a,t),m=d}g.call(i,e,new zo(i,{sourceEvent:a,subject:f,target:h,identifier:r,active:m,x:p[0]+s,y:p[1]+u,dx:p[0]-y[0],dy:p[1]-y[1],dispatch:g}),o)}}return h.filter=function(e){return arguments.length?(r="function"==typeof e?e:Oo(!!e),h):r},h.container=function(e){return arguments.length?(i="function"==typeof e?e:Oo(e),h):i},h.subject=function(e){return arguments.length?(a="function"==typeof e?e:Oo(e),h):a},h.touchable=function(e){return arguments.length?(s="function"==typeof e?e:Oo(!!e),h):s},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(u=(e=+e)*e,h):Math.sqrt(u)},h}function Lo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Bo(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Vo(){}zo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Ho=.7,Fo=1/Ho,Yo="\\s*([+-]?\\d+)\\s*",Xo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wo=/^#([0-9a-f]{3,8})$/,qo=new RegExp(`^rgb\\(${Yo},${Yo},${Yo}\\)$`),Ko=new RegExp(`^rgb\\(${Zo},${Zo},${Zo}\\)$`),Uo=new RegExp(`^rgba\\(${Yo},${Yo},${Yo},${Xo}\\)$`),Go=new RegExp(`^rgba\\(${Zo},${Zo},${Zo},${Xo}\\)$`),Qo=new RegExp(`^hsl\\(${Xo},${Zo},${Zo}\\)$`),Jo=new RegExp(`^hsla\\(${Xo},${Zo},${Zo},${Xo}\\)$`),er={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function tr(){return this.rgb().formatHex()}function nr(){return this.rgb().formatRgb()}function or(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Wo.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?rr(t):3===n?new sr(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ir(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ir(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=qo.exec(e))?new sr(t[1],t[2],t[3],1):(t=Ko.exec(e))?new sr(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Uo.exec(e))?ir(t[1],t[2],t[3],t[4]):(t=Go.exec(e))?ir(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Qo.exec(e))?fr(t[1],t[2]/100,t[3]/100,1):(t=Jo.exec(e))?fr(t[1],t[2]/100,t[3]/100,t[4]):er.hasOwnProperty(e)?rr(er[e]):"transparent"===e?new sr(NaN,NaN,NaN,0):null}function rr(e){return new sr(e>>16&255,e>>8&255,255&e,1)}function ir(e,t,n,o){return o<=0&&(e=t=n=NaN),new sr(e,t,n,o)}function ar(e,t,n,o){return 1===arguments.length?((r=e)instanceof Vo||(r=or(r)),r?new sr((r=r.rgb()).r,r.g,r.b,r.opacity):new sr):new sr(e,t,n,null==o?1:o);var r}function sr(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function lr(){return`#${hr(this.r)}${hr(this.g)}${hr(this.b)}`}function cr(){const e=dr(this.opacity);return`${1===e?"rgb(":"rgba("}${ur(this.r)}, ${ur(this.g)}, ${ur(this.b)}${1===e?")":`, ${e})`}`}function dr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ur(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hr(e){return((e=ur(e))<16?"0":"")+e.toString(16)}function fr(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new pr(e,t,n,o)}function gr(e){if(e instanceof pr)return new pr(e.h,e.s,e.l,e.opacity);if(e instanceof Vo||(e=or(e)),!e)return new pr;if(e instanceof pr)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,s=i-r,l=(i+r)/2;return s?(a=t===i?(n-o)/s+6*(n<o):n===i?(o-t)/s+2:(t-n)/s+4,s/=l<.5?i+r:2-i-r,a*=60):s=l>0&&l<1?0:a,new pr(a,s,l,e.opacity)}function pr(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function mr(e){return(e=(e||0)%360)<0?e+360:e}function yr(e){return Math.max(0,Math.min(1,e||0))}function vr(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Lo(Vo,or,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:tr,formatHex:tr,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return gr(this).formatHsl()},formatRgb:nr,toString:nr}),Lo(sr,ar,Bo(Vo,{brighter(e){return e=null==e?Fo:Math.pow(Fo,e),new sr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Ho:Math.pow(Ho,e),new sr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new sr(ur(this.r),ur(this.g),ur(this.b),dr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lr,formatHex:lr,formatHex8:function(){return`#${hr(this.r)}${hr(this.g)}${hr(this.b)}${hr(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:cr,toString:cr})),Lo(pr,(function(e,t,n,o){return 1===arguments.length?gr(e):new pr(e,t,n,null==o?1:o)}),Bo(Vo,{brighter(e){return e=null==e?Fo:Math.pow(Fo,e),new pr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Ho:Math.pow(Ho,e),new pr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new sr(vr(e>=240?e-240:e+120,r,o),vr(e,r,o),vr(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new pr(mr(this.h),yr(this.s),yr(this.l),dr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=dr(this.opacity);return`${1===e?"hsl(":"hsla("}${mr(this.h)}, ${100*yr(this.s)}%, ${100*yr(this.l)}%${1===e?")":`, ${e})`}`}}));var br=e=>()=>e;function xr(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):br(isNaN(e)?t:e)}var wr=function e(t){var n=function(e){return 1==(e=+e)?xr:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}(t,n,e):br(isNaN(t)?n:t)}}(t);function o(e,t){var o=n((e=ar(e)).r,(t=ar(t)).r),r=n(e.g,t.g),i=n(e.b,t.b),a=xr(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=r(t),e.b=i(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function Sr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Cr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Er=new RegExp(Cr.source,"g");function _r(e,t){var n,o,r,i=Cr.lastIndex=Er.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=Cr.exec(e))&&(o=Er.exec(t));)(r=o.index)>i&&(r=t.slice(i,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,l.push({i:a,x:Sr(n,o)})),i=Er.lastIndex;return i<t.length&&(r=t.slice(i),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,o=0;o<t;++o)s[(n=l[o]).i]=n.x(e);return s.join("")})}var kr,Nr=180/Math.PI,Mr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ar(e,t,n,o,r,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Nr,skewX:Math.atan(l)*Nr,scaleX:a,scaleY:s}}function Pr(e,t,n,o){function r(e){return e.length?e.pop()+" ":""}return function(i,a){var s=[],l=[];return i=e(i),a=e(a),function(e,o,r,i,a,s){if(e!==r||o!==i){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:Sr(e,r)},{i:l-2,x:Sr(o,i)})}else(r||i)&&a.push("translate("+r+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,s,l),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(r(n)+"rotate(",null,o)-2,x:Sr(e,t)})):t&&n.push(r(n)+"rotate("+t+o)}(i.rotate,a.rotate,s,l),function(e,t,n,i){e!==t?i.push({i:n.push(r(n)+"skewX(",null,o)-2,x:Sr(e,t)}):t&&n.push(r(n)+"skewX("+t+o)}(i.skewX,a.skewX,s,l),function(e,t,n,o,i,a){if(e!==n||t!==o){var s=i.push(r(i)+"scale(",null,",",null,")");a.push({i:s-4,x:Sr(e,n)},{i:s-2,x:Sr(t,o)})}else 1===n&&1===o||i.push(r(i)+"scale("+n+","+o+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,s,l),i=a=null,function(e){for(var t,n=-1,o=l.length;++n<o;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var jr=Pr((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Mr:Ar(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Or=Pr((function(e){return null==e?Mr:(kr||(kr=document.createElementNS("http://www.w3.org/2000/svg","g")),kr.setAttribute("transform",e),(e=kr.transform.baseVal.consolidate())?Ar((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Mr)}),", ",")",")");function zr(e){return((e=Math.exp(e))+1/e)/2}var Dr,Ir,$r=function e(t,n,o){function r(e,r){var i,a,s=e[0],l=e[1],c=e[2],d=r[0],u=r[1],h=r[2],f=d-s,g=u-l,p=f*f+g*g;if(p<1e-12)a=Math.log(h/c)/t,i=function(e){return[s+e*f,l+e*g,c*Math.exp(t*e*a)]};else{var m=Math.sqrt(p),y=(h*h-c*c+o*p)/(2*c*n*m),v=(h*h-c*c-o*p)/(2*h*n*m),b=Math.log(Math.sqrt(y*y+1)-y),x=Math.log(Math.sqrt(v*v+1)-v);a=(x-b)/t,i=function(e){var o,r=e*a,i=zr(b),d=c/(n*m)*(i*(o=t*r+b,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[s+d*f,l+d*g,c*i/zr(t*r+b)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return r.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},r}(Math.SQRT2,2,4),Rr=0,Tr=0,Lr=0,Br=0,Vr=0,Hr=0,Fr="object"==typeof performance&&performance.now?performance:Date,Yr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Xr(){return Vr||(Yr(Zr),Vr=Fr.now()+Hr)}function Zr(){Vr=0}function Wr(){this._call=this._time=this._next=null}function qr(e,t,n){var o=new Wr;return o.restart(e,t,n),o}function Kr(){Vr=(Br=Fr.now())+Hr,Rr=Tr=0;try{!function(){Xr(),++Rr;for(var e,t=Dr;t;)(e=Vr-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Rr}()}finally{Rr=0,function(){for(var e,t,n=Dr,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Dr=t);Ir=e,Gr(o)}(),Vr=0}}function Ur(){var e=Fr.now(),t=e-Br;t>1e3&&(Hr-=t,Br=e)}function Gr(e){Rr||(Tr&&(Tr=clearTimeout(Tr)),e-Vr>24?(e<1/0&&(Tr=setTimeout(Kr,e-Fr.now()-Hr)),Lr&&(Lr=clearInterval(Lr))):(Lr||(Br=Fr.now(),Lr=setInterval(Ur,1e3)),Rr=1,Yr(Kr)))}function Qr(e,t,n){var o=new Wr;return t=null==t?0:+t,o.restart((n=>{o.stop(),e(n+t)}),t,n),o}Wr.prototype=qr.prototype={constructor:Wr,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Xr():+n)+(null==t?0:+t),this._next||Ir===this||(Ir?Ir._next=this:Dr=this,Ir=this),this._call=e,this._time=n,Gr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Gr())}};var Jr=ln("start","end","cancel","interrupt"),ei=[];function ti(e,t,n,o,r,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var o,r=e.__transition;function i(l){var c,d,u,h;if(1!==n.state)return s();for(c in r)if((h=r[c]).name===n.name){if(3===h.state)return Qr(i);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Qr((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(l))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,o=new Array(u=n.tween.length),c=0,d=-1;c<u;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=h);o.length=d+1}}function a(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),i=-1,a=o.length;++i<a;)o[i].call(e,r);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var o in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=qr((function(e){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)}),0,n.time)}(e,n,{name:t,index:o,group:r,on:Jr,tween:ei,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function ni(e,t){var n=ri(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function oi(e,t){var n=ri(e,t);if(n.state>3)throw new Error("too late; already running");return n}function ri(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ii(e,t){var n,o,r,i=e.__transition,a=!0;if(i){for(r in t=null==t?null:t+"",i)(n=i[r]).name===t?(o=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[r]):a=!1;a&&delete e.__transition}}function ai(e,t){var n,o;return function(){var r=oi(this,e),i=r.tween;if(i!==n)for(var a=0,s=(o=n=i).length;a<s;++a)if(o[a].name===t){(o=o.slice()).splice(a,1);break}r.tween=o}}function si(e,t,n){var o,r;if("function"!=typeof n)throw new Error;return function(){var i=oi(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var s={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=s;break}l===c&&r.push(s)}i.tween=r}}function li(e,t,n){var o=e._id;return e.each((function(){var e=oi(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return ri(e,o).value[t]}}function ci(e,t){var n;return("number"==typeof t?Sr:t instanceof or?wr:(n=or(t))?(t=n,wr):_r)(e,t)}function di(e){return function(){this.removeAttribute(e)}}function ui(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hi(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=t(o=a,n)}}function fi(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=t(o=a,n)}}function gi(e,t,n){var o,r,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===o&&s===r?i:(r=s,i=t(o=a,l));this.removeAttribute(e)}}function pi(e,t,n){var o,r,i;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===o&&s===r?i:(r=s,i=t(o=a,l));this.removeAttributeNS(e.space,e.local)}}function mi(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function yi(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function vi(e,t){return function(){ni(this,e).delay=+t.apply(this,arguments)}}function bi(e,t){return t=+t,function(){ni(this,e).delay=t}}function xi(e,t){return function(){oi(this,e).duration=+t.apply(this,arguments)}}function wi(e,t){return t=+t,function(){oi(this,e).duration=t}}var Si=Co.prototype.constructor;function Ci(e){return function(){this.style.removeProperty(e)}}var Ei=0;function _i(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function ki(){return++Ei}var Ni=Co.prototype;_i.prototype={constructor:_i,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=bn(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var s,l,c=o[a],d=c.length,u=i[a]=new Array(d),h=0;h<d;++h)(s=c[h])&&(l=e.call(s,s.__data__,h,c))&&("__data__"in s&&(l.__data__=s.__data__),u[h]=l,ti(u[h],t,n,h,u,ri(s,n)));return new _i(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=wn(e));for(var o=this._groups,r=o.length,i=[],a=[],s=0;s<r;++s)for(var l,c=o[s],d=c.length,u=0;u<d;++u)if(l=c[u]){for(var h,f=e.call(l,l.__data__,u,c),g=ri(l,n),p=0,m=f.length;p<m;++p)(h=f[p])&&ti(h,t,n,p,f,g);i.push(f),a.push(l)}return new _i(i,a,t,n)},selectChild:Ni.selectChild,selectChildren:Ni.selectChildren,filter:function(e){"function"!=typeof e&&(e=Sn(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],s=a.length,l=o[r]=[],c=0;c<s;++c)(i=a[c])&&e.call(i,i.__data__,c,a)&&l.push(i);return new _i(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),s=0;s<i;++s)for(var l,c=t[s],d=n[s],u=c.length,h=a[s]=new Array(u),f=0;f<u;++f)(l=c[f]||d[f])&&(h[f]=l);for(;s<o;++s)a[s]=t[s];return new _i(a,this._parents,this._name,this._id)},selection:function(){return new Si(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=ki(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a,s=o[i],l=s.length,c=0;c<l;++c)if(a=s[c]){var d=ri(a,t);ti(a,e,n,c,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new _i(o,this._parents,e,n)},call:Ni.call,nodes:Ni.nodes,node:Ni.node,size:Ni.size,empty:Ni.empty,each:Ni.each,on:function(e,t){var n=this._id;return arguments.length<2?ri(this.node(),n).on.on(e):this.each(function(e,t,n){var o,r,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?ni:oi;return function(){var a=i(this,e),s=a.on;s!==o&&(r=(o=s).copy()).on(t,n),a.on=r}}(n,e,t))},attr:function(e,t){var n=gn(e),o="transform"===n?Or:ci;return this.attrTween(e,"function"==typeof t?(n.local?pi:gi)(n,o,li(this,"attr."+e,t)):null==t?(n.local?ui:di)(n):(n.local?fi:hi)(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=gn(e);return this.tween(n,(o.local?mi:yi)(o,t))},style:function(e,t,n){var o="transform"==(e+="")?jr:ci;return null==t?this.styleTween(e,function(e,t){var n,o,r;return function(){var i=Xn(this,e),a=(this.style.removeProperty(e),Xn(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}(e,o)).on("end.style."+e,Ci(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var o,r,i;return function(){var a=Xn(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=Xn(this,e)),a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s))}}(e,o,li(this,"style."+e,t))).each(function(e,t){var n,o,r,i,a="style."+t,s="end."+a;return function(){var l=oi(this,e),c=l.on,d=null==l.value[a]?i||(i=Ci(t)):void 0;c===n&&r===d||(o=(n=c).copy()).on(s,r=d),l.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,r,i=n+"";return function(){var a=Xn(this,e);return a===i?null:a===o?r:r=t(o=a,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!=typeof t)throw new Error;return this.tween(o,function(e,t,n){var o,r;function i(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&function(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}(e,i,n)),o}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(li(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&function(e){return function(t){this.textContent=e.call(this,t)}}(o)),t}return o._value=e,o}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,r=ri(this.node(),n).tween,i=0,a=r.length;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((null==t?ai:si)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?vi:bi)(t,e)):ri(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?xi:wi)(t,e)):ri(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){oi(this,e).ease=t}}(t,e)):ri(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;oi(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,o=n._id,r=n.size();return new Promise((function(i,a){var s={value:a},l={value:function(){0==--r&&i()}};n.each((function(){var n=oi(this,o),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})),0===r&&i()}))},[Symbol.iterator]:Ni[Symbol.iterator]};var Mi={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Ai(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Co.prototype.interrupt=function(e){return this.each((function(){ii(this,e)}))},Co.prototype.transition=function(e){var t,n;e instanceof _i?(t=e._id,e=e._name):(t=ki(),(n=Mi).time=Xr(),e=null==e?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a,s=o[i],l=s.length,c=0;c<l;++c)(a=s[c])&&ti(a,e,t,c,s,n||Ai(a,t));return new _i(o,this._parents,e,t)};var Pi=e=>()=>e;function ji(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Oi(e,t,n){this.k=e,this.x=t,this.y=n}Oi.prototype={constructor:Oi,scale:function(e){return 1===e?this:new Oi(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Oi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var zi=new Oi(1,0,0);function Di(e){for(;!e.__zoom;)if(!(e=e.parentNode))return zi;return e.__zoom}function Ii(e){e.stopImmediatePropagation()}function $i(e){e.preventDefault(),e.stopImmediatePropagation()}function Ri(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Ti(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Li(){return this.__zoom||zi}function Bi(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Vi(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hi(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function Fi(){var e,t,n,o=Ri,r=Ti,i=Hi,a=Bi,s=Vi,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,u=$r,h=ln("start","zoom","end"),f=0,g=10;function p(e){e.property("__zoom",Li).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",E).filter(s).on("touchstart.zoom",_).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Oi(t,e.x,e.y)}function y(e,t,n){var o=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return o===e.x&&r===e.y?e:new Oi(e.k,o,r)}function v(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n,o){e.on("start.zoom",(function(){x(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,i=arguments,a=x(e,i).event(o),s=r.apply(e,i),l=null==n?v(s):"function"==typeof n?n.apply(e,i):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),d=e.__zoom,h="function"==typeof t?t.apply(e,i):t,f=u(d.invert(l).concat(c/d.k),h.invert(l).concat(c/h.k));return function(e){if(1===e)e=h;else{var t=f(e),n=c/t[2];e=new Oi(n,l[0]-t[0]*n,l[1]-t[1]*n)}a.zoom(null,e)}}))}function x(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=r.apply(e,t),this.taps=0}function S(e,...t){if(o.apply(this,arguments)){var n=x(this,t).event(e),r=this.__zoom,s=Math.max(l[0],Math.min(l[1],r.k*Math.pow(2,a.apply(this,arguments)))),d=_o(e);if(n.wheel)n.mouse[0][0]===d[0]&&n.mouse[0][1]===d[1]||(n.mouse[1]=r.invert(n.mouse[0]=d)),clearTimeout(n.wheel);else{if(r.k===s)return;n.mouse=[d,r.invert(d)],ii(this),n.start()}$i(e),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),150),n.zoom("mouse",i(y(m(r,s),n.mouse[0],n.mouse[1]),n.extent,c))}}function C(e,...t){if(!n&&o.apply(this,arguments)){var r=e.currentTarget,a=x(this,t,!0).event(e),s=Eo(e.view).on("mousemove.zoom",(function(e){if($i(e),!a.moved){var t=e.clientX-d,n=e.clientY-u;a.moved=t*t+n*n>f}a.event(e).zoom("mouse",i(y(a.that.__zoom,a.mouse[0]=_o(e,r),a.mouse[1]),a.extent,c))}),!0).on("mouseup.zoom",(function(e){s.on("mousemove.zoom mouseup.zoom",null),jo(e.view,a.moved),$i(e),a.event(e).end()}),!0),l=_o(e,r),d=e.clientX,u=e.clientY;Po(e.view),Ii(e),a.mouse=[l,this.__zoom.invert(l)],ii(this),a.start()}}function E(e,...t){if(o.apply(this,arguments)){var n=this.__zoom,a=_o(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(a),l=n.k*(e.shiftKey?.5:2),u=i(y(m(n,l),a,s),r.apply(this,t),c);$i(e),d>0?Eo(this).transition().duration(d).call(b,u,a,e):Eo(this).call(p.transform,u,a,e)}}function _(n,...r){if(o.apply(this,arguments)){var i,a,s,l,c=n.touches,d=c.length,u=x(this,r,n.changedTouches.length===d).event(n);for(Ii(n),a=0;a<d;++a)l=[l=_o(s=c[a],this),this.__zoom.invert(l),s.identifier],u.touch0?u.touch1||u.touch0[2]===l[2]||(u.touch1=l,u.taps=0):(u.touch0=l,i=!0,u.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(u.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),500)),ii(this),u.start())}}function k(e,...t){if(this.__zooming){var n,o,r,a,s=x(this,t).event(e),l=e.changedTouches,d=l.length;for($i(e),n=0;n<d;++n)r=_o(o=l[n],this),s.touch0&&s.touch0[2]===o.identifier?s.touch0[0]=r:s.touch1&&s.touch1[2]===o.identifier&&(s.touch1[0]=r);if(o=s.that.__zoom,s.touch1){var u=s.touch0[0],h=s.touch0[1],f=s.touch1[0],g=s.touch1[1],p=(p=f[0]-u[0])*p+(p=f[1]-u[1])*p,v=(v=g[0]-h[0])*v+(v=g[1]-h[1])*v;o=m(o,Math.sqrt(p/v)),r=[(u[0]+f[0])/2,(u[1]+f[1])/2],a=[(h[0]+g[0])/2,(h[1]+g[1])/2]}else{if(!s.touch0)return;r=s.touch0[0],a=s.touch0[1]}s.zoom("touch",i(y(o,r,a),s.extent,c))}}function N(e,...o){if(this.__zooming){var r,i,a=x(this,o).event(e),s=e.changedTouches,l=s.length;for(Ii(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),r=0;r<l;++r)i=s[r],a.touch0&&a.touch0[2]===i.identifier?delete a.touch0:a.touch1&&a.touch1[2]===i.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(i=_o(i,this),Math.hypot(t[0]-i[0],t[1]-i[1])<g)){var c=Eo(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return p.transform=function(e,t,n,o){var r=e.selection?e.selection():e;r.property("__zoom",Li),e!==r?b(e,t,n,o):r.interrupt().each((function(){x(this,arguments).event(o).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},p.scaleBy=function(e,t,n,o){p.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,o)},p.scaleTo=function(e,t,n,o){p.transform(e,(function(){var e=r.apply(this,arguments),o=this.__zoom,a=null==n?v(e):"function"==typeof n?n.apply(this,arguments):n,s=o.invert(a),l="function"==typeof t?t.apply(this,arguments):t;return i(y(m(o,l),a,s),e,c)}),n,o)},p.translateBy=function(e,t,n,o){p.transform(e,(function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),c)}),null,o)},p.translateTo=function(e,t,n,o,a){p.transform(e,(function(){var e=r.apply(this,arguments),a=this.__zoom,s=null==o?v(e):"function"==typeof o?o.apply(this,arguments):o;return i(zi.translate(s[0],s[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)}),o,a)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Eo(this.that).datum();h.call(e,this.that,new ji(e,{sourceEvent:this.sourceEvent,target:p,transform:this.that.__zoom,dispatch:h}),t)}},p.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:Pi(+e),p):a},p.filter=function(e){return arguments.length?(o="function"==typeof e?e:Pi(!!e),p):o},p.touchable=function(e){return arguments.length?(s="function"==typeof e?e:Pi(!!e),p):s},p.extent=function(e){return arguments.length?(r="function"==typeof e?e:Pi([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),p):r},p.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],p):[l[0],l[1]]},p.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],p):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},p.constrain=function(e){return arguments.length?(i=e,p):i},p.duration=function(e){return arguments.length?(d=+e,p):d},p.interpolate=function(e){return arguments.length?(u=e,p):u},p.on=function(){var e=h.on.apply(h,arguments);return e===h?p:e},p.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,p):Math.sqrt(f)},p.tapDistance=function(e){return arguments.length?(g=+e,p):g},p}Di.prototype=Oi.prototype;const Yi=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Xi=["Enter"," ","Escape"];var Zi,Wi,qi,Ki;(Ki=Zi||(Zi={})).Strict="strict",Ki.Loose="loose",function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(Wi||(Wi={})),function(e){e.Partial="partial",e.Full="full"}(qi||(qi={}));const Ui={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Gi,Qi,Ji;!function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(Gi||(Gi={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(Qi||(Qi={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(Ji||(Ji={}));const ea={[Ji.Left]:Ji.Right,[Ji.Right]:Ji.Left,[Ji.Top]:Ji.Bottom,[Ji.Bottom]:Ji.Top};function ta(e){return null===e?null:e?"valid":"invalid"}const na=e=>"id"in e&&"source"in e&&"target"in e,oa=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),ra=(e,t=[0,0])=>{const{width:n,height:o}=Pa(e),r=e.origin??t,i=n*r[0],a=o*r[1];return{x:e.position.x-i,y:e.position.y-a}},ia=(e,t={})=>{if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach((e=>{if(void 0===t.filter||t.filter(e)){const t=ya(e);n=fa(n,t)}})),pa(n)},aa=(e,t,[n,o,r]=[0,0,1],i=!1,a=!1)=>{const s={...Ea(t,[n,o,r]),width:t.width/r,height:t.height/r},l=[];for(const t of e.values()){const{measured:e,selectable:n=!0,hidden:o=!1}=t;if(a&&!n||o)continue;const r=e.width??t.width??t.initialWidth??null,c=e.height??t.height??t.initialHeight??null,d=ba(s,ma(t)),u=(r??0)*(c??0),h=i&&d>0;(!t.internals.handleBounds||h||d>=u||t.dragging)&&l.push(t)}return l};function sa({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:i}){const a=n.get(e),s=a.parentId?n.get(a.parentId):void 0,{x:l,y:c}=s?s.internals.positionAbsolute:{x:0,y:0},d=a.origin??o;let u=r;if("parent"!==a.extent||a.expandParent)s&&Aa(a.extent)&&(u=[[a.extent[0][0]+l,a.extent[0][1]+c],[a.extent[1][0]+l,a.extent[1][1]+c]]);else if(s){const e=s.measured.width,t=s.measured.height;e&&t&&(u=[[l,c],[l+e,c+t]])}else i?.("005","Only child nodes can use a parent extent.");const h=Aa(u)?ca(t,u,a.measured):t;return void 0!==a.measured.width&&void 0!==a.measured.height||i?.("015","It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."),{position:{x:h.x-l+(a.measured.width??0)*d[0],y:h.y-c+(a.measured.height??0)*d[1]},positionAbsolute:h}}const la=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ca=(e={x:0,y:0},t,n)=>({x:la(e.x,t[0][0],t[1][0]-(n?.width??0)),y:la(e.y,t[0][1],t[1][1]-(n?.height??0))});function da(e,t,n){const{width:o,height:r}=Pa(n),{x:i,y:a}=n.internals.positionAbsolute;return ca(e,[[i,a],[i+o,a+r]],t)}const ua=(e,t,n)=>e<t?la(Math.abs(e-t),1,t)/t:e>n?-la(Math.abs(e-n),1,t)/t:0,ha=(e,t,n=15,o=40)=>[ua(e.x,o,t.width-o)*n,ua(e.y,o,t.height-o)*n],fa=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ga=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),pa=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),ma=(e,t=[0,0])=>{const{x:n,y:o}=oa(e)?e.internals.positionAbsolute:ra(e,t);return{x:n,y:o,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},ya=(e,t=[0,0])=>{const{x:n,y:o}=oa(e)?e.internals.positionAbsolute:ra(e,t);return{x:n,y:o,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:o+(e.measured?.height??e.height??e.initialHeight??0)}},va=(e,t)=>pa(fa(ga(e),ga(t))),ba=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},xa=e=>wa(e.width)&&wa(e.height)&&wa(e.x)&&wa(e.y),wa=e=>!isNaN(e)&&isFinite(e),Sa=(e,t)=>{},Ca=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Ea=({x:e,y:t},[n,o,r],i=!1,a=[1,1])=>{const s={x:(e-n)/r,y:(t-o)/r};return i?Ca(s,a):s},_a=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o});function ka(e,t){if("number"==typeof e)return Math.floor(.5*(t-t/(1+e)));if("string"==typeof e&&e.endsWith("px")){const t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}const Na=(e,t,n,o,r,i)=>{const a=function(e,t,n){if("string"==typeof e||"number"==typeof e){const o=ka(e,n),r=ka(e,t);return{top:o,right:r,bottom:o,left:r,x:2*r,y:2*o}}if("object"==typeof e){const o=ka(e.top??e.y??0,n),r=ka(e.bottom??e.y??0,n),i=ka(e.left??e.x??0,t),a=ka(e.right??e.x??0,t);return{top:o,right:a,bottom:r,left:i,x:i+a,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(i,t,n),s=(t-a.x)/e.width,l=(n-a.y)/e.height,c=Math.min(s,l),d=la(c,o,r),u=t/2-(e.x+e.width/2)*d,h=n/2-(e.y+e.height/2)*d,f=function(e,t,n,o,r,i){const{x:a,y:s}=_a(e,[t,n,o]),{x:l,y:c}=_a({x:e.x+e.width,y:e.y+e.height},[t,n,o]),d=r-l,u=i-c;return{left:Math.floor(a),top:Math.floor(s),right:Math.floor(d),bottom:Math.floor(u)}}(e,u,h,d,t,n),g=Math.min(f.left-a.left,0),p=Math.min(f.top-a.top,0);return{x:u-g+Math.min(f.right-a.right,0),y:h-p+Math.min(f.bottom-a.bottom,0),zoom:d}},Ma=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function Aa(e){return void 0!==e&&"parent"!==e}function Pa(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function ja(e){return void 0!==(e.measured?.width??e.width??e.initialWidth)&&void 0!==(e.measured?.height??e.height??e.initialHeight)}function Oa(e,t={width:0,height:0},n,o,r){const i={...e},a=o.get(n);if(a){const e=a.origin||r;i.x+=a.internals.positionAbsolute.x-(t.width??0)*e[0],i.y+=a.internals.positionAbsolute.y-(t.height??0)*e[1]}return i}function za(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Da(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){const{x:i,y:a}=Ba(e),s=Ea({x:i-(r?.left??0),y:a-(r?.top??0)},o),{x:l,y:c}=n?Ca(s,t):s;return{xSnapped:l,ySnapped:c,...s}}const Ia=e=>({width:e.offsetWidth,height:e.offsetHeight}),$a=e=>e?.getRootNode?.()||window?.document,Ra=["INPUT","SELECT","TEXTAREA"];function Ta(e){const t=e.composedPath?.()?.[0]||e.target;return 1===t?.nodeType&&(Ra.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey"))}const La=e=>"clientX"in e,Ba=(e,t)=>{const n=La(e),o=n?e.clientX:e.touches?.[0].clientX,r=n?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:r-(t?.top??0)}},Va=(e,t,n,o,r)=>{const i=t.querySelectorAll(`.${e}`);return i&&i.length?Array.from(i).map((t=>{const i=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:r,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/o,y:(i.top-n.top)/o,...Ia(t)}})):null};function Ha({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:a,targetControlY:s}){const l=.125*e+.375*r+.375*a+.125*n,c=.125*t+.375*i+.375*s+.125*o;return[l,c,Math.abs(l-e),Math.abs(c-t)]}function Fa(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function Ya({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){switch(e){case Ji.Left:return[t-Fa(t-o,i),n];case Ji.Right:return[t+Fa(o-t,i),n];case Ji.Top:return[t,n-Fa(n-r,i)];case Ji.Bottom:return[t,n+Fa(r-n,i)]}}function Xa({sourceX:e,sourceY:t,sourcePosition:n=Ji.Bottom,targetX:o,targetY:r,targetPosition:i=Ji.Top,curvature:a=.25}){const[s,l]=Ya({pos:n,x1:e,y1:t,x2:o,y2:r,c:a}),[c,d]=Ya({pos:i,x1:o,y1:r,x2:e,y2:t,c:a}),[u,h,f,g]=Ha({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${s},${l} ${c},${d} ${o},${r}`,u,h,f,g]}function Za({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,a=Math.abs(o-t)/2;return[i,o<t?o+a:o-a,r,a]}function Wa({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){const i=fa(ya(e),ya(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const a={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return ba(a,pa(i))>0}const qa=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`;function Ka({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,i,a,s]=Za({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,a,s]}const Ua={[Ji.Left]:{x:-1,y:0},[Ji.Right]:{x:1,y:0},[Ji.Top]:{x:0,y:-1},[Ji.Bottom]:{x:0,y:1}},Ga=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Qa({sourceX:e,sourceY:t,sourcePosition:n=Ji.Bottom,targetX:o,targetY:r,targetPosition:i=Ji.Top,borderRadius:a=5,centerX:s,centerY:l,offset:c=20}){const[d,u,h,f,g]=function({source:e,sourcePosition:t=Ji.Bottom,target:n,targetPosition:o=Ji.Top,center:r,offset:i}){const a=Ua[t],s=Ua[o],l={x:e.x+a.x*i,y:e.y+a.y*i},c={x:n.x+s.x*i,y:n.y+s.y*i},d=(({source:e,sourcePosition:t=Ji.Bottom,target:n})=>t===Ji.Left||t===Ji.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:l,sourcePosition:t,target:c}),u=0!==d.x?"x":"y",h=d[u];let f,g,p=[];const m={x:0,y:0},y={x:0,y:0},[v,b,x,w]=Za({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[u]*s[u]==-1){f=r.x??v,g=r.y??b;const e=[{x:f,y:l.y},{x:f,y:c.y}],t=[{x:l.x,y:g},{x:c.x,y:g}];p=a[u]===h?"x"===u?e:t:"x"===u?t:e}else{const r=[{x:l.x,y:c.y}],d=[{x:c.x,y:l.y}];if(p="x"===u?a.x===h?d:r:a.y===h?r:d,t===o){const t=Math.abs(e[u]-n[u]);if(t<=i){const o=Math.min(i-1,i-t);a[u]===h?m[u]=(l[u]>e[u]?-1:1)*o:y[u]=(c[u]>n[u]?-1:1)*o}}if(t!==o){const e="x"===u?"y":"x",t=a[u]===s[e],n=l[e]>c[e],o=l[e]<c[e];(1===a[u]&&(!t&&n||t&&o)||1!==a[u]&&(!t&&o||t&&n))&&(p="x"===u?r:d)}const v={x:l.x+m.x,y:l.y+m.y},b={x:c.x+y.x,y:c.y+y.y};Math.max(Math.abs(v.x-p[0].x),Math.abs(b.x-p[0].x))>=Math.max(Math.abs(v.y-p[0].y),Math.abs(b.y-p[0].y))?(f=(v.x+b.x)/2,g=p[0].y):(f=p[0].x,g=(v.y+b.y)/2)}return[[e,{x:l.x+m.x,y:l.y+m.y},...p,{x:c.x+y.x,y:c.y+y.y},n],f,g,x,w]}({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:s,y:l},offset:c});return[d.reduce(((e,t,n)=>{let o="";return o=n>0&&n<d.length-1?function(e,t,n,o){const r=Math.min(Ga(e,t)/2,Ga(t,n)/2,o),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a)return`L ${i+r*(e.x<n.x?-1:1)},${a}Q ${i},${a} ${i},${a+r*(e.y<n.y?1:-1)}`;const s=e.x<n.x?1:-1;return`L ${i},${a+r*(e.y<n.y?-1:1)}Q ${i},${a} ${i+r*s},${a}`}(d[n-1],t,d[n+1],a):`${0===n?"M":"L"}${t.x} ${t.y}`,e+o}),""),u,h,f,g]}function Ja(e){return e&&!(!e.internals.handleBounds&&!e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function es(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,"source"===o.type?t.push(o):"target"===o.type&&n.push(o);return{source:t,target:n}}function ts(e,t,n=Ji.Left,o=!1){const r=(t?.x??0)+e.internals.positionAbsolute.x,i=(t?.y??0)+e.internals.positionAbsolute.y,{width:a,height:s}=t??Pa(e);if(o)return{x:r+a/2,y:i+s/2};switch(t?.position??n){case Ji.Top:return{x:r+a/2,y:i};case Ji.Right:return{x:r+a,y:i+s/2};case Ji.Bottom:return{x:r+a/2,y:i+s};case Ji.Left:return{x:r,y:i+s/2}}}function ns(e,t){return e&&(t?e.find((e=>e.id===t)):e[0])||null}function os(e,t){return e?"string"==typeof e?e:`${t?`${t}__`:""}${Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&")}`:""}const rs={nodeOrigin:[0,0],nodeExtent:Yi,elevateNodesOnSelect:!0,defaults:{}},is={...rs,checkEquality:!0};function as(e,t){const n={...e};for(const e in t)void 0!==t[e]&&(n[e]=t[e]);return n}function ss(e,t,n,o){const r=as(is,o);let i=e.length>0;const a=new Map(t),s=r?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const l of e){let e=a.get(l.id);if(r.checkEquality&&l===e?.internals.userNode)t.set(l.id,e);else{const n=ra(l,r.nodeOrigin),o=Aa(l.extent)?l.extent:r.nodeExtent,i=ca(n,o,Pa(l));e={...r.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:i,handleBounds:l.measured?e?.internals.handleBounds:void 0,z:cs(l,s),userNode:l}},t.set(l.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(i=!1),l.parentId&&ls(e,t,n,o)}return i}function ls(e,t,n,o){const{elevateNodesOnSelect:r,nodeOrigin:i,nodeExtent:a}=as(rs,o),s=e.parentId,l=t.get(s);if(!l)return void console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);const c=r?1e3:0,{x:d,y:u,z:h}=function(e,t,n,o,r){const{x:i,y:a}=t.internals.positionAbsolute,s=Pa(e),l=ra(e,n),c=Aa(e.extent)?ca(l,e.extent,s):l;let d=ca({x:i+c.x,y:a+c.y},o,s);"parent"===e.extent&&(d=da(d,s,t));const u=cs(e,r),h=t.internals.z??0;return{x:d.x,y:d.y,z:h>u?h:u}}(e,l,i,a,c),{positionAbsolute:f}=e.internals,g=d!==f.x||u!==f.y;(g||h!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:g?{x:d,y:u}:f,z:h}})}function cs(e,t){return(wa(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function ds(e,t,n,o=[0,0]){const r=[],i=new Map;for(const n of e){const e=t.get(n.parentId);if(!e)continue;const o=i.get(n.parentId)?.expandedRect??ma(e),r=va(o,n.rect);i.set(n.parentId,{expandedRect:r,parent:e})}return i.size>0&&i.forEach((({expandedRect:t,parent:i},a)=>{const s=i.internals.positionAbsolute,l=Pa(i),c=i.origin??o,d=t.x<s.x?Math.round(Math.abs(s.x-t.x)):0,u=t.y<s.y?Math.round(Math.abs(s.y-t.y)):0,h=Math.max(l.width,Math.round(t.width)),f=Math.max(l.height,Math.round(t.height)),g=(h-l.width)*c[0],p=(f-l.height)*c[1];(d>0||u>0||g||p)&&(r.push({id:a,type:"position",position:{x:i.position.x-d+g,y:i.position.y-u+p}}),n.get(a)?.forEach((t=>{e.some((e=>e.id===t.id))||r.push({id:t.id,type:"position",position:{x:t.position.x+d,y:t.position.y+u}})}))),(l.width<t.width||l.height<t.height||d||u)&&r.push({id:a,type:"dimensions",setAttributes:!0,dimensions:{width:h+(d?c[0]*d-g:0),height:f+(u?c[1]*u-p:0)}})})),r}function us(e,t,n,o,r,i){let a=r;const s=o.get(a)||new Map;o.set(a,s.set(n,t)),a=`${r}-${e}`;const l=o.get(a)||new Map;if(o.set(a,l.set(n,t)),i){a=`${r}-${e}-${i}`;const s=o.get(a)||new Map;o.set(a,s.set(n,t))}}function hs(e,t,n){e.clear(),t.clear();for(const o of n){const{source:n,target:r,sourceHandle:i=null,targetHandle:a=null}=o,s={edgeId:o.id,source:n,target:r,sourceHandle:i,targetHandle:a},l=`${n}-${i}--${r}-${a}`;us("source",s,`${r}-${a}--${n}-${i}`,e,n,i),us("target",s,l,e,r,a),t.set(o.id,o)}}function fs(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return!!n&&(!!n.selected||fs(n,t))}function gs(e,t,n){let o=e;do{if(o?.matches?.(t))return!0;if(o===n)return!1;o=o?.parentElement}while(o);return!1}function ps({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){const r=[];for(const[e,i]of t){const t=n.get(e)?.internals.userNode;t&&r.push({...t,position:i.position,dragging:o})}if(!e)return[r[0],r];const i=n.get(e)?.internals.userNode;return[i?{...i,position:t.get(e)?.position||i.position,dragging:o}:r[0],r]}function ms(e,t,n,o,r,i=!1){const a=o.get(e);if(!a)return null;const s="strict"===r?a.internals.handleBounds?.[t]:[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]],l=(n?s?.find((e=>e.id===n)):s?.[0])??null;return l&&i?{...l,...ts(a,l,l.position,!0)}:l}function ys(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}const vs=()=>!0;function bs(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:a,lib:s,flowId:l,isValidConnection:c=vs,nodeLookup:d}){const u="target"===i,h=t?a.querySelector(`.${s}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:f,y:g}=Ba(e),p=a.elementFromPoint(f,g),m=p?.classList.contains(`${s}-flow__handle`)?p:h,y={handleDomNode:m,isValid:!1,connection:null,toHandle:null};if(m){const e=ys(void 0,m),t=m.getAttribute("data-nodeid"),i=m.getAttribute("data-handleid"),a=m.classList.contains("connectable"),s=m.classList.contains("connectableend");if(!t||!e)return y;const l={source:u?t:o,sourceHandle:u?i:r,target:u?o:t,targetHandle:u?r:i};y.connection=l;const h=a&&s&&(n===Zi.Strict?u&&"source"===e||!u&&"target"===e:t!==o||i!==r);y.isValid=h&&c(l),y.toHandle=ms(t,e,i,d,n,!0)}return y}const xs={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:i,isTarget:a,domNode:s,nodeLookup:l,lib:c,autoPanOnConnect:d,flowId:u,panBy:h,cancelConnection:f,onConnectStart:g,onConnect:p,onConnectEnd:m,isValidConnection:y=vs,onReconnectEnd:v,updateConnection:b,getTransform:x,getFromHandle:w,autoPanSpeed:S}){const C=$a(e.target);let E,_=0;const{x:k,y:N}=Ba(e),M=C?.elementFromPoint(k,N),A=ys(i,M),P=s?.getBoundingClientRect();if(!P||!A)return;const j=ms(r,A,o,l,t);if(!j)return;let O=Ba(e,P),z=!1,D=null,I=!1,$=null;function R(){if(!d||!P)return;const[e,t]=ha(O,P,S);h({x:e,y:t}),_=requestAnimationFrame(R)}const T={...j,nodeId:r,type:A,position:j.position},L=l.get(r),B={inProgress:!0,isValid:null,from:ts(L,T,Ji.Left,!0),fromHandle:T,fromPosition:T.position,fromNode:L,to:O,toHandle:null,toPosition:ea[T.position],toNode:null};b(B);let V=B;function H(e){if(!w()||!T)return void F(e);const i=x();O=Ba(e,P),E=function(e,t,n,o){let r=[],i=1/0;const a=function(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const e of t.values())ba(r,ma(e))>0&&o.push(e);return o}(e,n,t+250);for(const n of a){const a=[...n.internals.handleBounds?.source??[],...n.internals.handleBounds?.target??[]];for(const s of a){if(o.nodeId===s.nodeId&&o.type===s.type&&o.id===s.id)continue;const{x:a,y:l}=ts(n,s,s.position,!0),c=Math.sqrt(Math.pow(a-e.x,2)+Math.pow(l-e.y,2));c>t||(c<i?(r=[{...s,x:a,y:l}],i=c):c===i&&r.push({...s,x:a,y:l}))}}if(!r.length)return null;if(r.length>1){const e="source"===o.type?"target":"source";return r.find((t=>t.type===e))??r[0]}return r[0]}(Ea(O,i,!1,[1,1]),n,l,T),z||(R(),z=!0);const s=bs(e,{handle:E,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:a?"target":"source",isValidConnection:y,doc:C,lib:c,flowId:u,nodeLookup:l});$=s.handleDomNode,D=s.connection,I=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!E,s.isValid);const d={...V,isValid:I,to:s.toHandle&&I?_a({x:s.toHandle.x,y:s.toHandle.y},i):O,toHandle:s.toHandle,toPosition:I&&s.toHandle?s.toHandle.position:ea[T.position],toNode:s.toHandle?l.get(s.toHandle.nodeId):null};I&&E&&V.toHandle&&d.toHandle&&V.toHandle.type===d.toHandle.type&&V.toHandle.nodeId===d.toHandle.nodeId&&V.toHandle.id===d.toHandle.id&&V.to.x===d.to.x&&V.to.y===d.to.y||(b(d),V=d)}function F(e){(E||$)&&D&&I&&p?.(D);const{inProgress:t,...n}=V,o={...n,toPosition:V.toHandle?V.toPosition:null};m?.(e,o),i&&v?.(e,o),f(),cancelAnimationFrame(_),z=!1,I=!1,D=null,$=null,C.removeEventListener("mousemove",H),C.removeEventListener("mouseup",F),C.removeEventListener("touchmove",H),C.removeEventListener("touchend",F)}g?.(e,{nodeId:r,handleId:o,handleType:A}),C.addEventListener("mousemove",H),C.addEventListener("mouseup",F),C.addEventListener("touchmove",H),C.addEventListener("touchend",F)},isValid:bs},ws=e=>({x:e.x,y:e.y,zoom:e.k}),Ss=({x:e,y:t,zoom:n})=>zi.translate(e,t).scale(n),Cs=(e,t)=>e.target.closest(`.${t}`),Es=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),_s=(e,t=0,n=()=>{})=>{const o="number"==typeof t&&t>0;return o||n(),o?e.transition().duration(t).on("end",n):e},ks=e=>{const t=e.ctrlKey&&Ma()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};var Ns;function Ms(e,t){return Math.max(0,t-e)}function As(e,t){return Math.max(0,e-t)}function Ps(e,t,n){return Math.max(0,t-e,e-n)}function js(e,t){return e?!t:t}!function(e){e.Line="line",e.Handle="handle"}(Ns||(Ns={}));const Os={width:0,height:0,x:0,y:0},zs={...Os,pointerX:0,pointerY:0,aspectRatio:1};function Ds(e,t,n){const o=t.position.x+e.position.x,r=t.position.y+e.position.y,i=e.measured.width??0,a=e.measured.height??0,s=n[0]*i,l=n[1]*a;return[[o-s,r-l],[o+i-s,r+a-l]]}var Is,$s,Rs,Ts={exports:{}},Ls={},Bs={exports:{}},Vs={};Ts.exports=function(){if(Rs)return Ls;Rs=1;var e=r,t=($s||($s=1,Bs.exports=function(){if(Is)return Vs;Is=1;var e=r,t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useState,o=e.useEffect,i=e.useLayoutEffect,a=e.useDebugValue;function s(e){var n=e.getSnapshot;e=e.value;try{var o=n();return!t(e,o)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),l=n({inst:{value:r,getSnapshot:t}}),c=l[0].inst,d=l[1];return i((function(){c.value=r,c.getSnapshot=t,s(c)&&d({inst:c})}),[e,r,t]),o((function(){return s(c)&&d({inst:c}),e((function(){s(c)&&d({inst:c})}))}),[e]),a(r),r};return Vs.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:l,Vs}()),Bs.exports),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=t.useSyncExternalStore,i=e.useRef,a=e.useEffect,s=e.useMemo,l=e.useDebugValue;return Ls.useSyncExternalStoreWithSelector=function(e,t,r,c,d){var u=i(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=s((function(){function e(e){if(!a){if(a=!0,o=e,e=c(e),void 0!==d&&h.hasValue){var t=h.value;if(d(t,e))return i=t}return i=e}if(t=i,n(o,e))return t;var r=c(e);return void 0!==d&&d(t,r)?(o=e,t):(o=e,i=r)}var o,i,a=!1,s=void 0===r?null:r;return[function(){return e(t())},null===s?void 0:function(){return e(s())}]}),[t,r,c,d]);var f=o(e,u[0],u[1]);return a((function(){h.hasValue=!0,h.value=f}),[f]),l(f),f},Ls}();var Hs=Ne(Ts.exports);const Fs=e=>{let t;const n=new Set,o=(e,o)=>{const r="function"==typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=o?o:"object"!=typeof r||null===r)?r:Object.assign({},t,r),n.forEach((n=>n(t,e)))}},r=()=>t,i={setState:o,getState:r,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(o,r,i);return i},{useDebugValue:Ys}=r,{useSyncExternalStoreWithSelector:Xs}=Hs,Zs=e=>e;function Ws(e,t=Zs,n){const o=Xs(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Ys(o),o}const qs=(e,t)=>{const n=(e=>e?Fs(e):Fs)(e),o=(e,o=t)=>Ws(n,e,o);return Object.assign(o,n),o};function Ks(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,o]of e)if(!Object.is(o,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}const Us=(0,r.createContext)(null),Gs=Us.Provider,Qs="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001";function Js(e,t){const n=(0,r.useContext)(Us);if(null===n)throw new Error(Qs);return Ws(n,e,t)}function el(){const e=(0,r.useContext)(Us);if(null===e)throw new Error(Qs);return(0,r.useMemo)((()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe})),[e])}const tl={display:"none"},nl={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ol="react-flow__node-desc",rl="react-flow__edge-desc",il=e=>e.ariaLiveMessage;function al({rfId:e}){const t=Js(il);return(0,o.jsx)("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:nl,children:t})}function sl({rfId:e,disableKeyboardA11y:t}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{id:`${ol}-${e}`,style:tl,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),(0,o.jsx)("div",{id:`${rl}-${e}`,style:tl,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&(0,o.jsx)(al,{rfId:e})]})}const ll=e=>e.userSelectionActive?"none":"all",cl=(0,r.forwardRef)((({position:e="top-left",children:t,className:n,style:r,...i},a)=>{const s=Js(ll),l=`${e}`.split("-");return(0,o.jsx)("div",{className:an(["react-flow__panel",n,...l]),style:{...r,pointerEvents:s},ref:a,...i,children:t})}));function dl({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:(0,o.jsx)(cl,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,o.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}cl.displayName="Panel";const ul=e=>{const t=[],n=[];for(const[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(const[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},hl=e=>e.id;function fl(e,t){return Ks(e.selectedNodes.map(hl),t.selectedNodes.map(hl))&&Ks(e.selectedEdges.map(hl),t.selectedEdges.map(hl))}function gl({onSelectionChange:e}){const t=el(),{selectedNodes:n,selectedEdges:o}=Js(ul,fl);return(0,r.useEffect)((()=>{const r={nodes:n,edges:o};e?.(r),t.getState().onSelectionChangeHandlers.forEach((e=>e(r)))}),[n,o,e]),null}const pl=e=>!!e.onSelectionChangeHandlers;function ml({onSelectionChange:e}){const t=Js(pl);return e||t?(0,o.jsx)(gl,{onSelectionChange:e}):null}const yl=[0,0],vl={x:0,y:0,zoom:1},bl=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","rfId"],xl=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),wl={translateExtent:Yi,nodeOrigin:yl,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Sl(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:i,setTranslateExtent:a,setNodeExtent:s,reset:l,setDefaultNodesAndEdges:c,setPaneClickDistance:d}=Js(xl,Ks),u=el();(0,r.useEffect)((()=>(c(e.defaultNodes,e.defaultEdges),()=>{h.current=wl,l()})),[]);const h=(0,r.useRef)(wl);return(0,r.useEffect)((()=>{for(const r of bl){const l=e[r];l!==h.current[r]&&void 0!==e[r]&&("nodes"===r?t(l):"edges"===r?n(l):"minZoom"===r?o(l):"maxZoom"===r?i(l):"translateExtent"===r?a(l):"nodeExtent"===r?s(l):"paneClickDistance"===r?d(l):"fitView"===r?u.setState({fitViewQueued:l}):"fitViewOptions"===r?u.setState({fitViewOptions:l}):u.setState({[r]:l}))}h.current=e}),bl.map((t=>e[t]))),null}function Cl(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const El="undefined"!=typeof document?document:null;function _l(e=null,t={target:El,actInsideInputWithModifier:!0}){const[n,o]=(0,r.useState)(!1),i=(0,r.useRef)(!1),a=(0,r.useRef)(new Set([])),[s,l]=(0,r.useMemo)((()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter((e=>"string"==typeof e)).map((e=>e.replace("+","\n").replace("\n\n","\n+").split("\n"))),n=t.reduce(((e,t)=>e.concat(...t)),[]);return[t,n]}return[[],[]]}),[e]);return(0,r.useEffect)((()=>{const n=t?.target??El,r=t?.actInsideInputWithModifier??!0;if(null!==e){const e=e=>{if(i.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey,(!i.current||i.current&&!r)&&Ta(e))return!1;const n=Nl(e.code,l);if(a.current.add(e[n]),kl(s,a.current,!1)){const n=e.composedPath?.()?.[0]||e.target,r="BUTTON"===n?.nodeName||"A"===n?.nodeName;!1===t.preventDefault||!i.current&&r||e.preventDefault(),o(!0)}},c=e=>{const t=Nl(e.code,l);kl(s,a.current,!0)?(o(!1),a.current.clear()):a.current.delete(e[t]),"Meta"===e.key&&a.current.clear(),i.current=!1},d=()=>{a.current.clear(),o(!1)};return n?.addEventListener("keydown",e),n?.addEventListener("keyup",c),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{n?.removeEventListener("keydown",e),n?.removeEventListener("keyup",c),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}}),[e,o]),n}function kl(e,t,n){return e.filter((e=>n||e.length===t.size)).some((e=>e.every((e=>t.has(e)))))}function Nl(e,t){return t.includes(e)?"code":"key"}function Ml(e,t){const n=[],o=new Map,r=[];for(const t of e)if("add"!==t.type)if("remove"===t.type||"replace"===t.type)o.set(t.id,[t]);else{const e=o.get(t.id);e?e.push(t):o.set(t.id,[t])}else r.push(t);for(const e of t){const t=o.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}const r={...e};for(const e of t)Al(e,r);n.push(r)}return r.length&&r.forEach((e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})})),n}function Al(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":void 0!==e.position&&(t.position=e.position),void 0!==e.dragging&&(t.dragging=e.dragging);break;case"dimensions":void 0!==e.dimensions&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(!0!==e.setAttributes&&"width"!==e.setAttributes||(t.width=e.dimensions.width),!0!==e.setAttributes&&"height"!==e.setAttributes||(t.height=e.dimensions.height))),"boolean"==typeof e.resizing&&(t.resizing=e.resizing)}}function Pl(e,t){return Ml(e,t)}function jl(e,t){return Ml(e,t)}function Ol(e,t){return{id:e,type:"select",selected:t}}function zl(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const e=t.has(r);void 0===i.selected&&!e||i.selected===e||(n&&(i.selected=e),o.push(Ol(i.id,e)))}return o}function Dl({items:e=[],lookup:t}){const n=[],o=new Map(e.map((e=>[e.id,e])));for(const[o,r]of e.entries()){const e=t.get(r.id),i=e?.internals?.userNode??e;void 0!==i&&i!==r&&n.push({id:r.id,item:r,type:"replace"}),void 0===i&&n.push({item:r,type:"add",index:o})}for(const[e]of t)void 0===o.get(e)&&n.push({id:e,type:"remove"});return n}function Il(e){return{id:e.id,type:"remove"}}const $l=e=>(e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e))(e);function Rl(e){return(0,r.forwardRef)(e)}const Tl="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function Ll(e){const[t,n]=(0,r.useState)(BigInt(0)),[o]=(0,r.useState)((()=>function(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}((()=>n((e=>e+BigInt(1)))))));return Tl((()=>{const t=o.get();t.length&&(e(t),o.reset())}),[t]),o}const Bl=(0,r.createContext)(null);function Vl({children:e}){const t=el(),n=Ll((0,r.useCallback)((e=>{const{nodes:n=[],setNodes:o,hasDefaultNodes:r,onNodesChange:i,nodeLookup:a,fitViewQueued:s}=t.getState();let l=n;for(const t of e)l="function"==typeof t?t(l):t;const c=Dl({items:l,lookup:a});r&&o(l),c.length>0?i?.(c):s&&window.requestAnimationFrame((()=>{const{fitViewQueued:e,nodes:n,setNodes:o}=t.getState();e&&o(n)}))}),[])),i=Ll((0,r.useCallback)((e=>{const{edges:n=[],setEdges:o,hasDefaultEdges:r,onEdgesChange:i,edgeLookup:a}=t.getState();let s=n;for(const t of e)s="function"==typeof t?t(s):t;r?o(s):i&&i(Dl({items:s,lookup:a}))}),[])),a=(0,r.useMemo)((()=>({nodeQueue:n,edgeQueue:i})),[]);return(0,o.jsx)(Bl.Provider,{value:a,children:e})}const Hl=e=>!!e.panZoom;function Fl(){const e=(()=>{const e=el();return(0,r.useMemo)((()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,r,i],panZoom:a}=e.getState();return a?(await a.setViewport({x:t.x??o,y:t.y??r,zoom:t.zoom??i},{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},setCenter:async(t,n,o)=>{const{width:r,height:i,maxZoom:a,panZoom:s}=e.getState(),l=void 0!==o?.zoom?o.zoom:a,c=r/2-t*l,d=i/2-n*l;return s?(await s.setViewport({x:c,y:d,zoom:l},{duration:o?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:o,height:r,minZoom:i,maxZoom:a,panZoom:s}=e.getState(),l=Na(t,o,r,i,a,n?.padding??.1);return s?(await s.setViewport(l,{duration:n?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:o,snapGrid:r,snapToGrid:i,domNode:a}=e.getState();if(!a)return t;const{x:s,y:l}=a.getBoundingClientRect(),c={x:t.x-s,y:t.y-l},d=n.snapGrid??r,u=n.snapToGrid??i;return Ea(c,o,u,d)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:r,y:i}=o.getBoundingClientRect(),a=_a(t,n);return{x:a.x+r,y:a.y+i}}})),[])})(),t=el(),n=function(){const e=(0,r.useContext)(Bl);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),o=Js(Hl),i=(0,r.useMemo)((()=>{const e=e=>t.getState().nodeLookup.get(e),o=e=>{n.nodeQueue.push(e)},r=e=>{n.edgeQueue.push(e)},i=e=>{const{nodeLookup:n,nodeOrigin:o}=t.getState(),r=$l(e)?e:n.get(e.id),i=r.parentId?Oa(r.position,r.measured,r.parentId,n,o):r.position,a={...r,position:i,width:r.measured?.width??r.width,height:r.measured?.height??r.height};return ma(a)},a=(e,t,n={replace:!1})=>{o((o=>o.map((o=>{if(o.id===e){const e="function"==typeof t?t(o):t;return n.replace&&$l(e)?e:{...o,...e}}return o}))))},s=(e,t,n={replace:!1})=>{r((o=>o.map((o=>{if(o.id===e){const e="function"==typeof t?t(o):t;return n.replace&&na(e)?e:{...o,...e}}return o}))))};return{getNodes:()=>t.getState().nodes.map((e=>({...e}))),getNode:t=>e(t)?.internals.userNode,getInternalNode:e,getEdges:()=>{const{edges:e=[]}=t.getState();return e.map((e=>({...e})))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:o,setEdges:r,addNodes:e=>{const t=Array.isArray(e)?e:[e];n.nodeQueue.push((e=>[...e,...t]))},addEdges:e=>{const t=Array.isArray(e)?e:[e];n.edgeQueue.push((e=>[...e,...t]))},toObject:()=>{const{nodes:e=[],edges:n=[],transform:o}=t.getState(),[r,i,a]=o;return{nodes:e.map((e=>({...e}))),edges:n.map((e=>({...e}))),viewport:{x:r,y:i,zoom:a}}},deleteElements:async({nodes:e=[],edges:n=[]})=>{const{nodes:o,edges:r,onNodesDelete:i,onEdgesDelete:a,triggerNodeChanges:s,triggerEdgeChanges:l,onDelete:c,onBeforeDelete:d}=t.getState(),{nodes:u,edges:h}=await async function({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){const i=new Set(e.map((e=>e.id))),a=[];for(const e of n){if(!1===e.deletable)continue;const t=i.has(e.id),n=!t&&e.parentId&&a.find((t=>t.id===e.parentId));(t||n)&&a.push(e)}const s=new Set(t.map((e=>e.id))),l=o.filter((e=>!1!==e.deletable)),c=((e,t)=>{const n=new Set;return e.forEach((e=>{n.add(e.id)})),t.filter((e=>n.has(e.source)||n.has(e.target)))})(a,l),d=c;for(const e of l)s.has(e.id)&&!d.find((t=>t.id===e.id))&&d.push(e);if(!r)return{edges:d,nodes:a};const u=await r({nodes:a,edges:d});return"boolean"==typeof u?u?{edges:d,nodes:a}:{edges:[],nodes:[]}:u}({nodesToRemove:e,edgesToRemove:n,nodes:o,edges:r,onBeforeDelete:d}),f=h.length>0,g=u.length>0;if(f){const e=h.map(Il);a?.(h),l(e)}if(g){const e=u.map(Il);i?.(u),s(e)}return(g||f)&&c?.({nodes:u,edges:h}),{deletedNodes:u,deletedEdges:h}},getIntersectingNodes:(e,n=!0,o)=>{const r=xa(e),a=r?e:i(e),s=void 0!==o;return a?(o||t.getState().nodes).filter((o=>{const i=t.getState().nodeLookup.get(o.id);if(i&&!r&&(o.id===e.id||!i.internals.positionAbsolute))return!1;const l=ma(s?o:i),c=ba(l,a);return n&&c>0||c>=a.width*a.height})):[]},isNodeIntersecting:(e,t,n=!0)=>{const o=xa(e)?e:i(e);if(!o)return!1;const r=ba(o,t);return n&&r>0||r>=o.width*o.height},updateNode:a,updateNodeData:(e,t,n={replace:!1})=>{a(e,(e=>{const o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}}),n)},updateEdge:s,updateEdgeData:(e,t,n={replace:!1})=>{s(e,(e=>{const o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}}),n)},getNodesBounds:e=>{const{nodeLookup:n,nodeOrigin:o}=t.getState();return((e,t={nodeOrigin:[0,0]})=>{if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce(((e,n)=>{const o="string"==typeof n;let r=t.nodeLookup||o?void 0:n;t.nodeLookup&&(r=o?t.nodeLookup.get(n):oa(n)?n:t.nodeLookup.get(n.id));const i=r?ya(r,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return fa(e,i)}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return pa(n)})(e,{nodeLookup:n,nodeOrigin:o})},getHandleConnections:({type:e,id:n,nodeId:o})=>Array.from(t.getState().connectionLookup.get(`${o}-${e}${n?`-${n}`:""}`)?.values()??[]),getNodeConnections:({type:e,handleId:n,nodeId:o})=>Array.from(t.getState().connectionLookup.get(`${o}${e?n?`-${e}-${n}`:`-${e}`:""}`)?.values()??[]),fitView:async e=>{const o=t.getState().fitViewResolver??function(){let e,t;return{promise:new Promise(((n,o)=>{e=n,t=o})),resolve:e,reject:t}}();return t.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:o}),n.nodeQueue.push((e=>[...e])),o.promise}}}),[]);return(0,r.useMemo)((()=>({...i,...e,viewportInitialized:o})),[o])}const Yl=e=>e.selected,Xl="undefined"!=typeof window?window:void 0,Zl={position:"absolute",width:"100%",height:"100%",top:0,left:0},Wl=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function ql({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:s=Wi.Free,zoomOnDoubleClick:l=!0,panOnDrag:c=!0,defaultViewport:d,translateExtent:u,minZoom:h,maxZoom:f,zoomActivationKeyCode:g,preventScrolling:p=!0,children:m,noWheelClassName:y,noPanClassName:v,onViewportChange:b,isControlledViewport:x,paneClickDistance:w}){const S=el(),C=(0,r.useRef)(null),{userSelectionActive:E,lib:_}=Js(Wl,Ks),k=_l(g),N=(0,r.useRef)();!function(e){const t=el();(0,r.useEffect)((()=>{const n=()=>{if(!e.current)return!1;const n=Ia(e.current);0!==n.height&&0!==n.width||t.getState().onError?.("004","The React Flow parent container needs a width and a height to render the graph."),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);const t=new ResizeObserver((()=>n()));return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}}),[])}(C);const M=(0,r.useCallback)((e=>{b?.({x:e[0],y:e[1],zoom:e[2]}),x||S.setState({transform:e})}),[b,x]);return(0,r.useEffect)((()=>{if(C.current){N.current=function({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:i,onPanZoom:a,onPanZoomStart:s,onPanZoomEnd:l,onDraggingChange:c}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},u=e.getBoundingClientRect(),h=Fi().clickDistance(!wa(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(r),f=Eo(e).call(h);v({x:i.x,y:i.y,zoom:la(i.zoom,t,n)},[[0,0],[u.width,u.height]],r);const g=f.on("wheel.zoom"),p=f.on("dblclick.zoom");function m(e,t){return f?new Promise((n=>{h?.transform(_s(f,t?.duration,(()=>n(!0))),e)})):Promise.resolve(!1)}function y(){h.on("zoom",null)}async function v(e,t,n){const o=Ss(e),r=h?.constrain()(o,t,n);return r&&await m(r),new Promise((e=>e(r)))}return h.wheelDelta(ks),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:o,panOnScroll:r,panOnDrag:i,panOnScrollMode:u,panOnScrollSpeed:m,preventScrolling:v,zoomOnPinch:b,zoomOnScroll:x,zoomOnDoubleClick:w,zoomActivationKeyPressed:S,lib:C,onTransformChange:E}){o&&!d.isZoomingOrPanning&&y();const _=!r||S||o?function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,r){const i="wheel"===o.type,a=!t&&i&&!o.ctrlKey,s=Cs(o,e);if(o.ctrlKey&&i&&s&&o.preventDefault(),a||s)return null;o.preventDefault(),n.call(this,o,r)}}({noWheelClassName:e,preventScrolling:v,d3ZoomHandler:g}):function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:i,zoomOnPinch:a,onPanZoomStart:s,onPanZoom:l,onPanZoomEnd:c}){return d=>{if(Cs(d,t))return!1;d.preventDefault(),d.stopImmediatePropagation();const u=n.property("__zoom").k||1;if(d.ctrlKey&&a){const e=_o(d),t=ks(d),r=u*Math.pow(2,t);return void o.scaleTo(n,r,e,d)}const h=1===d.deltaMode?20:1;let f=r===Wi.Vertical?0:d.deltaX*h,g=r===Wi.Horizontal?0:d.deltaY*h;!Ma()&&d.shiftKey&&r!==Wi.Vertical&&(f=d.deltaY*h,g=0),o.translateBy(n,-f/u*i,-g/u*i,{internal:!0});const p=ws(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s?.(d,p)),e.isPanScrolling&&(l?.(d,p),e.panScrollTimeout=setTimeout((()=>{c?.(d,p),e.isPanScrolling=!1}),150))}}({zoomPanValues:d,noWheelClassName:e,d3Selection:f,d3Zoom:h,panOnScrollMode:u,panOnScrollSpeed:m,zoomOnPinch:b,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:l});if(f.on("wheel.zoom",_,{passive:!1}),!o){const e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{if(o.sourceEvent?.internal)return;const r=ws(o.transform);e.mouseButton=o.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=r,"mousedown"===o.sourceEvent?.type&&t(!0),n&&n?.(o.sourceEvent,r)}}({zoomPanValues:d,onDraggingChange:c,onPanZoomStart:s});h.on("start",e);const t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return i=>{e.usedRightMouseButton=!(!n||!Es(t,e.mouseButton??0)),i.sourceEvent?.sync||o([i.transform.x,i.transform.y,i.transform.k]),r&&!i.sourceEvent?.internal&&r?.(i.sourceEvent,ws(i.transform))}}({zoomPanValues:d,panOnDrag:i,onPaneContextMenu:!!n,onPanZoom:a,onTransformChange:E});h.on("zoom",t);const o=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:i}){return a=>{var s,l;if(!a.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,i&&Es(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&i(a.sourceEvent),e.usedRightMouseButton=!1,o(!1),r&&(s=e.prevViewport,l=a.transform,s.x!==l.x||s.y!==l.y||s.zoom!==l.k))){const t=ws(a.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout((()=>{r?.(a.sourceEvent,t)}),n?150:0)}}}({zoomPanValues:d,panOnDrag:i,panOnScroll:r,onPaneContextMenu:n,onPanZoomEnd:l,onDraggingChange:c});h.on("end",o)}const k=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:i,userSelectionActive:a,noWheelClassName:s,noPanClassName:l,lib:c}){return d=>{const u=e||t,h=n&&d.ctrlKey;if(1===d.button&&"mousedown"===d.type&&(Cs(d,`${c}-flow__node`)||Cs(d,`${c}-flow__edge`)))return!0;if(!(o||u||r||i||n))return!1;if(a)return!1;if(Cs(d,s)&&"wheel"===d.type)return!1;if(Cs(d,l)&&("wheel"!==d.type||r&&"wheel"===d.type&&!e))return!1;if(!n&&d.ctrlKey&&"wheel"===d.type)return!1;if(!n&&"touchstart"===d.type&&d.touches?.length>1)return d.preventDefault(),!1;if(!u&&!r&&!h&&"wheel"===d.type)return!1;if(!o&&("mousedown"===d.type||"touchstart"===d.type))return!1;if(Array.isArray(o)&&!o.includes(d.button)&&"mousedown"===d.type)return!1;const f=Array.isArray(o)&&o.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||"wheel"===d.type)&&f}}({zoomActivationKeyPressed:S,panOnDrag:i,zoomOnScroll:x,panOnScroll:r,zoomOnDoubleClick:w,zoomOnPinch:b,userSelectionActive:o,noPanClassName:t,noWheelClassName:e,lib:C});h.filter(k),w?f.on("dblclick.zoom",p):f.on("dblclick.zoom",null)},destroy:y,setViewport:async function(e,t){const n=Ss(e);return await m(n,t),new Promise((e=>e(n)))},setViewportConstrained:v,getViewport:function(){const e=f?Di(f.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return f?new Promise((n=>{h?.scaleTo(_s(f,t?.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},scaleBy:function(e,t){return f?new Promise((n=>{h?.scaleBy(_s(f,t?.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},setScaleExtent:function(e){h?.scaleExtent(e)},setTranslateExtent:function(e){h?.translateExtent(e)},syncViewport:function(e){if(f){const t=Ss(e),n=f.property("__zoom");n.k===e.zoom&&n.x===e.x&&n.y===e.y||h?.transform(f,t,null,{sync:!0})}},setClickDistance:function(e){const t=!wa(e)||e<0?0:e;h?.clickDistance(t)}}}({domNode:C.current,minZoom:h,maxZoom:f,translateExtent:u,viewport:d,paneClickDistance:w,onDraggingChange:e=>S.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{const{onViewportChangeStart:n,onMoveStart:o}=S.getState();o?.(e,t),n?.(t)},onPanZoom:(e,t)=>{const{onViewportChange:n,onMove:o}=S.getState();o?.(e,t),n?.(t)},onPanZoomEnd:(e,t)=>{const{onViewportChangeEnd:n,onMoveEnd:o}=S.getState();o?.(e,t),n?.(t)}});const{x:e,y:t,zoom:n}=N.current.getViewport();return S.setState({panZoom:N.current,transform:[e,t,n],domNode:C.current.closest(".react-flow")}),()=>{N.current?.destroy()}}}),[]),(0,r.useEffect)((()=>{N.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:i,panOnScrollSpeed:a,panOnScrollMode:s,zoomOnDoubleClick:l,panOnDrag:c,zoomActivationKeyPressed:k,preventScrolling:p,noPanClassName:v,userSelectionActive:E,noWheelClassName:y,lib:_,onTransformChange:M})}),[e,t,n,i,a,s,l,c,k,p,v,E,y,_,M]),(0,o.jsx)("div",{className:"react-flow__renderer",ref:C,style:Zl,children:m})}const Kl=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Ul(){const{userSelectionActive:e,userSelectionRect:t}=Js(Kl,Ks);return e&&t?(0,o.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Gl=(e,t)=>n=>{n.target===t.current&&e?.(n)},Ql=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Jl({isSelecting:e,selectionKeyPressed:t,selectionMode:n=qi.Full,panOnDrag:i,selectionOnDrag:a,onSelectionStart:s,onSelectionEnd:l,onPaneClick:c,onPaneContextMenu:d,onPaneScroll:u,onPaneMouseEnter:h,onPaneMouseMove:f,onPaneMouseLeave:g,children:p}){const m=el(),{userSelectionActive:y,elementsSelectable:v,dragging:b,connectionInProgress:x}=Js(Ql,Ks),w=v&&(e||y),S=(0,r.useRef)(null),C=(0,r.useRef)(),E=(0,r.useRef)(new Set),_=(0,r.useRef)(new Set),k=(0,r.useRef)(!1),N=(0,r.useRef)(!1),M=e=>{k.current||x?k.current=!1:(c?.(e),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1}))},A=u?e=>u(e):void 0,P=!0===i||Array.isArray(i)&&i.includes(0);return(0,o.jsxs)("div",{className:an(["react-flow__pane",{draggable:P,dragging:b,selection:e}]),onClick:w?void 0:Gl(M,S),onContextMenu:Gl((e=>{Array.isArray(i)&&i?.includes(2)?e.preventDefault():d?.(e)}),S),onWheel:Gl(A,S),onPointerEnter:w?void 0:h,onPointerDown:w?t=>{const{resetSelectedElements:n,domNode:o}=m.getState();if(C.current=o?.getBoundingClientRect(),!v||!e||0!==t.button||t.target!==S.current||!C.current)return;t.target?.setPointerCapture?.(t.pointerId),N.current=!0,k.current=!1;const{x:r,y:i}=Ba(t.nativeEvent,C.current);n(),m.setState({userSelectionRect:{width:0,height:0,startX:r,startY:i,x:r,y:i}}),s?.(t)}:f,onPointerMove:w?e=>{const{userSelectionRect:t,transform:o,nodeLookup:r,edgeLookup:i,connectionLookup:a,triggerNodeChanges:s,triggerEdgeChanges:l,defaultEdgeOptions:c}=m.getState();if(!C.current||!t)return;k.current=!0;const{x:d,y:u}=Ba(e.nativeEvent,C.current),{startX:h,startY:f}=t,g={startX:h,startY:f,x:d<h?d:h,y:u<f?u:f,width:Math.abs(d-h),height:Math.abs(u-f)},p=E.current,y=_.current;E.current=new Set(aa(r,g,o,n===qi.Partial,!0).map((e=>e.id))),_.current=new Set;const v=c?.selectable??!0;for(const e of E.current){const t=a.get(e);if(t)for(const{edgeId:e}of t.values()){const t=i.get(e);t&&(t.selectable??v)&&_.current.add(e)}}za(p,E.current)||s(zl(r,E.current,!0)),za(y,_.current)||l(zl(i,_.current)),m.setState({userSelectionRect:g,userSelectionActive:!0,nodesSelectionActive:!1})}:f,onPointerUp:w?e=>{if(0!==e.button||!N.current)return;e.target?.releasePointerCapture?.(e.pointerId);const{userSelectionRect:n}=m.getState();!y&&n&&e.target===S.current&&M?.(e),m.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:E.current.size>0}),l?.(e),(t||a)&&(k.current=!1),N.current=!1}:void 0,onPointerLeave:g,ref:S,style:Zl,children:[p,(0,o.jsx)(Ul,{})]})}function ec({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:a,nodeLookup:s,onError:l}=t.getState(),c=s.get(e);c?(t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&a)&&(i({nodes:[c],edges:[]}),requestAnimationFrame((()=>o?.current?.blur()))):r([e])):l?.("012",(e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`)(e))}function tc({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:i,isSelectable:a,nodeClickDistance:s}){const l=el(),[c,d]=(0,r.useState)(!1),u=(0,r.useRef)();return(0,r.useEffect)((()=>{u.current=function({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let i={x:null,y:null},a=0,s=new Map,l=!1,c={x:0,y:0},d=null,u=!1,h=null,f=!1;return{update:function({noDragClassName:g,handleSelector:p,domNode:m,isSelectable:y,nodeId:v,nodeClickDistance:b=0}){function x({x:e,y:n},r){const{nodeLookup:a,nodeExtent:l,snapGrid:c,snapToGrid:d,nodeOrigin:u,onNodeDrag:h,onSelectionDrag:f,onError:g,updateNodePositions:p}=t();i={x:e,y:n};let m=!1,y={x:0,y:0,x2:0,y2:0};if(s.size>1&&l){const e=ia(s);y=ga(e)}for(const[t,o]of s){if(!a.has(t))continue;let r={x:e-o.distance.x,y:n-o.distance.y};d&&(r=Ca(r,c));let i=[[l[0][0],l[0][1]],[l[1][0],l[1][1]]];if(s.size>1&&l&&!o.extent){const{positionAbsolute:e}=o.internals,t=e.x-y.x+l[0][0],n=e.x+o.measured.width-y.x2+l[1][0];i=[[t,e.y-y.y+l[0][1]],[n,e.y+o.measured.height-y.y2+l[1][1]]]}const{position:h,positionAbsolute:f}=sa({nodeId:t,nextPosition:r,nodeLookup:a,nodeExtent:i,nodeOrigin:u,onError:g});m=m||o.position.x!==h.x||o.position.y!==h.y,o.position=h,o.internals.positionAbsolute=f}if(m&&(p(s,!0),r&&(o||h||!v&&f))){const[e,t]=ps({nodeId:v,dragItems:s,nodeLookup:a});o?.(r,s,e,t),h?.(r,e,t),v||f?.(r,t)}}async function w(){if(!d)return;const{transform:e,panBy:n,autoPanSpeed:o,autoPanOnNodeDrag:r}=t();if(!r)return l=!1,void cancelAnimationFrame(a);const[s,u]=ha(c,d,o);0===s&&0===u||(i.x=(i.x??0)-s/e[2],i.y=(i.y??0)-u/e[2],await n({x:s,y:u})&&x(i,null)),a=requestAnimationFrame(w)}function S(o){const{nodeLookup:r,multiSelectionActive:a,nodesDraggable:l,transform:c,snapGrid:h,snapToGrid:f,selectNodesOnDrag:g,onNodeDragStart:p,onSelectionDragStart:m,unselectNodesAndEdges:b}=t();u=!0,g&&y||a||!v||r.get(v)?.selected||b(),y&&g&&v&&e?.(v);const x=Da(o.sourceEvent,{transform:c,snapGrid:h,snapToGrid:f,containerBounds:d});if(i=x,s=function(e,t,n,o){const r=new Map;for(const[i,a]of e)if((a.selected||a.id===o)&&(!a.parentId||!fs(a,e))&&(a.draggable||t&&void 0===a.draggable)){const t=e.get(i);t&&r.set(i,{id:i,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return r}(r,l,x,v),s.size>0&&(n||p||!v&&m)){const[e,t]=ps({nodeId:v,dragItems:s,nodeLookup:r});n?.(o.sourceEvent,s,e,t),p?.(o.sourceEvent,e,t),v||m?.(o.sourceEvent,t)}}h=Eo(m);const C=To().clickDistance(b).on("start",(e=>{const{domNode:n,nodeDragThreshold:o,transform:r,snapGrid:a,snapToGrid:s}=t();d=n?.getBoundingClientRect()||null,f=!1,0===o&&S(e);const l=Da(e.sourceEvent,{transform:r,snapGrid:a,snapToGrid:s,containerBounds:d});i=l,c=Ba(e.sourceEvent,d)})).on("drag",(e=>{const{autoPanOnNodeDrag:n,transform:o,snapGrid:r,snapToGrid:a,nodeDragThreshold:h,nodeLookup:g}=t(),p=Da(e.sourceEvent,{transform:o,snapGrid:r,snapToGrid:a,containerBounds:d});if(("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||v&&!g.has(v))&&(f=!0),!f){if(!l&&n&&u&&(l=!0,w()),!u){const t=p.xSnapped-(i.x??0),n=p.ySnapped-(i.y??0);Math.sqrt(t*t+n*n)>h&&S(e)}(i.x!==p.xSnapped||i.y!==p.ySnapped)&&s&&u&&(c=Ba(e.sourceEvent,d),x(p,e.sourceEvent))}})).on("end",(e=>{if(u&&!f&&(l=!1,u=!1,cancelAnimationFrame(a),s.size>0)){const{nodeLookup:n,updateNodePositions:o,onNodeDragStop:i,onSelectionDragStop:a}=t();if(o(s,!1),r||i||!v&&a){const[t,o]=ps({nodeId:v,dragItems:s,nodeLookup:n,dragging:!1});r?.(e.sourceEvent,s,t,o),i?.(e.sourceEvent,t,o),v||a?.(e.sourceEvent,o)}}})).filter((e=>{const t=e.target;return!e.button&&(!g||!gs(t,`.${g}`,m))&&(!p||gs(t,p,m))}));h.call(C)},destroy:function(){h?.on(".drag",null)}}}({getStoreItems:()=>l.getState(),onNodeMouseDown:t=>{ec({id:t,store:l,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})}),[]),(0,r.useEffect)((()=>{if(t)u.current?.destroy();else if(e.current)return u.current?.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:a,nodeId:i,nodeClickDistance:s}),()=>{u.current?.destroy()}}),[n,o,t,a,e,i]),c}function nc(){const e=el();return(0,r.useCallback)((t=>{const{nodeExtent:n,snapToGrid:o,snapGrid:r,nodesDraggable:i,onError:a,updateNodePositions:s,nodeLookup:l,nodeOrigin:c}=e.getState(),d=new Map,u=(e=>t=>t.selected&&(t.draggable||e&&void 0===t.draggable))(i),h=o?r[0]:5,f=o?r[1]:5,g=t.direction.x*h*t.factor,p=t.direction.y*f*t.factor;for(const[,e]of l){if(!u(e))continue;let t={x:e.internals.positionAbsolute.x+g,y:e.internals.positionAbsolute.y+p};o&&(t=Ca(t,r));const{position:i,positionAbsolute:s}=sa({nodeId:e.id,nextPosition:t,nodeLookup:l,nodeExtent:n,nodeOrigin:c,onError:a});e.position=i,e.internals.positionAbsolute=s,d.set(e.id,e)}s(d)}),[])}const oc=(0,r.createContext)(null),rc=oc.Provider;oc.Consumer;const ic=()=>(0,r.useContext)(oc),ac=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),sc=(0,r.memo)(Rl((function({type:e="source",position:t=Ji.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:a=!0,id:s,onConnect:l,children:c,className:d,onMouseDown:u,onTouchStart:h,...f},g){const p=s||null,m="target"===e,y=el(),v=ic(),{connectOnClick:b,noPanClassName:x,rfId:w}=Js(ac,Ks),{connectingFrom:S,connectingTo:C,clickConnecting:E,isPossibleEndHandle:_,connectionInProcess:k,clickConnectionInProcess:N,valid:M}=Js(((e,t,n)=>o=>{const{connectionClickStartHandle:r,connectionMode:i,connection:a}=o,{fromHandle:s,toHandle:l,isValid:c}=a,d=l?.nodeId===e&&l?.id===t&&l?.type===n;return{connectingFrom:s?.nodeId===e&&s?.id===t&&s?.type===n,connectingTo:d,clickConnecting:r?.nodeId===e&&r?.id===t&&r?.type===n,isPossibleEndHandle:i===Zi.Strict?s?.type!==n:e!==s?.nodeId||t!==s?.id,connectionInProcess:!!s,clickConnectionInProcess:!!r,valid:d&&c}})(v,p,e),Ks);v||y.getState().onError?.("010","Handle: No node id found. Make sure to only use a Handle inside a custom Node.");const A=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:o}=y.getState(),r={...t,...e};if(o){const{edges:e,setEdges:t}=y.getState();t(((e,t)=>{if(!e.source||!e.target)return t;let n;return n=na(e)?{...e}:{...e,id:qa(e)},((e,t)=>t.some((t=>!(t.source!==e.source||t.target!==e.target||t.sourceHandle!==e.sourceHandle&&(t.sourceHandle||e.sourceHandle)||t.targetHandle!==e.targetHandle&&(t.targetHandle||e.targetHandle)))))(n,t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n))})(r,e))}n?.(r),l?.(r)},P=e=>{if(!v)return;const t=La(e.nativeEvent);if(i&&(t&&0===e.button||!t)){const t=y.getState();xs.onPointerDown(e.nativeEvent,{autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:m,handleId:p,nodeId:v,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:A,isValidConnection:n||t.isValidConnection,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed})}t?u?.(e):h?.(e)};return(0,o.jsx)("div",{"data-handleid":p,"data-nodeid":v,"data-handlepos":t,"data-id":`${w}-${v}-${p}-${e}`,className:an(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",x,d,{source:!m,target:m,connectable:r,connectablestart:i,connectableend:a,clickconnecting:E,connectingfrom:S,connectingto:C,valid:M,connectionindicator:r&&(!k||_)&&(k||N?a:i)}]),onMouseDown:P,onTouchStart:P,onClick:b?t=>{const{onClickConnectStart:o,onClickConnectEnd:r,connectionClickStartHandle:a,connectionMode:s,isValidConnection:l,lib:c,rfId:d,nodeLookup:u,connection:h}=y.getState();if(!v||!a&&!i)return;if(!a)return o?.(t.nativeEvent,{nodeId:v,handleId:p,handleType:e}),void y.setState({connectionClickStartHandle:{nodeId:v,type:e,id:p}});const f=$a(t.target),g=n||l,{connection:m,isValid:b}=xs.isValid(t.nativeEvent,{handle:{nodeId:v,id:p,type:e},connectionMode:s,fromNodeId:a.nodeId,fromHandleId:a.id||null,fromType:a.type,isValidConnection:g,flowId:d,doc:f,lib:c,nodeLookup:u});b&&m&&A(m);const x=structuredClone(h);delete x.inProgress,x.toPosition=x.toHandle?x.toHandle.position:null,r?.(t,x),y.setState({connectionClickStartHandle:null})}:void 0,ref:g,...f,children:c})}))),lc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},cc={input:function({data:e,isConnectable:t,sourcePosition:n=Ji.Bottom}){return(0,o.jsxs)(o.Fragment,{children:[e?.label,(0,o.jsx)(sc,{type:"source",position:n,isConnectable:t})]})},default:function({data:e,isConnectable:t,targetPosition:n=Ji.Top,sourcePosition:r=Ji.Bottom}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(sc,{type:"target",position:n,isConnectable:t}),e?.label,(0,o.jsx)(sc,{type:"source",position:r,isConnectable:t})]})},output:function({data:e,isConnectable:t,targetPosition:n=Ji.Top}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(sc,{type:"target",position:n,isConnectable:t}),e?.label]})},group:function(){return null}},dc=e=>{const{width:t,height:n,x:o,y:r}=ia(e.nodeLookup,{filter:e=>!!e.selected});return{width:wa(t)?t:null,height:wa(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${r}px)`}};function uc({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=el(),{width:a,height:s,transformString:l,userSelectionActive:c}=Js(dc,Ks),d=nc(),u=(0,r.useRef)(null);if((0,r.useEffect)((()=>{n||u.current?.focus({preventScroll:!0})}),[n]),tc({nodeRef:u}),c||!a||!s)return null;const h=e?t=>{const n=i.getState().nodes.filter((e=>e.selected));e(t,n)}:void 0;return(0,o.jsx)("div",{className:an(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l},children:(0,o.jsx)("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(lc,e.key)&&(e.preventDefault(),d({direction:lc[e.key],factor:e.shiftKey?4:1}))},style:{width:a,height:s}})})}const hc="undefined"!=typeof window?window:void 0,fc=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function gc({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:l,paneClickDistance:c,deleteKeyCode:d,selectionKeyCode:u,selectionOnDrag:h,selectionMode:f,onSelectionStart:g,onSelectionEnd:p,multiSelectionKeyCode:m,panActivationKeyCode:y,zoomActivationKeyCode:v,elementsSelectable:b,zoomOnScroll:x,zoomOnPinch:w,panOnScroll:S,panOnScrollSpeed:C,panOnScrollMode:E,zoomOnDoubleClick:_,panOnDrag:k,defaultViewport:N,translateExtent:M,minZoom:A,maxZoom:P,preventScrolling:j,onSelectionContextMenu:O,noWheelClassName:z,noPanClassName:D,disableKeyboardA11y:I,onViewportChange:$,isControlledViewport:R}){const{nodesSelectionActive:T,userSelectionActive:L}=Js(fc),B=_l(u,{target:hc}),V=_l(y,{target:hc}),H=V||k,F=V||S,Y=h&&!0!==H,X=B||L||Y;return function({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=el(),{deleteElements:o}=Fl(),i=_l(e,{actInsideInputWithModifier:!1}),a=_l(t,{target:Xl});(0,r.useEffect)((()=>{if(i){const{edges:e,nodes:t}=n.getState();o({nodes:t.filter(Yl),edges:e.filter(Yl)}),n.setState({nodesSelectionActive:!1})}}),[i]),(0,r.useEffect)((()=>{n.setState({multiSelectionActive:a})}),[a])}({deleteKeyCode:d,multiSelectionKeyCode:m}),(0,o.jsx)(ql,{onPaneContextMenu:s,elementsSelectable:b,zoomOnScroll:x,zoomOnPinch:w,panOnScroll:F,panOnScrollSpeed:C,panOnScrollMode:E,zoomOnDoubleClick:_,panOnDrag:!B&&H,defaultViewport:N,translateExtent:M,minZoom:A,maxZoom:P,zoomActivationKeyCode:v,preventScrolling:j,noWheelClassName:z,noPanClassName:D,onViewportChange:$,isControlledViewport:R,paneClickDistance:c,children:(0,o.jsxs)(Jl,{onSelectionStart:g,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:l,panOnDrag:H,isSelecting:!!X,selectionMode:f,selectionKeyPressed:B,selectionOnDrag:Y,children:[e,T&&(0,o.jsx)(uc,{onSelectionContextMenu:O,noPanClassName:D,disableKeyboardA11y:I})]})})}gc.displayName="FlowRenderer";const pc=(0,r.memo)(gc),mc=e=>e.updateNodeInternals;function yc({id:e,onClick:t,onMouseEnter:n,onMouseMove:i,onMouseLeave:a,onContextMenu:s,onDoubleClick:l,nodesDraggable:c,elementsSelectable:d,nodesConnectable:u,nodesFocusable:h,resizeObserver:f,noDragClassName:g,noPanClassName:p,disableKeyboardA11y:m,rfId:y,nodeTypes:v,nodeClickDistance:b,onError:x}){const{node:w,internals:S,isParent:C}=Js((t=>{const n=t.nodeLookup.get(e),o=t.parentLookup.has(e);return{node:n,internals:n.internals,isParent:o}}),Ks);let E=w.type||"default",_=v?.[E]||cc[E];void 0===_&&(x?.("003",(e=>`Node type "${e}" not found. Using fallback type "default".`)(E)),E="default",_=cc.default);const k=!!(w.draggable||c&&void 0===w.draggable),N=!!(w.selectable||d&&void 0===w.selectable),M=!!(w.connectable||u&&void 0===w.connectable),A=!!(w.focusable||h&&void 0===w.focusable),P=el(),j=ja(w),O=function({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){const i=el(),a=(0,r.useRef)(null),s=(0,r.useRef)(null),l=(0,r.useRef)(e.sourcePosition),c=(0,r.useRef)(e.targetPosition),d=(0,r.useRef)(t),u=n&&!!e.internals.handleBounds;return(0,r.useEffect)((()=>{!a.current||e.hidden||u&&s.current===a.current||(s.current&&o?.unobserve(s.current),o?.observe(a.current),s.current=a.current)}),[u,e.hidden]),(0,r.useEffect)((()=>()=>{s.current&&(o?.unobserve(s.current),s.current=null)}),[]),(0,r.useEffect)((()=>{if(a.current){const n=d.current!==t,o=l.current!==e.sourcePosition,r=c.current!==e.targetPosition;(n||o||r)&&(d.current=t,l.current=e.sourcePosition,c.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}}),[e.id,t,e.sourcePosition,e.targetPosition]),a}({node:w,nodeType:E,hasDimensions:j,resizeObserver:f}),z=tc({nodeRef:O,disabled:w.hidden||!k,noDragClassName:g,handleSelector:w.dragHandle,nodeId:e,isSelectable:N,nodeClickDistance:b}),D=nc();if(w.hidden)return null;const I=Pa(w),$=function(e){return void 0===e.internals.handleBounds?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}(w),R=N||k||t||n||i||a,T=n?e=>n(e,{...S.userNode}):void 0,L=i?e=>i(e,{...S.userNode}):void 0,B=a?e=>a(e,{...S.userNode}):void 0,V=s?e=>s(e,{...S.userNode}):void 0,H=l?e=>l(e,{...S.userNode}):void 0;return(0,o.jsx)("div",{className:an(["react-flow__node",`react-flow__node-${E}`,{[p]:k},w.className,{selected:w.selected,selectable:N,parent:C,draggable:k,dragging:z}]),ref:O,style:{zIndex:S.z,transform:`translate(${S.positionAbsolute.x}px,${S.positionAbsolute.y}px)`,pointerEvents:R?"all":"none",visibility:j?"visible":"hidden",...w.style,...$},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:T,onMouseMove:L,onMouseLeave:B,onContextMenu:V,onClick:n=>{const{selectNodesOnDrag:o,nodeDragThreshold:r}=P.getState();N&&(!o||!k||r>0)&&ec({id:e,store:P,nodeRef:O}),t&&t(n,{...S.userNode})},onDoubleClick:H,onKeyDown:A?t=>{if(!Ta(t.nativeEvent)&&!m)if(Xi.includes(t.key)&&N){const n="Escape"===t.key;ec({id:e,store:P,unselect:n,nodeRef:O})}else k&&w.selected&&Object.prototype.hasOwnProperty.call(lc,t.key)&&(t.preventDefault(),P.setState({ariaLiveMessage:`Moved selected node ${t.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~S.positionAbsolute.x}, y: ${~~S.positionAbsolute.y}`}),D({direction:lc[t.key],factor:t.shiftKey?4:1}))}:void 0,tabIndex:A?0:void 0,role:A?"button":void 0,"aria-describedby":m?void 0:`${ol}-${y}`,"aria-label":w.ariaLabel,children:(0,o.jsx)(rc,{value:e,children:(0,o.jsx)(_,{id:e,data:w.data,type:E,positionAbsoluteX:S.positionAbsolute.x,positionAbsoluteY:S.positionAbsolute.y,selected:w.selected??!1,selectable:N,draggable:k,deletable:w.deletable??!0,isConnectable:M,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:z,dragHandle:w.dragHandle,zIndex:S.z,parentId:w.parentId,...I})})})}const vc=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function bc(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,onError:s}=Js(vc,Ks),l=function(e){return Js((0,r.useCallback)((e=>t=>e?aa(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map((e=>e.id)):Array.from(t.nodeLookup.keys()))(e),[e]),Ks)}(e.onlyRenderVisibleElements),c=function(){const e=Js(mc),[t]=(0,r.useState)((()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver((t=>{const n=new Map;t.forEach((e=>{const t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})})),e(n)}))));return(0,r.useEffect)((()=>()=>{t?.disconnect()}),[t]),t}();return(0,o.jsx)("div",{className:"react-flow__nodes",style:Zl,children:l.map((r=>(0,o.jsx)(yc,{id:r,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:s},r)))})}bc.displayName="NodeRenderer";const xc=(0,r.memo)(bc),wc={[Qi.Arrow]:({color:e="none",strokeWidth:t=1})=>(0,o.jsx)("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[Qi.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>(0,o.jsx)("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Sc=({id:e,type:t,color:n,width:i=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"})=>{const d=function(e){const t=el();return(0,r.useMemo)((()=>Object.prototype.hasOwnProperty.call(wc,e)?wc[e]:(t.getState().onError?.("009",(e=>`Marker type "${e}" doesn't exist.`)(e)),null)),[e])}(t);return d?(0,o.jsx)("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:c,refX:"0",refY:"0",children:(0,o.jsx)(d,{color:n,strokeWidth:l})}):null},Cc=({defaultColor:e,rfId:t})=>{const n=Js((e=>e.edges)),i=Js((e=>e.defaultEdgeOptions)),a=(0,r.useMemo)((()=>{const o=function(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const i=new Set;return e.reduce(((e,a)=>([a.markerStart||o,a.markerEnd||r].forEach((o=>{if(o&&"object"==typeof o){const r=os(o,t);i.has(r)||(e.push({id:r,color:o.color||n,...o}),i.add(r))}})),e)),[]).sort(((e,t)=>e.id.localeCompare(t.id)))}(n,{id:t,defaultColor:e,defaultMarkerStart:i?.markerStart,defaultMarkerEnd:i?.markerEnd});return o}),[n,i,t,e]);return a.length?(0,o.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,o.jsx)("defs",{children:a.map((e=>(0,o.jsx)(Sc,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id)))})}):null};Cc.displayName="MarkerDefinitions";var Ec=(0,r.memo)(Cc);function _c({x:e,y:t,label:n,labelStyle:i,labelShowBg:a=!0,labelBgStyle:s,labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:d,className:u,...h}){const[f,g]=(0,r.useState)({x:1,y:0,width:0,height:0}),p=an(["react-flow__edge-textwrapper",u]),m=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(m.current){const e=m.current.getBBox();g({x:e.x,y:e.y,width:e.width,height:e.height})}}),[n]),n?(0,o.jsxs)("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:p,visibility:f.width?"visible":"hidden",...h,children:[a&&(0,o.jsx)("rect",{width:f.width+2*l[0],x:-l[0],y:-l[1],height:f.height+2*l[1],className:"react-flow__edge-textbg",style:s,rx:c,ry:c}),(0,o.jsx)("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:m,style:i,children:n}),d]}):null}_c.displayName="EdgeText";const kc=(0,r.memo)(_c);function Nc({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c,interactionWidth:d=20,...u}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{...u,d:e,fill:"none",className:an(["react-flow__edge-path",u.className])}),d&&(0,o.jsx)("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),r&&wa(t)&&wa(n)?(0,o.jsx)(kc,{x:t,y:n,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c}):null]})}function Mc({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===Ji.Left||e===Ji.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function Ac({sourceX:e,sourceY:t,sourcePosition:n=Ji.Bottom,targetX:o,targetY:r,targetPosition:i=Ji.Top}){const[a,s]=Mc({pos:n,x1:e,y1:t,x2:o,y2:r}),[l,c]=Mc({pos:i,x1:o,y1:r,x2:e,y2:t}),[d,u,h,f]=Ha({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:s,targetControlX:l,targetControlY:c});return[`M${e},${t} C${a},${s} ${l},${c} ${o},${r}`,d,u,h,f]}function Pc(e){return(0,r.memo)((({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,sourcePosition:s,targetPosition:l,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:g,style:p,markerEnd:m,markerStart:y,interactionWidth:v})=>{const[b,x,w]=Ac({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:l}),S=e.isInternal?void 0:t;return(0,o.jsx)(Nc,{id:S,path:b,labelX:x,labelY:w,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:g,style:p,markerEnd:m,markerStart:y,interactionWidth:v})}))}const jc=Pc({isInternal:!1}),Oc=Pc({isInternal:!0});function zc(e){return(0,r.memo)((({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,label:s,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:f,sourcePosition:g=Ji.Bottom,targetPosition:p=Ji.Top,markerEnd:m,markerStart:y,pathOptions:v,interactionWidth:b})=>{const[x,w,S]=Qa({sourceX:n,sourceY:r,sourcePosition:g,targetX:i,targetY:a,targetPosition:p,borderRadius:v?.borderRadius,offset:v?.offset}),C=e.isInternal?void 0:t;return(0,o.jsx)(Nc,{id:C,path:x,labelX:w,labelY:S,label:s,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:y,interactionWidth:b})}))}jc.displayName="SimpleBezierEdge",Oc.displayName="SimpleBezierEdgeInternal";const Dc=zc({isInternal:!1}),Ic=zc({isInternal:!0});function $c(e){return(0,r.memo)((({id:t,...n})=>{const i=e.isInternal?void 0:t;return(0,o.jsx)(Dc,{...n,id:i,pathOptions:(0,r.useMemo)((()=>({borderRadius:0,offset:n.pathOptions?.offset})),[n.pathOptions?.offset])})}))}Dc.displayName="SmoothStepEdge",Ic.displayName="SmoothStepEdgeInternal";const Rc=$c({isInternal:!1}),Tc=$c({isInternal:!0});function Lc(e){return(0,r.memo)((({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,label:s,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:f,markerEnd:g,markerStart:p,interactionWidth:m})=>{const[y,v,b]=Ka({sourceX:n,sourceY:r,targetX:i,targetY:a}),x=e.isInternal?void 0:t;return(0,o.jsx)(Nc,{id:x,path:y,labelX:v,labelY:b,label:s,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:h,style:f,markerEnd:g,markerStart:p,interactionWidth:m})}))}Rc.displayName="StepEdge",Tc.displayName="StepEdgeInternal";const Bc=Lc({isInternal:!1}),Vc=Lc({isInternal:!0});function Hc(e){return(0,r.memo)((({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,sourcePosition:s=Ji.Bottom,targetPosition:l=Ji.Top,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:g,style:p,markerEnd:m,markerStart:y,pathOptions:v,interactionWidth:b})=>{const[x,w,S]=Xa({sourceX:n,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:l,curvature:v?.curvature}),C=e.isInternal?void 0:t;return(0,o.jsx)(Nc,{id:C,path:x,labelX:w,labelY:S,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:g,style:p,markerEnd:m,markerStart:y,interactionWidth:b})}))}Bc.displayName="StraightEdge",Vc.displayName="StraightEdgeInternal";const Fc=Hc({isInternal:!1}),Yc=Hc({isInternal:!0});Fc.displayName="BezierEdge",Yc.displayName="BezierEdgeInternal";const Xc={default:Yc,straight:Vc,step:Tc,smoothstep:Ic,simplebezier:Oc},Zc={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Wc=(e,t,n)=>n===Ji.Left?e-t:n===Ji.Right?e+t:e,qc=(e,t,n)=>n===Ji.Top?e-t:n===Ji.Bottom?e+t:e,Kc="react-flow__edgeupdater";function Uc({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:a,onMouseOut:s,type:l}){return(0,o.jsx)("circle",{onMouseDown:i,onMouseEnter:a,onMouseOut:s,className:an([Kc,`${Kc}-${l}`]),cx:Wc(t,r,e),cy:qc(n,r,e),r,stroke:"transparent",fill:"transparent"})}function Gc({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:a,targetY:s,sourcePosition:l,targetPosition:c,onReconnect:d,onReconnectStart:u,onReconnectEnd:h,setReconnecting:f,setUpdateHover:g}){const p=el(),m=(e,t)=>{if(0!==e.button)return;const{autoPanOnConnect:o,domNode:r,isValidConnection:i,connectionMode:a,connectionRadius:s,lib:l,onConnectStart:c,onConnectEnd:g,cancelConnection:m,nodeLookup:y,rfId:v,panBy:b,updateConnection:x}=p.getState(),w="target"===t.type;f(!0),u?.(e,n,t.type),xs.onPointerDown(e.nativeEvent,{autoPanOnConnect:o,connectionMode:a,connectionRadius:s,domNode:r,handleId:t.id,nodeId:t.nodeId,nodeLookup:y,isTarget:w,edgeUpdaterType:t.type,lib:l,flowId:v,cancelConnection:m,panBy:b,isValidConnection:i,onConnect:e=>d?.(n,e),onConnectStart:c,onConnectEnd:g,onReconnectEnd:(e,o)=>{f(!1),h?.(e,n,t.type,o)},updateConnection:x,getTransform:()=>p.getState().transform,getFromHandle:()=>p.getState().connection.fromHandle})},y=()=>g(!0),v=()=>g(!1);return(0,o.jsxs)(o.Fragment,{children:[(!0===e||"source"===e)&&(0,o.jsx)(Uc,{position:l,centerX:r,centerY:i,radius:t,onMouseDown:e=>m(e,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),onMouseEnter:y,onMouseOut:v,type:"source"}),(!0===e||"target"===e)&&(0,o.jsx)(Uc,{position:c,centerX:a,centerY:s,radius:t,onMouseDown:e=>m(e,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),onMouseEnter:y,onMouseOut:v,type:"target"})]})}function Qc({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:i,onClick:a,onDoubleClick:s,onContextMenu:l,onMouseEnter:c,onMouseMove:d,onMouseLeave:u,reconnectRadius:h,onReconnect:f,onReconnectStart:g,onReconnectEnd:p,rfId:m,edgeTypes:y,noPanClassName:v,onError:b,disableKeyboardA11y:x}){let w=Js((t=>t.edgeLookup.get(e)));const S=Js((e=>e.defaultEdgeOptions));w=S?{...S,...w}:w;let C=w.type||"default",E=y?.[C]||Xc[C];void 0===E&&(b?.("011",(e=>`Edge type "${e}" not found. Using fallback type "default".`)(C)),C="default",E=Xc.default);const _=!!(w.focusable||t&&void 0===w.focusable),k=void 0!==f&&(w.reconnectable||n&&void 0===w.reconnectable),N=!!(w.selectable||i&&void 0===w.selectable),M=(0,r.useRef)(null),[A,P]=(0,r.useState)(!1),[j,O]=(0,r.useState)(!1),z=el(),{zIndex:D,sourceX:I,sourceY:$,targetX:R,targetY:T,sourcePosition:L,targetPosition:B}=Js((0,r.useCallback)((t=>{const n=t.nodeLookup.get(w.source),o=t.nodeLookup.get(w.target);if(!n||!o)return{zIndex:w.zIndex,...Zc};const r=function(e){const{sourceNode:t,targetNode:n}=e;if(!Ja(t)||!Ja(n))return null;const o=t.internals.handleBounds||es(t.handles),r=n.internals.handleBounds||es(n.handles),i=ns(o?.source??[],e.sourceHandle),a=ns(e.connectionMode===Zi.Strict?r?.target??[]:(r?.target??[]).concat(r?.source??[]),e.targetHandle);if(!i||!a)return e.onError?.("008",((e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:o}", edge id: ${t}.`)(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=i?.position||Ji.Bottom,l=a?.position||Ji.Top,c=ts(t,i,s),d=ts(n,a,l);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y,sourcePosition:s,targetPosition:l}}({id:e,sourceNode:n,targetNode:o,sourceHandle:w.sourceHandle||null,targetHandle:w.targetHandle||null,connectionMode:t.connectionMode,onError:b}),i=function({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o=0,elevateOnSelect:r=!1}){if(!r)return o;const i=n||t.selected||e.selected,a=Math.max(e.internals.z||0,t.internals.z||0,1e3);return o+(i?a:0)}({selected:w.selected,zIndex:w.zIndex,sourceNode:n,targetNode:o,elevateOnSelect:t.elevateEdgesOnSelect});return{zIndex:i,...r||Zc}}),[w.source,w.target,w.sourceHandle,w.targetHandle,w.selected,w.zIndex]),Ks),V=(0,r.useMemo)((()=>w.markerStart?`url('#${os(w.markerStart,m)}')`:void 0),[w.markerStart,m]),H=(0,r.useMemo)((()=>w.markerEnd?`url('#${os(w.markerEnd,m)}')`:void 0),[w.markerEnd,m]);if(w.hidden||null===I||null===$||null===R||null===T)return null;const F=s?e=>{s(e,{...w})}:void 0,Y=l?e=>{l(e,{...w})}:void 0,X=c?e=>{c(e,{...w})}:void 0,Z=d?e=>{d(e,{...w})}:void 0,W=u?e=>{u(e,{...w})}:void 0;return(0,o.jsx)("svg",{style:{zIndex:D},children:(0,o.jsxs)("g",{className:an(["react-flow__edge",`react-flow__edge-${C}`,w.className,v,{selected:w.selected,animated:w.animated,inactive:!N&&!a,updating:A,selectable:N}]),onClick:t=>{const{addSelectedEdges:n,unselectNodesAndEdges:o,multiSelectionActive:r}=z.getState();N&&(z.setState({nodesSelectionActive:!1}),w.selected&&r?(o({nodes:[],edges:[w]}),M.current?.blur()):n([e])),a&&a(t,w)},onDoubleClick:F,onContextMenu:Y,onMouseEnter:X,onMouseMove:Z,onMouseLeave:W,onKeyDown:_?t=>{if(!x&&Xi.includes(t.key)&&N){const{unselectNodesAndEdges:n,addSelectedEdges:o}=z.getState();"Escape"===t.key?(M.current?.blur(),n({edges:[w]})):o([e])}}:void 0,tabIndex:_?0:void 0,role:_?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===w.ariaLabel?void 0:w.ariaLabel||`Edge from ${w.source} to ${w.target}`,"aria-describedby":_?`${rl}-${m}`:void 0,ref:M,children:[!j&&(0,o.jsx)(E,{id:e,source:w.source,target:w.target,type:w.type,selected:w.selected,animated:w.animated,selectable:N,deletable:w.deletable??!0,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,sourceX:I,sourceY:$,targetX:R,targetY:T,sourcePosition:L,targetPosition:B,data:w.data,style:w.style,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerStart:V,markerEnd:H,pathOptions:"pathOptions"in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth}),k&&(0,o.jsx)(Gc,{edge:w,isReconnectable:k,reconnectRadius:h,onReconnect:f,onReconnectStart:g,onReconnectEnd:p,sourceX:I,sourceY:$,targetX:R,targetY:T,sourcePosition:L,targetPosition:B,setUpdateHover:P,setReconnecting:O})]})})}const Jc=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function ed({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:i,noPanClassName:a,onReconnect:s,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:d,onEdgeMouseLeave:u,onEdgeClick:h,reconnectRadius:f,onEdgeDoubleClick:g,onReconnectStart:p,onReconnectEnd:m,disableKeyboardA11y:y}){const{edgesFocusable:v,edgesReconnectable:b,elementsSelectable:x,onError:w}=Js(Jc,Ks),S=Js((0,r.useCallback)((e=>{if(!C)return e.edges.map((e=>e.id));const t=[];if(e.width&&e.height)for(const n of e.edges){const o=e.nodeLookup.get(n.source),r=e.nodeLookup.get(n.target);o&&r&&Wa({sourceNode:o,targetNode:r,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t}),[C=t]),Ks);var C;return(0,o.jsxs)("div",{className:"react-flow__edges",children:[(0,o.jsx)(Ec,{defaultColor:e,rfId:n}),S.map((e=>(0,o.jsx)(Qc,{id:e,edgesFocusable:v,edgesReconnectable:b,elementsSelectable:x,noPanClassName:a,onReconnect:s,onContextMenu:l,onMouseEnter:c,onMouseMove:d,onMouseLeave:u,onClick:h,reconnectRadius:f,onDoubleClick:g,onReconnectStart:p,onReconnectEnd:m,rfId:n,onError:w,edgeTypes:i,disableKeyboardA11y:y},e)))]})}ed.displayName="EdgeRenderer";const td=(0,r.memo)(ed),nd=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function od({children:e}){const t=Js(nd);return(0,o.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}const rd=e=>e.panZoom?.syncViewport;function id(e){return e.connection.inProgress?{...e.connection,to:Ea(e.connection.to,e.transform)}:{...e.connection}}const ad=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function sd({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:a,height:s,isValid:l,inProgress:c}=Js(ad,Ks);return a&&i&&c?(0,o.jsx)("svg",{style:e,width:a,height:s,className:"react-flow__connectionline react-flow__container",children:(0,o.jsx)("g",{className:an(["react-flow__connection",ta(l)]),children:(0,o.jsx)(ld,{style:t,type:n,CustomComponent:r,isValid:l})})}):null}const ld=({style:e,type:t=Gi.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:a,fromNode:s,fromHandle:l,fromPosition:c,to:d,toNode:u,toHandle:h,toPosition:f}=Js(id,Ks);if(!i)return;if(n)return(0,o.jsx)(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:l,fromX:a.x,fromY:a.y,toX:d.x,toY:d.y,fromPosition:c,toPosition:f,connectionStatus:ta(r),toNode:u,toHandle:h});let g="";const p={sourceX:a.x,sourceY:a.y,sourcePosition:c,targetX:d.x,targetY:d.y,targetPosition:f};switch(t){case Gi.Bezier:[g]=Xa(p);break;case Gi.SimpleBezier:[g]=Ac(p);break;case Gi.Step:[g]=Qa({...p,borderRadius:0});break;case Gi.SmoothStep:[g]=Qa(p);break;default:[g]=Ka(p)}return(0,o.jsx)("path",{d:g,fill:"none",className:"react-flow__connection-path",style:e})};ld.displayName="ConnectionLine";const cd={};function dd(e=cd){(0,r.useRef)(e),el(),(0,r.useEffect)((()=>{}),[e])}function ud({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:s,onEdgeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:u,onNodeContextMenu:h,onSelectionContextMenu:f,onSelectionStart:g,onSelectionEnd:p,connectionLineType:m,connectionLineStyle:y,connectionLineComponent:v,connectionLineContainerStyle:b,selectionKeyCode:x,selectionOnDrag:w,selectionMode:S,multiSelectionKeyCode:C,panActivationKeyCode:E,zoomActivationKeyCode:_,deleteKeyCode:k,onlyRenderVisibleElements:N,elementsSelectable:M,defaultViewport:A,translateExtent:P,minZoom:j,maxZoom:O,preventScrolling:z,defaultMarkerColor:D,zoomOnScroll:I,zoomOnPinch:$,panOnScroll:R,panOnScrollSpeed:T,panOnScrollMode:L,zoomOnDoubleClick:B,panOnDrag:V,onPaneClick:H,onPaneMouseEnter:F,onPaneMouseMove:Y,onPaneMouseLeave:X,onPaneScroll:Z,onPaneContextMenu:W,paneClickDistance:q,nodeClickDistance:K,onEdgeContextMenu:U,onEdgeMouseEnter:G,onEdgeMouseMove:Q,onEdgeMouseLeave:J,reconnectRadius:ee,onReconnect:te,onReconnectStart:ne,onReconnectEnd:oe,noDragClassName:re,noWheelClassName:ie,noPanClassName:ae,disableKeyboardA11y:se,nodeExtent:le,rfId:ce,viewport:de,onViewportChange:ue}){return dd(e),dd(t),el(),(0,r.useRef)(!1),(0,r.useEffect)((()=>{}),[]),function(e){const t=Fl(),n=(0,r.useRef)(!1);(0,r.useEffect)((()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout((()=>e(t)),1),n.current=!0)}),[e,t.viewportInitialized])}(n),function(e){const t=Js(rd),n=el();(0,r.useEffect)((()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))}),[e,t])}(de),(0,o.jsx)(pc,{onPaneClick:H,onPaneMouseEnter:F,onPaneMouseMove:Y,onPaneMouseLeave:X,onPaneContextMenu:W,onPaneScroll:Z,paneClickDistance:q,deleteKeyCode:k,selectionKeyCode:x,selectionOnDrag:w,selectionMode:S,onSelectionStart:g,onSelectionEnd:p,multiSelectionKeyCode:C,panActivationKeyCode:E,zoomActivationKeyCode:_,elementsSelectable:M,zoomOnScroll:I,zoomOnPinch:$,zoomOnDoubleClick:B,panOnScroll:R,panOnScrollSpeed:T,panOnScrollMode:L,panOnDrag:V,defaultViewport:A,translateExtent:P,minZoom:j,maxZoom:O,onSelectionContextMenu:f,preventScrolling:z,noDragClassName:re,noWheelClassName:ie,noPanClassName:ae,disableKeyboardA11y:se,onViewportChange:ue,isControlledViewport:!!de,children:(0,o.jsxs)(od,{children:[(0,o.jsx)(td,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:l,onReconnect:te,onReconnectStart:ne,onReconnectEnd:oe,onlyRenderVisibleElements:N,onEdgeContextMenu:U,onEdgeMouseEnter:G,onEdgeMouseMove:Q,onEdgeMouseLeave:J,reconnectRadius:ee,defaultMarkerColor:D,noPanClassName:ae,disableKeyboardA11y:se,rfId:ce}),(0,o.jsx)(sd,{style:y,type:m,component:v,containerStyle:b}),(0,o.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,o.jsx)(xc,{nodeTypes:e,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:u,onNodeContextMenu:h,nodeClickDistance:K,onlyRenderVisibleElements:N,noPanClassName:ae,noDragClassName:re,disableKeyboardA11y:se,nodeExtent:le,rfId:ce}),(0,o.jsx)("div",{className:"react-flow__viewport-portal"})]})})}ud.displayName="GraphView";const hd=(0,r.memo)(ud),fd=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:a,fitViewOptions:s,minZoom:l=.5,maxZoom:c=2,nodeOrigin:d,nodeExtent:u}={})=>{const h=new Map,f=new Map,g=new Map,p=new Map,m=o??t??[],y=n??e??[],v=d??[0,0],b=u??Yi;hs(g,p,m);const x=ss(y,h,f,{nodeOrigin:v,nodeExtent:b,elevateNodesOnSelect:!1});let w=[0,0,1];if(a&&r&&i){const e=ia(h,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:t,y:n,zoom:o}=Na(e,r,i,l,c,s?.padding??.1);w=[t,n,o]}return{rfId:"1",width:0,height:0,transform:w,nodes:y,nodesInitialized:x,nodeLookup:h,parentLookup:f,edges:m,edgeLookup:p,connectionLookup:g,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==o,panZoom:null,minZoom:l,maxZoom:c,translateExtent:Yi,nodeExtent:b,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Zi.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:v,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:a??!1,fitViewOptions:s,fitViewResolver:null,connection:{...Ui},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Sa,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}};function gd({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:i,initialWidth:a,initialHeight:s,initialMinZoom:l,initialMaxZoom:c,initialFitViewOptions:d,fitView:u,nodeOrigin:h,nodeExtent:f,children:g}){const[p]=(0,r.useState)((()=>(({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:a,fitViewOptions:s,minZoom:l,maxZoom:c,nodeOrigin:d,nodeExtent:u})=>{return h=(h,f)=>{async function g(){const{nodeLookup:e,panZoom:t,fitViewOptions:n,fitViewResolver:o,width:r,height:i,minZoom:a,maxZoom:s}=f();t&&(await async function({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:i},a){if(0===e.size)return Promise.resolve(!0);const s=function(e,t){const n=new Map,o=t?.nodes?new Set(t.nodes.map((e=>e.id))):null;return e.forEach((e=>{!e.measured.width||!e.measured.height||!t?.includeHiddenNodes&&e.hidden||o&&!o.has(e.id)||n.set(e.id,e)})),n}(e,a),l=ia(s),c=Na(l,t,n,a?.minZoom??r,a?.maxZoom??i,a?.padding??.1);return await o.setViewport(c,{duration:a?.duration}),Promise.resolve(!0)}({nodes:e,width:r,height:i,panZoom:t,minZoom:a,maxZoom:s},n),o?.resolve(!0),h({fitViewResolver:null}))}return{...fd({nodes:e,edges:t,width:r,height:i,fitView:a,fitViewOptions:s,minZoom:l,maxZoom:c,nodeOrigin:d,nodeExtent:u,defaultNodes:n,defaultEdges:o}),setNodes:e=>{const{nodeLookup:t,parentLookup:n,nodeOrigin:o,elevateNodesOnSelect:r,fitViewQueued:i}=f(),a=ss(e,t,n,{nodeOrigin:o,nodeExtent:u,elevateNodesOnSelect:r,checkEquality:!0});i&&a?(g(),h({nodes:e,nodesInitialized:a,fitViewQueued:!1,fitViewOptions:void 0})):h({nodes:e,nodesInitialized:a})},setEdges:e=>{const{connectionLookup:t,edgeLookup:n}=f();hs(t,n,e),h({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){const{setNodes:t}=f();t(e),h({hasDefaultNodes:!0})}if(t){const{setEdges:e}=f();e(t),h({hasDefaultEdges:!0})}},updateNodeInternals:e=>{const{triggerNodeChanges:t,nodeLookup:n,parentLookup:o,domNode:r,nodeOrigin:i,nodeExtent:a,debug:s,fitViewQueued:l}=f(),{changes:c,updatedInternals:d}=function(e,t,n,o,r,i){const a=o?.querySelector(".xyflow__viewport");let s=!1;if(!a)return{changes:[],updatedInternals:s};const l=[],c=window.getComputedStyle(a),{m22:d}=new window.DOMMatrixReadOnly(c.transform),u=[];for(const o of e.values()){const e=t.get(o.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),s=!0;continue}const a=Ia(o.nodeElement),c=e.measured.width!==a.width||e.measured.height!==a.height;if(a.width&&a.height&&(c||!e.internals.handleBounds||o.force)){const h=o.nodeElement.getBoundingClientRect(),f=Aa(e.extent)?e.extent:i;let{positionAbsolute:g}=e.internals;e.parentId&&"parent"===e.extent?g=da(g,a,t.get(e.parentId)):f&&(g=ca(g,f,a));const p={...e,measured:a,internals:{...e.internals,positionAbsolute:g,handleBounds:{source:Va("source",o.nodeElement,h,d,e.id),target:Va("target",o.nodeElement,h,d,e.id)}}};t.set(e.id,p),e.parentId&&ls(p,t,n,{nodeOrigin:r}),s=!0,c&&(l.push({id:e.id,type:"dimensions",dimensions:a}),e.expandParent&&e.parentId&&u.push({id:e.id,parentId:e.parentId,rect:ma(p,r)}))}}if(u.length>0){const e=ds(u,t,n,r);l.push(...e)}return{changes:l,updatedInternals:s}}(e,n,o,r,i,a);d&&(function(e,t,n){const o=as(rs,n);for(const n of e.values())if(n.parentId)ls(n,e,t,o);else{const e=ra(n,o.nodeOrigin),t=Aa(n.extent)?n.extent:o.nodeExtent,r=ca(e,t,Pa(n));n.internals.positionAbsolute=r}}(n,o,{nodeOrigin:i,nodeExtent:a}),l?(g(),h({fitViewQueued:!1,fitViewOptions:void 0})):h({}),c?.length>0&&(s&&console.log("React Flow: trigger node changes",c),t?.(c)))},updateNodePositions:(e,t=!1)=>{const n=[],o=[],{nodeLookup:r,triggerNodeChanges:i}=f();for(const[i,a]of e){const e=r.get(i),s=!!(e?.expandParent&&e?.parentId&&a?.position),l={id:i,type:"position",position:s?{x:Math.max(0,a.position.x),y:Math.max(0,a.position.y)}:a.position,dragging:t};s&&e.parentId&&n.push({id:i,parentId:e.parentId,rect:{...a.internals.positionAbsolute,width:a.measured.width??0,height:a.measured.height??0}}),o.push(l)}if(n.length>0){const{parentLookup:e,nodeOrigin:t}=f(),i=ds(n,r,e,t);o.push(...i)}i(o)},triggerNodeChanges:e=>{const{onNodesChange:t,setNodes:n,nodes:o,hasDefaultNodes:r,debug:i}=f();e?.length&&(r&&n(Pl(e,o)),i&&console.log("React Flow: trigger node changes",e),t?.(e))},triggerEdgeChanges:e=>{const{onEdgesChange:t,setEdges:n,edges:o,hasDefaultEdges:r,debug:i}=f();e?.length&&(r&&n(jl(e,o)),i&&console.log("React Flow: trigger edge changes",e),t?.(e))},addSelectedNodes:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:i}=f();t?r(e.map((e=>Ol(e,!0)))):(r(zl(o,new Set([...e]),!0)),i(zl(n)))},addSelectedEdges:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:i}=f();t?i(e.map((e=>Ol(e,!0)))):(i(zl(n,new Set([...e]))),r(zl(o,new Set,!0)))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{const{edges:n,nodes:o,nodeLookup:r,triggerNodeChanges:i,triggerEdgeChanges:a}=f(),s=t||n,l=(e||o).map((e=>{const t=r.get(e.id);return t&&(t.selected=!1),Ol(e.id,!1)})),c=s.map((e=>Ol(e.id,!1)));i(l),a(c)},setMinZoom:e=>{const{panZoom:t,maxZoom:n}=f();t?.setScaleExtent([e,n]),h({minZoom:e})},setMaxZoom:e=>{const{panZoom:t,minZoom:n}=f();t?.setScaleExtent([n,e]),h({maxZoom:e})},setTranslateExtent:e=>{f().panZoom?.setTranslateExtent(e),h({translateExtent:e})},setPaneClickDistance:e=>{f().panZoom?.setClickDistance(e)},resetSelectedElements:()=>{const{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:o,elementsSelectable:r}=f();if(!r)return;const i=t.reduce(((e,t)=>t.selected?[...e,Ol(t.id,!1)]:e),[]),a=e.reduce(((e,t)=>t.selected?[...e,Ol(t.id,!1)]:e),[]);n(i),o(a)},setNodeExtent:e=>{const{nodes:t,nodeLookup:n,parentLookup:o,nodeOrigin:r,elevateNodesOnSelect:i,nodeExtent:a}=f();e[0][0]===a[0][0]&&e[0][1]===a[0][1]&&e[1][0]===a[1][0]&&e[1][1]===a[1][1]||(ss(t,n,o,{nodeOrigin:r,nodeExtent:e,elevateNodesOnSelect:i,checkEquality:!1}),h({nodeExtent:e}))},panBy:e=>{const{transform:t,width:n,height:o,panZoom:r,translateExtent:i}=f();return async function({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,i]],o),s=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(s)}({delta:e,panZoom:r,transform:t,translateExtent:i,width:n,height:o})},cancelConnection:()=>{h({connection:{...Ui}})},updateConnection:e=>{h({connection:e})},reset:()=>h({...fd()})}},f=Object.is,h?qs(h,f):qs;var h,f})({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:a,height:s,fitView:u,minZoom:l,maxZoom:c,fitViewOptions:d,nodeOrigin:h,nodeExtent:f})));return(0,o.jsx)(Gs,{value:p,children:(0,o.jsx)(Vl,{children:g})})}function pd({children:e,nodes:t,edges:n,defaultNodes:i,defaultEdges:a,width:s,height:l,fitView:c,fitViewOptions:d,minZoom:u,maxZoom:h,nodeOrigin:f,nodeExtent:g}){return(0,r.useContext)(Us)?(0,o.jsx)(o.Fragment,{children:e}):(0,o.jsx)(gd,{initialNodes:t,initialEdges:n,defaultNodes:i,defaultEdges:a,initialWidth:s,initialHeight:l,fitView:c,initialFitViewOptions:d,initialMinZoom:u,initialMaxZoom:h,nodeOrigin:f,nodeExtent:g,children:e})}const md={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var yd=Rl((function({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:a,nodeTypes:s,edgeTypes:l,onNodeClick:c,onEdgeClick:d,onInit:u,onMove:h,onMoveStart:f,onMoveEnd:g,onConnect:p,onConnectStart:m,onConnectEnd:y,onClickConnectStart:v,onClickConnectEnd:b,onNodeMouseEnter:x,onNodeMouseMove:w,onNodeMouseLeave:S,onNodeContextMenu:C,onNodeDoubleClick:E,onNodeDragStart:_,onNodeDrag:k,onNodeDragStop:N,onNodesDelete:M,onEdgesDelete:A,onDelete:P,onSelectionChange:j,onSelectionDragStart:O,onSelectionDrag:z,onSelectionDragStop:D,onSelectionContextMenu:I,onSelectionStart:$,onSelectionEnd:R,onBeforeDelete:T,connectionMode:L,connectionLineType:B=Gi.Bezier,connectionLineStyle:V,connectionLineComponent:H,connectionLineContainerStyle:F,deleteKeyCode:Y="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:Z=!1,selectionMode:W=qi.Full,panActivationKeyCode:q="Space",multiSelectionKeyCode:K=(Ma()?"Meta":"Control"),zoomActivationKeyCode:U=(Ma()?"Meta":"Control"),snapToGrid:G,snapGrid:Q,onlyRenderVisibleElements:J=!1,selectNodesOnDrag:ee,nodesDraggable:te,nodesConnectable:ne,nodesFocusable:oe,nodeOrigin:re=yl,edgesFocusable:ie,edgesReconnectable:ae,elementsSelectable:se=!0,defaultViewport:le=vl,minZoom:ce=.5,maxZoom:de=2,translateExtent:ue=Yi,preventScrolling:he=!0,nodeExtent:fe,defaultMarkerColor:ge="#b1b1b7",zoomOnScroll:pe=!0,zoomOnPinch:me=!0,panOnScroll:ye=!1,panOnScrollSpeed:ve=.5,panOnScrollMode:be=Wi.Free,zoomOnDoubleClick:xe=!0,panOnDrag:we=!0,onPaneClick:Se,onPaneMouseEnter:Ce,onPaneMouseMove:Ee,onPaneMouseLeave:_e,onPaneScroll:ke,onPaneContextMenu:Ne,paneClickDistance:Me=0,nodeClickDistance:Ae=0,children:Pe,onReconnect:je,onReconnectStart:Oe,onReconnectEnd:ze,onEdgeContextMenu:De,onEdgeDoubleClick:Ie,onEdgeMouseEnter:$e,onEdgeMouseMove:Re,onEdgeMouseLeave:Te,reconnectRadius:Le=10,onNodesChange:Be,onEdgesChange:Ve,noDragClassName:He="nodrag",noWheelClassName:Fe="nowheel",noPanClassName:Ye="nopan",fitView:Xe,fitViewOptions:Ze,connectOnClick:We,attributionPosition:qe,proOptions:Ke,defaultEdgeOptions:Ue,elevateNodesOnSelect:Ge,elevateEdgesOnSelect:Qe,disableKeyboardA11y:Je=!1,autoPanOnConnect:et,autoPanOnNodeDrag:tt,autoPanSpeed:nt,connectionRadius:ot,isValidConnection:rt,onError:it,style:at,id:st,nodeDragThreshold:lt,viewport:ct,onViewportChange:dt,width:ut,height:ht,colorMode:ft="light",debug:gt,onScroll:pt,...mt},yt){const vt=st||"1",bt=function(e){const[t,n]=(0,r.useState)("system"===e?null:e);return(0,r.useEffect)((()=>{if("system"!==e)return void n(e);const t=Cl(),o=()=>n(t?.matches?"dark":"light");return o(),t?.addEventListener("change",o),()=>{t?.removeEventListener("change",o)}}),[e]),null!==t?t:Cl()?.matches?"dark":"light"}(ft),xt=(0,r.useCallback)((e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),pt?.(e)}),[pt]);return(0,o.jsx)("div",{"data-testid":"rf__wrapper",...mt,onScroll:xt,style:{...at,...md},ref:yt,className:an(["react-flow",a,bt]),id:st,children:(0,o.jsxs)(pd,{nodes:e,edges:t,width:ut,height:ht,fitView:Xe,fitViewOptions:Ze,minZoom:ce,maxZoom:de,nodeOrigin:re,nodeExtent:fe,children:[(0,o.jsx)(hd,{onInit:u,onNodeClick:c,onEdgeClick:d,onNodeMouseEnter:x,onNodeMouseMove:w,onNodeMouseLeave:S,onNodeContextMenu:C,onNodeDoubleClick:E,nodeTypes:s,edgeTypes:l,connectionLineType:B,connectionLineStyle:V,connectionLineComponent:H,connectionLineContainerStyle:F,selectionKeyCode:X,selectionOnDrag:Z,selectionMode:W,deleteKeyCode:Y,multiSelectionKeyCode:K,panActivationKeyCode:q,zoomActivationKeyCode:U,onlyRenderVisibleElements:J,defaultViewport:le,translateExtent:ue,minZoom:ce,maxZoom:de,preventScrolling:he,zoomOnScroll:pe,zoomOnPinch:me,zoomOnDoubleClick:xe,panOnScroll:ye,panOnScrollSpeed:ve,panOnScrollMode:be,panOnDrag:we,onPaneClick:Se,onPaneMouseEnter:Ce,onPaneMouseMove:Ee,onPaneMouseLeave:_e,onPaneScroll:ke,onPaneContextMenu:Ne,paneClickDistance:Me,nodeClickDistance:Ae,onSelectionContextMenu:I,onSelectionStart:$,onSelectionEnd:R,onReconnect:je,onReconnectStart:Oe,onReconnectEnd:ze,onEdgeContextMenu:De,onEdgeDoubleClick:Ie,onEdgeMouseEnter:$e,onEdgeMouseMove:Re,onEdgeMouseLeave:Te,reconnectRadius:Le,defaultMarkerColor:ge,noDragClassName:He,noWheelClassName:Fe,noPanClassName:Ye,rfId:vt,disableKeyboardA11y:Je,nodeExtent:fe,viewport:ct,onViewportChange:dt}),(0,o.jsx)(Sl,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:p,onConnectStart:m,onConnectEnd:y,onClickConnectStart:v,onClickConnectEnd:b,nodesDraggable:te,nodesConnectable:ne,nodesFocusable:oe,edgesFocusable:ie,edgesReconnectable:ae,elementsSelectable:se,elevateNodesOnSelect:Ge,elevateEdgesOnSelect:Qe,minZoom:ce,maxZoom:de,nodeExtent:fe,onNodesChange:Be,onEdgesChange:Ve,snapToGrid:G,snapGrid:Q,connectionMode:L,translateExtent:ue,connectOnClick:We,defaultEdgeOptions:Ue,fitView:Xe,fitViewOptions:Ze,onNodesDelete:M,onEdgesDelete:A,onDelete:P,onNodeDragStart:_,onNodeDrag:k,onNodeDragStop:N,onSelectionDrag:z,onSelectionDragStart:O,onSelectionDragStop:D,onMove:h,onMoveStart:f,onMoveEnd:g,noPanClassName:Ye,nodeOrigin:re,rfId:vt,autoPanOnConnect:et,autoPanOnNodeDrag:tt,autoPanSpeed:nt,onError:it,connectionRadius:ot,isValidConnection:rt,selectNodesOnDrag:ee,nodeDragThreshold:lt,onBeforeDelete:T,paneClickDistance:Me,debug:gt}),(0,o.jsx)(ml,{onSelectionChange:j}),Pe,(0,o.jsx)(dl,{proOptions:Ke,position:qe}),(0,o.jsx)(sl,{rfId:vt,disableKeyboardA11y:Je})]})})}));const vd=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function bd({children:e}){const t=Js(vd);return t?(0,ye.createPortal)(e,t):null}function xd({dimensions:e,lineWidth:t,variant:n,className:r}){return(0,o.jsx)("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:an(["react-flow__background-pattern",n,r])})}function wd({radius:e,className:t}){return(0,o.jsx)("circle",{cx:e,cy:e,r:e,className:an(["react-flow__background-pattern","dots",t])})}var Sd;!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(Sd||(Sd={}));const Cd={[Sd.Dots]:1,[Sd.Lines]:1,[Sd.Cross]:6},Ed=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function _d({id:e,variant:t=Sd.Dots,gap:n=20,size:i,lineWidth:a=1,offset:s=0,color:l,bgColor:c,style:d,className:u,patternClassName:h}){const f=(0,r.useRef)(null),{transform:g,patternId:p}=Js(Ed,Ks),m=i||Cd[t],y=t===Sd.Dots,v=t===Sd.Cross,b=Array.isArray(n)?n:[n,n],x=[b[0]*g[2]||1,b[1]*g[2]||1],w=m*g[2],S=Array.isArray(s)?s:[s,s],C=v?[w,w]:x,E=[S[0]*g[2]||1+C[0]/2,S[1]*g[2]||1+C[1]/2],_=`${p}${e||""}`;return(0,o.jsxs)("svg",{className:an(["react-flow__background",u]),style:{...d,...Zl,"--xy-background-color-props":c,"--xy-background-pattern-color-props":l},ref:f,"data-testid":"rf__background",children:[(0,o.jsx)("pattern",{id:_,x:g[0]%x[0],y:g[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`,children:y?(0,o.jsx)(wd,{radius:w/2,className:h}):(0,o.jsx)(xd,{dimensions:C,lineWidth:a,variant:t,className:h})}),(0,o.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${_})`})]})}_d.displayName="Background";const kd=(0,r.memo)(_d);function Nd(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,o.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Md(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,o.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function Ad(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,o.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Pd(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,o.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function jd(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,o.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Od({children:e,className:t,...n}){return(0,o.jsx)("button",{type:"button",className:an(["react-flow__controls-button",t]),...n,children:e})}const zd=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Dd({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:s,onFitView:l,onInteractiveChange:c,className:d,children:u,position:h="bottom-left",orientation:f="vertical","aria-label":g="React Flow controls"}){const p=el(),{isInteractive:m,minZoomReached:y,maxZoomReached:v}=Js(zd,Ks),{zoomIn:b,zoomOut:x,fitView:w}=Fl();return(0,o.jsxs)(cl,{className:an(["react-flow__controls","horizontal"===f?"horizontal":"vertical",d]),position:h,style:e,"data-testid":"rf__controls","aria-label":g,children:[t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Od,{onClick:()=>{b(),a?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:v,children:(0,o.jsx)(Nd,{})}),(0,o.jsx)(Od,{onClick:()=>{x(),s?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:y,children:(0,o.jsx)(Md,{})})]}),n&&(0,o.jsx)(Od,{className:"react-flow__controls-fitview",onClick:()=>{w(i),l?.()},title:"fit view","aria-label":"fit view",children:(0,o.jsx)(Ad,{})}),r&&(0,o.jsx)(Od,{className:"react-flow__controls-interactive",onClick:()=>{p.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),c?.(!m)},title:"toggle interactivity","aria-label":"toggle interactivity",children:(0,o.jsx)(m?jd:Pd,{})}),u]})}Dd.displayName="Controls";const Id=(0,r.memo)(Dd),$d=(0,r.memo)((function({id:e,x:t,y:n,width:r,height:i,style:a,color:s,strokeColor:l,strokeWidth:c,className:d,borderRadius:u,shapeRendering:h,selected:f,onClick:g}){const{background:p,backgroundColor:m}=a||{},y=s||p||m;return(0,o.jsx)("rect",{className:an(["react-flow__minimap-node",{selected:f},d]),x:t,y:n,rx:u,ry:u,width:r,height:i,style:{fill:y,stroke:l,strokeWidth:c},shapeRendering:h,onClick:g?t=>g(t,e):void 0})})),Rd=e=>e.nodes.map((e=>e.id)),Td=e=>e instanceof Function?e:()=>e,Ld=(0,r.memo)((function({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:a,shapeRendering:s,NodeComponent:l,onClick:c}){const{node:d,x:u,y:h,width:f,height:g}=Js((t=>{const{internals:n}=t.nodeLookup.get(e),o=n.userNode,{x:r,y:i}=n.positionAbsolute,{width:a,height:s}=Pa(o);return{node:o,x:r,y:i,width:a,height:s}}),Ks);return d&&!d.hidden&&ja(d)?(0,o.jsx)(l,{x:u,y:h,width:f,height:g,style:d.style,selected:!!d.selected,className:r(d),color:t(d),borderRadius:i,strokeColor:n(d),strokeWidth:a,shapeRendering:s,onClick:c,id:d.id}):null}));var Bd=(0,r.memo)((function({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:a=$d,onClick:s}){const l=Js(Rd,Ks),c=Td(t),d=Td(e),u=Td(n),h="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,o.jsx)(o.Fragment,{children:l.map((e=>(0,o.jsx)(Ld,{id:e,nodeColorFunc:c,nodeStrokeColorFunc:d,nodeClassNameFunc:u,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:a,onClick:s,shapeRendering:h},e)))})}));const Vd=e=>!e.hidden,Hd=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?va(ia(e.nodeLookup,{filter:Vd}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}};function Fd({style:e,className:t,nodeStrokeColor:n,nodeColor:i,nodeClassName:a="",nodeBorderRadius:s=5,nodeStrokeWidth:l,nodeComponent:c,bgColor:d,maskColor:u,maskStrokeColor:h,maskStrokeWidth:f,position:g="bottom-right",onClick:p,onNodeClick:m,pannable:y=!1,zoomable:v=!1,ariaLabel:b="React Flow mini map",inversePan:x,zoomStep:w=10,offsetScale:S=5}){const C=el(),E=(0,r.useRef)(null),{boundingRect:_,viewBB:k,rfId:N,panZoom:M,translateExtent:A,flowWidth:P,flowHeight:j}=Js(Hd,Ks),O=e?.width??200,z=e?.height??150,D=_.width/O,I=_.height/z,$=Math.max(D,I),R=$*O,T=$*z,L=S*$,B=_.x-(R-_.width)/2-L,V=_.y-(T-_.height)/2-L,H=R+2*L,F=T+2*L,Y=`react-flow__minimap-desc-${N}`,X=(0,r.useRef)(0),Z=(0,r.useRef)();X.current=$,(0,r.useEffect)((()=>{if(E.current&&M)return Z.current=function({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){const r=Eo(e);return{update:function({translateExtent:e,width:i,height:a,zoomStep:s=10,pannable:l=!0,zoomable:c=!0,inversePan:d=!1}){let u=[0,0];const h=Fi().on("start",(e=>{"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(u=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])})).on("zoom",l?r=>{const s=n();if("mousemove"!==r.sourceEvent.type&&"touchmove"!==r.sourceEvent.type||!t)return;const l=[r.sourceEvent.clientX??r.sourceEvent.touches[0].clientX,r.sourceEvent.clientY??r.sourceEvent.touches[0].clientY],c=[l[0]-u[0],l[1]-u[1]];u=l;const h=o()*Math.max(s[2],Math.log(s[2]))*(d?-1:1),f={x:s[0]-c[0]*h,y:s[1]-c[1]*h},g=[[0,0],[i,a]];t.setViewportConstrained({x:f.x,y:f.y,zoom:s[2]},g,e)}:null).on("zoom.wheel",c?e=>{const o=n();if("wheel"!==e.sourceEvent.type||!t)return;const r=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*s,i=o[2]*Math.pow(2,r);t.scaleTo(i)}:null);r.call(h,{})},destroy:function(){r.on("zoom",null)},pointer:_o}}({domNode:E.current,panZoom:M,getTransform:()=>C.getState().transform,getViewScale:()=>X.current}),()=>{Z.current?.destroy()}}),[M]),(0,r.useEffect)((()=>{Z.current?.update({translateExtent:A,width:P,height:j,inversePan:x,pannable:y,zoomStep:w,zoomable:v})}),[y,v,x,w,A,P,j]);const W=p?e=>{const[t,n]=Z.current?.pointer(e)||[0,0];p(e,{x:t,y:n})}:void 0,q=m?(0,r.useCallback)(((e,t)=>{const n=C.getState().nodeLookup.get(t).internals.userNode;m(e,n)}),[]):void 0;return(0,o.jsx)(cl,{position:g,style:{...e,"--xy-minimap-background-color-props":"string"==typeof d?d:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof u?u:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof h?h:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof f?f*$:void 0,"--xy-minimap-node-background-color-props":"string"==typeof i?i:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof n?n:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof l?l:void 0},className:an(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:(0,o.jsxs)("svg",{width:O,height:z,viewBox:`${B} ${V} ${H} ${F}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Y,ref:E,onClick:W,children:[b&&(0,o.jsx)("title",{id:Y,children:b}),(0,o.jsx)(Bd,{onClick:q,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:a,nodeStrokeWidth:l,nodeComponent:c}),(0,o.jsx)("path",{className:"react-flow__minimap-mask",d:`M${B-L},${V-L}h${H+2*L}v${F+2*L}h${-H-2*L}z\n        M${k.x},${k.y}h${k.width}v${k.height}h${-k.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}function Yd(){var e;const{prefix:t}=Gt();return"undefined"!=typeof window&&window[t]&&Array.isArray(window[t].triggers)?window[t].triggers:(console.warn("Error accessing triggers data, using fallback"),(null===(e=Qt.poptics_ens_data)||void 0===e?void 0:e.triggers)||[])}Fd.displayName="MiniMap",(0,r.memo)(Fd),(0,r.memo)((function({nodeId:e,position:t,variant:n=Ns.Handle,className:i,style:a={},children:s,color:l,minWidth:c=10,minHeight:d=10,maxWidth:u=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:g,shouldResize:p,onResizeStart:m,onResize:y,onResizeEnd:v}){const b=ic(),x="string"==typeof e?e:b,w=el(),S=(0,r.useRef)(null),C=n===Ns.Line?"right":"bottom-right",E=t??C,_=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(S.current&&x)return _.current||(_.current=function({domNode:e,nodeId:t,getStoreItems:n,onChange:o,onEnd:r}){const i=Eo(e);return{update:function({controlPosition:e,boundaries:a,keepAspectRatio:s,resizeDirection:l,onResizeStart:c,onResize:d,onResizeEnd:u,shouldResize:h}){let f={...Os},g={...zs};const p=function(e){return{isHorizontal:e.includes("right")||e.includes("left"),isVertical:e.includes("bottom")||e.includes("top"),affectsX:e.includes("left"),affectsY:e.includes("top")}}(e);let m,y,v,b,x=null,w=[];const S=To().on("start",(e=>{const{nodeLookup:o,transform:r,snapGrid:i,snapToGrid:a,nodeOrigin:s,paneDomNode:l}=n();if(m=o.get(t),!m)return;x=l?.getBoundingClientRect()??null;const{xSnapped:d,ySnapped:u}=Da(e.sourceEvent,{transform:r,snapGrid:i,snapToGrid:a,containerBounds:x});f={width:m.measured.width??0,height:m.measured.height??0,x:m.position.x??0,y:m.position.y??0},g={...f,pointerX:d,pointerY:u,aspectRatio:f.width/f.height},y=void 0,m.parentId&&("parent"===m.extent||m.expandParent)&&(y=o.get(m.parentId),v=y&&"parent"===m.extent?function(e){return[[0,0],[e.measured.width,e.measured.height]]}(y):void 0),w=[],b=void 0;for(const[e,n]of o)if(n.parentId===t&&(w.push({id:e,position:{...n.position},extent:n.extent}),"parent"===n.extent||n.expandParent)){const e=Ds(n,m,n.origin??s);b=b?[[Math.min(e[0][0],b[0][0]),Math.min(e[0][1],b[0][1])],[Math.max(e[1][0],b[1][0]),Math.max(e[1][1],b[1][1])]]:e}c?.(e,{...f})})).on("drag",(e=>{const{transform:t,snapGrid:r,snapToGrid:i,nodeOrigin:c}=n(),u=Da(e.sourceEvent,{transform:t,snapGrid:r,snapToGrid:i,containerBounds:x}),S=[];if(!m)return;const{x:C,y:E,width:_,height:k}=f,N={},M=m.origin??c,{width:A,height:P,x:j,y:O}=function(e,t,n,o,r,i,a,s){let{affectsX:l,affectsY:c}=t;const{isHorizontal:d,isVertical:u}=t,h=d&&u,{xSnapped:f,ySnapped:g}=n,{minWidth:p,maxWidth:m,minHeight:y,maxHeight:v}=o,{x:b,y:x,width:w,height:S,aspectRatio:C}=e;let E=Math.floor(d?f-e.pointerX:0),_=Math.floor(u?g-e.pointerY:0);const k=w+(l?-E:E),N=S+(c?-_:_),M=-i[0]*w,A=-i[1]*S;let P=Ps(k,p,m),j=Ps(N,y,v);if(a){let e=0,t=0;l&&E<0?e=Ms(b+E+M,a[0][0]):!l&&E>0&&(e=As(b+k+M,a[1][0])),c&&_<0?t=Ms(x+_+A,a[0][1]):!c&&_>0&&(t=As(x+N+A,a[1][1])),P=Math.max(P,e),j=Math.max(j,t)}if(s){let e=0,t=0;l&&E>0?e=As(b+E,s[0][0]):!l&&E<0&&(e=Ms(b+k,s[1][0])),c&&_>0?t=As(x+_,s[0][1]):!c&&_<0&&(t=Ms(x+N,s[1][1])),P=Math.max(P,e),j=Math.max(j,t)}if(r){if(d){const e=Ps(k/C,y,v)*C;if(P=Math.max(P,e),a){let e=0;e=!l&&!c||l&&!c&&h?As(x+A+k/C,a[1][1])*C:Ms(x+A+(l?E:-E)/C,a[0][1])*C,P=Math.max(P,e)}if(s){let e=0;e=!l&&!c||l&&!c&&h?Ms(x+k/C,s[1][1])*C:As(x+(l?E:-E)/C,s[0][1])*C,P=Math.max(P,e)}}if(u){const e=Ps(N*C,p,m)/C;if(j=Math.max(j,e),a){let e=0;e=!l&&!c||c&&!l&&h?As(b+N*C+M,a[1][0])/C:Ms(b+(c?_:-_)*C+M,a[0][0])/C,j=Math.max(j,e)}if(s){let e=0;e=!l&&!c||c&&!l&&h?Ms(b+N*C,s[1][0])/C:As(b+(c?_:-_)*C,s[0][0])/C,j=Math.max(j,e)}}}_+=_<0?j:-j,E+=E<0?P:-P,r&&(h?k>N*C?_=(js(l,c)?-E:E)/C:E=(js(l,c)?-_:_)*C:d?(_=E/C,c=l):(E=_*C,l=c));const O=l?b+E:b,z=c?x+_:x;return{width:w+(l?-E:E),height:S+(c?-_:_),x:i[0]*E*(l?-1:1)+O,y:i[1]*_*(c?-1:1)+z}}(g,p,u,a,s,M,v,b),z=A!==_,D=P!==k,I=j!==C&&z,$=O!==E&&D;if(!(I||$||z||D))return;if((I||$||1===M[0]||1===M[1])&&(N.x=I?j:f.x,N.y=$?O:f.y,f.x=N.x,f.y=N.y,w.length>0)){const e=j-C,t=O-E;for(const n of w)n.position={x:n.position.x-e+M[0]*(A-_),y:n.position.y-t+M[1]*(P-k)},S.push(n)}if((z||D)&&(N.width=!z||l&&"horizontal"!==l?f.width:A,N.height=!D||l&&"vertical"!==l?f.height:P,f.width=N.width,f.height=N.height),y&&m.expandParent){const e=M[0]*(N.width??0);N.x&&N.x<e&&(f.x=e,g.x=g.x-(N.x-e));const t=M[1]*(N.height??0);N.y&&N.y<t&&(f.y=t,g.y=g.y-(N.y-t))}const R=function({width:e,prevWidth:t,height:n,prevHeight:o,affectsX:r,affectsY:i}){const a=e-t,s=n-o,l=[a>0?1:a<0?-1:0,s>0?1:s<0?-1:0];return a&&r&&(l[0]=-1*l[0]),s&&i&&(l[1]=-1*l[1]),l}({width:f.width,prevWidth:_,height:f.height,prevHeight:k,affectsX:p.affectsX,affectsY:p.affectsY}),T={...f,direction:R},L=h?.(e,T);!1!==L&&(d?.(e,T),o(N,S))})).on("end",(e=>{u?.(e,{...f}),r?.({...f})}));i.call(S)},destroy:function(){i.on(".drag",null)}}}({domNode:S.current,nodeId:x,getStoreItems:()=>{const{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r,domNode:i}=w.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r,paneDomNode:i}},onChange:(e,t)=>{const{triggerNodeChanges:n,nodeLookup:o,parentLookup:r,nodeOrigin:i}=w.getState(),a=[],s={x:e.x,y:e.y},l=o.get(x);if(l&&l.expandParent&&l.parentId){const t=l.origin??i,n=e.width??l.measured.width??0,c=e.height??l.measured.height??0,d=ds([{id:l.id,parentId:l.parentId,rect:{width:n,height:c,...Oa({x:e.x??l.position.x,y:e.y??l.position.y},{width:n,height:c},l.parentId,o,t)}}],o,r,i);a.push(...d),s.x=e.x?Math.max(t[0]*n,e.x):void 0,s.y=e.y?Math.max(t[1]*c,e.y):void 0}if(void 0!==s.x&&void 0!==s.y){const e={id:x,type:"position",position:{...s}};a.push(e)}if(void 0!==e.width&&void 0!==e.height){const t={id:x,type:"dimensions",resizing:!0,setAttributes:!g||("horizontal"===g?"width":"height"),dimensions:{width:e.width,height:e.height}};a.push(t)}for(const e of t){const t={...e,type:"position"};a.push(t)}n(a)},onEnd:({width:e,height:t})=>{const n={id:x,type:"dimensions",resizing:!1,dimensions:{width:e,height:t}};w.getState().triggerNodeChanges([n])}})),_.current.update({controlPosition:E,boundaries:{minWidth:c,minHeight:d,maxWidth:u,maxHeight:h},keepAspectRatio:f,resizeDirection:g,onResizeStart:m,onResize:y,onResizeEnd:v,shouldResize:p}),()=>{_.current?.destroy()}}),[E,c,d,u,h,f,m,y,v,p]);const k=E.split("-"),N=n===Ns.Line?"borderColor":"backgroundColor",M=l?{...a,[N]:l}:a;return(0,o.jsx)("div",{className:an(["react-flow__resize-control","nodrag",...k,n,i]),ref:S,style:M,children:s})}));const Xd=e=>{switch(e){case"trigger":return"#1890ff";case"condition":return"#faad14";case"end":return"#201000";default:return"#52c41a"}},Zd=(e,t)=>e.map((e=>{var n;const o={...e};if("receiverType"===e.name&&(null==t?void 0:t.email_receivers)&&(o.props={...e.props,options:t.email_receivers}),"delayUnit"===e.name&&(o.props={...e.props}),"delayCondition"===e.name&&(null==t?void 0:t.delay_dependencies)){const r=(null===(n=e.props)||void 0===n?void 0:n.options)||[],i=t.delay_dependencies||[];o.props={...e.props,options:[...r,...i]}}return o})),Wd=({status:e,onChange:t,loading:n})=>{const r="publish"===e;return(0,o.jsx)(c.Ay,{variant:"outlined",onClick:()=>t(!r),loading:n,disabled:n,icon:(0,o.jsx)(r?qd:Kd,{}),children:r?"Active":"Inactive"})};function qd(){return(0,o.jsx)("span",{className:"anticon",children:(0,o.jsxs)("svg",{width:"33",height:"18",viewBox:"0 0 33 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"switch-icon switch-icon--on",children:[(0,o.jsx)("rect",{width:"32.5",height:"20",rx:"10",className:"switch-background"}),(0,o.jsx)("circle",{cx:"22",cy:"10",r:"7.5",fill:"white"})]})})}function Kd(){return(0,o.jsx)("span",{className:"anticon",children:(0,o.jsxs)("svg",{width:"33",height:"18",viewBox:"0 0 33 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("rect",{width:"32.5",height:"20",rx:"10",fill:"#F3F4F8"}),(0,o.jsx)("circle",{cx:"10",cy:"10",r:"7.5",fill:"white"})]})})}const{Text:Ud}=d.A,Gd=({flowName:e,flowStatus:t,onFlowNameChange:n,isLoading:i})=>{const[s,l]=(0,r.useState)(!1),[d,h]=(0,r.useState)(e),f=(0,r.useRef)(null),g=async()=>{d.trim()&&n(d),l(!1)};return(0,o.jsx)("div",{className:"flow-name-section",children:(0,o.jsxs)("div",s?{className:"flow-name-edit-mode",children:[(0,o.jsx)(a.A,{ref:f,value:d,onChange:e=>h(e.target.value),onPressEnter:g,onBlur:g,variant:"outlined",placeholder:"Enter flow name",className:"flow-name-input",size:"middle",disabled:i}),(0,o.jsx)("div",{className:"flow-name-actions",children:(0,o.jsx)(c.Ay,{size:"small",onClick:()=>{h(e),l(!1)},children:"Cancel"})})]}:{className:"flow-name-display",children:[(0,o.jsx)(Ud,{className:"flow-name",strong:!0,children:e}),(0,o.jsx)(u.A,{color:"publish"===t?"success":"default",children:t.charAt(0).toUpperCase()+t.slice(1)}),(0,o.jsx)(c.Ay,{type:"default",size:"small",icon:(0,o.jsx)(At,{}),onClick:()=>{l(!0),h(e),setTimeout((()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.focus()}),0)},className:"edit-button",disabled:i})]})})},Qd=({flowName:e,onFlowNameChange:t,flowData:n,flowStatus:r,setFlowStatus:i,reactFlowInstanceRef:a})=>{const{editFlow:s,isFlowSaving:l}=rn();return(0,o.jsxs)("div",{className:"top-navbar",children:[(0,o.jsxs)("div",{className:"top-navbar__left",children:[(0,o.jsx)(c.Ay,{type:"text",icon:(0,o.jsx)(Lt,{}),onClick:()=>window.history.back()}),(0,o.jsx)(Gd,{flowName:e,flowStatus:r,onFlowNameChange:t,isLoading:l()})]}),(0,o.jsx)("div",{className:"top-navbar__right",children:(0,o.jsxs)(h.A,{children:[(0,o.jsx)(Wd,{status:r,onChange:async e=>{const t=e?"publish":"draft";await s(n.id,{...n,status:t},!1),i(t)},loading:l()}),(0,o.jsx)(c.Ay,{type:"primary",onClick:async()=>{if(!a.current)return void console.error("React Flow instance or flow ID not available");const{getNodes:t,getEdges:o}=a.current,i=t(),l=o(),c=((e,t,n,o="draft")=>({name:e,status:o,flow_config:{nodes:t.map((e=>{var t,n,o,r,i;const a=(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.label)||"";switch(e.type){case"trigger":return{id:e.id,type:"trigger",name:"trigger",data:{...e.data},position:e.position};case"condition":return{id:e.id,type:"condition",name:"condition",data:{field:(null===(n=e.data)||void 0===n?void 0:n.conditionField)||"",operator:(null===(o=e.data)||void 0===o?void 0:o.operator)||"==",value:(null===(r=e.data)||void 0===r?void 0:r.value)||"",...e.data},position:e.position};case"action":return{id:e.id,type:"action",name:"send_email"===a?"email":"delay",data:{actionType:(null===(i=e.data)||void 0===i?void 0:i.actionType)||"",...e.data},position:e.position};case"end":return{id:e.id,type:"end",name:"end",data:{...e.data},position:e.position};default:return{id:e.id,type:e.type||"action",name:a,data:{...e.data},position:e.position}}})),edges:n.map((e=>{const{source:t,target:n,sourceHandle:o,targetHandle:r,data:i,label:a,...s}=e;return{...s,source:t,target:n,...o?{sourceHandle:o}:{},...r?{targetHandle:r}:{},...i?{data:i}:{},...a?{label:a}:{}}}))}}))(e,i,l,r);try{await s(null==n?void 0:n.id,c,!1)}catch(t){console.error("Error saving flow:",t)}},loading:l(),disabled:l(),children:"Save Now"})]})})]})},{confirm:Jd}=f.A,eu=({id:e,data:t,isConnectable:n,type:i})=>{const[a,s]=(0,r.useState)(!1),l=i||"end",c="end"!==l,d="trigger"!==l,u="condition"===l,h="trigger"!==l&&"end"!==l,f=(e=>{switch(e){case"trigger":return"Trigger Event";case"condition":return"Conditional";case"end":return"End Automation";case"action":return"Action";default:return"End"}})(l);return(0,o.jsxs)("div",{className:`flow-node flow-node--${l}`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[h&&a&&(0,o.jsx)("button",{className:"node-delete-button",onClick:n=>{n.stopPropagation(),Jd({title:"Do you want to delete this step?",icon:(0,o.jsx)(jt,{}),content:"",onOk(){t.onDeleteNode&&t.onDeleteNode(e)}})},"aria-label":"Delete node",children:(0,o.jsx)(Ct,{})}),d&&(0,o.jsx)(sc,{type:"target",position:Ji.Top,isConnectable:!!n}),(0,o.jsxs)("div",{className:"flow-node__content",children:[(0,o.jsx)("div",{className:"flow-node__icon",children:(()=>{switch(l){case"trigger":return(0,o.jsx)(yt,{});case"condition":return(0,o.jsx)(pt,{});case"end":default:return(0,o.jsx)(zt,{});case"action":return"send_email"===t.actionType?(0,o.jsx)(Vt,{}):(0,o.jsx)(wt,{})}})()}),(0,o.jsxs)("div",{className:"flow-node__details",children:[(0,o.jsx)("div",{className:"flow-node__title",children:f}),(null==t?void 0:t.subtitle)&&(0,o.jsx)("div",{className:"flow-node__subtitle",children:t.subtitle})]})]}),c&&!u&&(0,o.jsx)(sc,{type:"source",position:Ji.Bottom,isConnectable:!!n}),u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(sc,{id:"false",type:"source",position:Ji.Left,isConnectable:!!n,style:{background:"#EF4444",left:-8}}),(0,o.jsx)(sc,{id:"true",type:"source",position:Ji.Right,isConnectable:!!n,style:{background:"#22B855",right:-8}})]})]})},tu=({id:e,sourceX:t,sourceY:n,targetX:r,targetY:i,sourcePosition:a,targetPosition:s,style:l={},label:c,data:d,markerEnd:u})=>{const[h,f,g]=Qa({sourceX:t,sourceY:n,sourcePosition:a,targetX:r,targetY:i,targetPosition:s}),p=null==d?void 0:d.onPlusClick,m=null==d?void 0:d.condition,y={...l};"true"===m?(y.stroke="#22B855",y.strokeWidth=1):"false"===m&&(y.stroke="#EF4444",y.strokeWidth=1);const v=p?-20:0,b=c?25:0;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Nc,{path:h,markerEnd:u,style:y}),c&&(0,o.jsx)(bd,{children:(0,o.jsx)("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${f}px, ${g+v}px)`,background:"true"===m?"#22B855":"false"===m?"#EF4444":"#ffffff",color:m?"#ffffff":"#000000",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:500,pointerEvents:"all",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",zIndex:1001},children:c})}),p&&(0,o.jsx)(bd,{children:(0,o.jsx)("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${f}px, ${g+b}px)`,pointerEvents:"all",zIndex:1e3},children:(0,o.jsx)("button",{className:"notif-flow-edge-plus-button",onClick:t=>{t.stopPropagation(),p(e)},"aria-label":"Add condition",children:(0,o.jsx)(Xt,{})})})})]})},nu={trigger:e=>(0,o.jsx)(eu,{...e,type:"trigger"}),action:e=>(0,o.jsx)(eu,{...e,type:"action"}),condition:e=>(0,o.jsx)(eu,{...e,type:"condition"}),end:e=>(0,o.jsx)(eu,{...e,type:"end"})},ou=({onNodeClick:e,onPlusButtonClick:t,onInit:n})=>{const[i,a,s]=function(){const[e,t]=(0,r.useState)([]),n=(0,r.useCallback)((e=>t((t=>Pl(e,t)))),[]);return[e,t,n]}(),[l,c,d]=function(){const[e,t]=(0,r.useState)([]),n=(0,r.useCallback)((e=>t((t=>jl(e,t)))),[]);return[e,t,n]}();(0,r.useCallback)((e=>{t(e)}),[t]);const u=(0,r.useCallback)(((t,n)=>{"end"!==n.type&&"trigger"!==n.type&&e(n)}),[e]),h=(0,r.useCallback)((e=>{const t=l.filter((t=>t.target===e)),n=l.filter((t=>t.source===e)),o=[];t.forEach((e=>{n.forEach((t=>{var n;const r=i.find((t=>t.id===e.source)),a="condition"===(null==r?void 0:r.type);o.push({id:`edge_${e.source}_${t.target}`,source:e.source,target:t.target,type:e.type||"default",...a&&e.sourceHandle?{sourceHandle:e.sourceHandle}:{},markerEnd:e.markerEnd,...e.label?{label:e.label}:{},data:{...(null===(n=e.data)||void 0===n?void 0:n.condition)?{condition:e.data.condition}:{}}})}))})),a((t=>t.filter((t=>t.id!==e)))),c((t=>[...t.filter((t=>t.source!==e&&t.target!==e)),...o]))}),[l,i,a,c]),f=i.map((e=>({...e,data:{...e.data,onDeleteNode:h}}))),g={default:tu,smoothstep:tu,straight:tu,curved:tu},p=l.map((e=>{var n,o;return{...e,data:{...e.data,onPlusClick:t,...(null===(n=e.data)||void 0===n?void 0:n.condition)?{condition:e.data.condition}:{}},...(null===(o=e.data)||void 0===o?void 0:o.condition)&&!e.label?{label:e.data.condition}:{}}})),m=(0,r.useCallback)((e=>{n&&n(e)}),[n]);return(0,o.jsxs)(yd,{nodes:f,edges:p,onNodeClick:u,onNodesChange:s,onEdgesChange:d,nodeTypes:nu,edgeTypes:g,fitView:!0,onInit:m,connectionLineType:Gi.SmoothStep,defaultEdgeOptions:{type:"default",markerEnd:{type:Qi.ArrowClosed}},children:[(0,o.jsx)(kd,{}),(0,o.jsx)(Id,{})]})},ru=({onInsert:e,availableConditions:t})=>{const[n,i]=(0,r.useState)("action");return(0,o.jsxs)("div",{className:"node-insertion-content",children:[(0,o.jsxs)(g.Ay.Group,{value:n,onChange:e=>i(e.target.value),className:"node-type-tabs",children:[(0,o.jsxs)(g.Ay.Button,{value:"action",className:"tab-button",children:["action"===n&&(0,o.jsx)(bt,{className:"check-icon"}),"Action"]}),(0,o.jsxs)(g.Ay.Button,{value:"condition",className:"tab-button",children:["condition"===n&&(0,o.jsx)(bt,{className:"check-icon"}),"Condition"]})]}),(0,o.jsx)("div",{className:"node-type-header",children:(0,o.jsx)("h4",{children:"action"===n?"Available Actions":"Available Conditions"})}),(0,o.jsxs)("div",{className:"node-options-grid",children:["action"===n&&(0,o.jsx)(o.Fragment,{children:Jt.map((t=>(0,o.jsx)("div",{className:"node-option",onClick:()=>null==e?void 0:e({type:"action",value:t.value,label:t.label}),children:t.label},t.value)))}),"condition"===n&&(0,o.jsx)(o.Fragment,{children:t.map((t=>(0,o.jsx)("div",{className:"node-option",onClick:()=>null==e?void 0:e({type:"condition",value:t.value,label:t.label}),children:t.label},t.value)))})]})]})},iu=({label:e,tooltip:t,required:n=!1,className:r=""})=>(0,o.jsxs)("span",{className:`form-field-label ${r}`,style:{display:"flex",alignItems:"center"},children:[e,(()=>{if(!t)return null;const e="question"===t.icon?Wt:Rt;return(0,o.jsx)(p.A,{title:t.title,placement:t.placement||"top",trigger:t.trigger||"hover",children:(0,o.jsx)(e,{className:"form-field-tooltip-icon",style:{marginLeft:4,color:"#8c8c8c",cursor:"pointer",fontSize:"13px"}})})})()]}),au=({customizationSettings:e})=>{const t=(null==e?void 0:e.formFields)||[],n=null==e?void 0:e.triggerData,i=Zd(t,n);return(0,o.jsx)("div",{className:"delay-action-form",children:(0,o.jsx)("div",{className:"delay-form-row",children:i.map(((e,t)=>(0,o.jsx)(m.A.Item,{name:e.name,label:(0,o.jsx)(iu,{label:e.label,tooltip:e.tooltip,required:e.required}),rules:e.rules,className:"delay-form-field",children:r.createElement(e.component,e.props||{})},t)))})})},su=({triggerType:e,onVariableSelect:t})=>{var n;const r=Yd(),i=(null===(n=null==r?void 0:r.find((t=>t.trigger_value===e)))||void 0===n?void 0:n.trigger_data)||[];return 0===i.length?(0,o.jsx)("div",{className:"dynamic-variables-empty",children:"No variables available for this trigger"}):(0,o.jsx)("div",{className:"dynamic-variables-container",children:i.map((e=>(0,o.jsx)(p.A,{title:`Insert ${e.label} variable`,children:(0,o.jsx)(c.Ay,{className:"dynamic-variable-chip",onClick:()=>t(`{%${e.value}%}`),children:`{%${e.value}%}`})},e.value)))})},lu=({customizationSettings:e,selectedTrigger:t,setQuillRef:n,onVariableInsert:i})=>{const a=(null==e?void 0:e.triggerData)||{};if(!a)return null;const s=Zd(e.formFields||[],a);return(0,o.jsx)("div",{className:"notification-flow-customization-form-field",children:s.map((e=>"richText"===e.component?(0,o.jsxs)("div",{className:"notification-flow-email-body",children:[(0,o.jsx)(m.A.Item,{name:e.name,label:e.label,rules:e.rules,className:"notif-flow-rich-text-form-item",children:(0,o.jsx)(be,{theme:"snow",...e.props||{},ref:e=>n(e)})}),(0,o.jsxs)("div",{className:"email-variable-section",children:[(0,o.jsx)("div",{className:"email-variable-header",children:(0,o.jsx)("p",{children:"Variables for Email Body Content"})}),(0,o.jsx)(su,{triggerType:t,onVariableSelect:i})]})]},e.name):(0,o.jsx)(m.A.Item,{name:e.name,label:e.label,rules:e.rules,children:r.createElement(e.component,e.props||{})},e.name)))})},cu=({nodeData:e,customizationSettings:t,selectedTrigger:n,quillRef:r,setQuillRef:i,onVariableInsert:a})=>{if(!e)return null;const s=e.actionType||(null==t?void 0:t.actionType);return s?"add_delay"===s?(0,o.jsx)(au,{customizationSettings:t}):(0,o.jsx)(lu,{customizationSettings:t,selectedTrigger:n,quillRef:r,setQuillRef:i,onVariableInsert:a}):null},du=({customizationSettings:e})=>{if(!e)return null;const{type:t}=e,n=(e=>{switch(e){case"number":return tn;case"string":default:return nn;case"date":return on}})(t);return(0,o.jsx)("div",{className:"condition-form",children:(0,o.jsxs)("div",{className:"condition-form-row",children:[(0,o.jsx)(m.A.Item,{name:"operator",label:"Operator",className:"condition-operator",rules:[{required:!0,message:"Please select an operator"}],children:(0,o.jsx)(i.A,{options:n,getPopupContainer:e=>e.parentNode})}),(0,o.jsx)(m.A.Item,"date"===t?{name:"dateValue",label:"Value",className:"condition-value",rules:[{required:!0,message:"Please select a date"}],children:(0,o.jsx)(y.A,{style:{width:"100%"},getPopupContainer:e=>e.parentNode})}:{name:"value",label:"Value",className:"condition-value",rules:[{required:!0,message:"Please enter a value"}],children:(0,o.jsx)(a.A,{type:"number"===t?"number":"text",style:{width:"100%"}})})]})})},uu=({visible:e,onClose:t,nodeType:n,nodeData:i,onSave:a,customizationSettings:s,selectedTrigger:l,mode:c="edit",onInsert:d,availableConditions:u=[]})=>{const[h]=m.A.useForm(),[f,g]=(0,r.useState)(null),{handleVariableInsert:p}=(e=>({handleVariableInsert:(0,r.useCallback)((t=>{if(e){const n=e.getEditor(),o=n.getSelection(),r=o?o.index:0;n.insertText(r,t),n.setSelection(r+t.length)}}),[e])}))(f),{initializeForm:y}=((e,t,n,o,i)=>({initializeForm:(0,r.useCallback)((()=>{if(o&&"edit"===i){e.resetFields();const o={label:(null==t?void 0:t.label)||"",subtitle:(null==t?void 0:t.subtitle)||"",operator:(null==t?void 0:t.operator)||"=",value:(null==t?void 0:t.value)||"",..."date"===(null==n?void 0:n.type)&&(null==t?void 0:t.value)?{dateValue:t.value?ve(t.value,"YYYY-MM-DD"):null}:{}};t&&Object.keys(t).forEach((e=>{"label"!==e&&"subtitle"!==e&&(o[e]=t[e])})),e.setFieldsValue(o)}}),[o,t,n,e,i])}))(h,i,s,e,c),{handleSave:v}=((e,t,n,o,i)=>({handleSave:(0,r.useCallback)((()=>{e.validateFields().then((e=>{var r,a,s;if("date"===(null==n?void 0:n.type)&&e.dateValue&&(e.value=ve(e.dateValue).format("YYYY-MM-DD"),delete e.dateValue),"condition"===t&&n){const t=n.label||"",o=(e=>{switch(e){case"equal":return"=";case"not_equal":return"≠";case"greater_then":return">";case"greater_equal":return"≥";case"less_then":return"<";case"less_equal":return"≤";case"before":return"before";case"after":return"after";default:return e}})(e.operator),r="date"===(null==n?void 0:n.type)?new Date(e.value).toLocaleDateString():e.value||"";e.subtitle=`${t} ${o} ${r}`}if("action"===t){const t=(null==o?void 0:o.actionType)||"";if("add_delay"===t&&e.delay&&e.delayUnit){let t=`Wait for ${e.delay} ${e.delayUnit}`;if(e.delayCondition&&e.delayDependency){const o=(null===(s=null===(a=null===(r=null==n?void 0:n.triggerData)||void 0===r?void 0:r.delay_dependencies)||void 0===a?void 0:a.find((t=>t.value===e.delayDependency)))||void 0===s?void 0:s.label)||e.delayDependency;t+=` ${e.delayCondition} ${o}`}e.subtitle=t}else"send_email"===t&&e.subject&&(e.subtitle=`Subject: ${e.subject.substring(0,30)}${e.subject.length>30?"...":""}`)}null==i||i(e)}))}),[e,t,n,o,i])}))(h,n,s,i,a);(0,r.useEffect)((()=>{y()}),[e,i,s,h,c]);const b="send_email"===(null==i?void 0:i.actionType)?520:400;return(0,o.jsx)(ue,{open:e,width:b,zIndex:99999,title:(0,o.jsx)(hu,{mode:c,customizationSettings:s,nodeType:n}),placement:"right",onClose:t,className:"node-sidebar "+("insert"===c?"insert-mode":"edit-mode"),footer:(0,o.jsx)(fu,{mode:c,onClose:t,onSave:v}),children:"insert"===c?(0,o.jsx)(ru,{onInsert:d,availableConditions:u}):(0,o.jsx)(gu,{form:h,nodeType:n,nodeData:i,customizationSettings:s,selectedTrigger:l,quillRef:f,setQuillRef:g,onVariableInsert:p})})},hu=({mode:e,customizationSettings:t,nodeType:n})=>"insert"===e?(0,o.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:"Add New Node"}):(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:["Edit ",null==t?void 0:t.label,(0,o.jsx)(he.A,{count:n&&n.slice(0,1).toUpperCase()+n.slice(1),style:{backgroundColor:`${Xd(n||"action")}16`,color:Xd(n||"action"),fontSize:"12px",fontWeight:"normal",borderRadius:"4px"}})]}),fu=({mode:e,onClose:t,onSave:n})=>(0,o.jsxs)("div",{className:"node-sidebar__footer",children:[(0,o.jsx)(c.Ay,{onClick:t,children:"Cancel"}),"edit"===e&&(0,o.jsx)(c.Ay,{type:"primary",onClick:n,children:"Save"})]}),gu=({form:e,nodeType:t,nodeData:n,customizationSettings:r,selectedTrigger:i,quillRef:a,setQuillRef:s,onVariableInsert:l})=>(0,o.jsxs)(m.A,{form:e,layout:"vertical",initialValues:{},children:["condition"===t&&(0,o.jsx)(du,{customizationSettings:r}),"action"===t&&(0,o.jsx)(cu,{nodeData:n,customizationSettings:r,selectedTrigger:i,quillRef:a,setQuillRef:s,onVariableInsert:l})]}),pu=()=>(0,o.jsxs)("div",{className:"builder-page-skeleton",children:[(0,o.jsxs)("div",{className:"top-navbar",children:[(0,o.jsxs)("div",{className:"top-navbar__left",children:[(0,o.jsx)(c.Ay,{type:"text",icon:(0,o.jsx)(Lt,{}),disabled:!0}),(0,o.jsx)(K.A.Input,{active:!0,style:{width:200}})]}),(0,o.jsx)("div",{className:"top-navbar__right",children:(0,o.jsxs)(h.A,{children:[(0,o.jsx)(K.A.Button,{active:!0}),(0,o.jsx)(K.A.Button,{active:!0})]})})]}),(0,o.jsx)("div",{className:"builder-page__body",style:{height:"calc(100vh - 64px)",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,o.jsx)(fe.A,{size:"large",tip:"Loading flow data..."})})]}),mu=({flowId:e})=>{var t;const[n,i]=(0,r.useState)("Untitled"),[a,s]=(0,r.useState)("draft"),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),[h,f]=(0,r.useState)(""),[g,p]=(0,r.useState)(null),m=(0,r.useRef)(null),{getFlowById:y,isFlowLoading:v}=rn(),{sidebarVisible:b,sidebarMode:x,edgeToSplit:w,setSidebarVisible:S,setSidebarMode:C,setEdgeToSplit:E,handleSidebarClose:_,handleNodeClick:k,handlePlusButtonClick:N}=(e=>{const[t,n]=(0,r.useState)(!1),[o,i]=(0,r.useState)("edit"),[a,s]=(0,r.useState)(null),l=(0,r.useCallback)((t=>{e(t),i("edit"),n(!0)}),[e]),c=(0,r.useCallback)((e=>{e&&s(e),i("insert"),n(!0)}),[]),d=(0,r.useCallback)((()=>{n(!1),"insert"===o&&s(null)}),[o]);return{sidebarVisible:t,sidebarMode:o,edgeToSplit:a,setSidebarVisible:n,setSidebarMode:i,setEdgeToSplit:s,handleSidebarClose:d,handleNodeClick:l,handlePlusButtonClick:c}})(u),{loadFlowData:M}=((e,t,n,o,i,a,s)=>({loadFlowData:(0,r.useCallback)((async()=>{if(e)try{const{data:r}=await t(e);if(r&&(n(r.name||"Untitled"),o(r.trigger||""),i(r.status||"draft"),a(r),r.flow_config&&s)){const{setNodes:e,setEdges:t}=s;Array.isArray(r.flow_config.nodes)&&e(r.flow_config.nodes),Array.isArray(r.flow_config.edges)&&t(r.flow_config.edges.map((e=>{var t,n;return"true"===(null===(t=e.data)||void 0===t?void 0:t.condition)?{...e,sourceHandle:"true"}:"false"===(null===(n=e.data)||void 0===n?void 0:n.condition)?{...e,sourceHandle:"false"}:e})))}}catch(e){console.error("Error loading flow:",e)}}),[e,t,n,o,i,a,s])}))(e,y,i,f,s,c,g),{handleInsertNode:A}=((e,t,n,o,i,a)=>{const s=Yd(),l=(0,r.useCallback)(((e,t,n,o)=>({id:e,type:t.type,position:n,data:{label:"condition"===t.type?(null==o?void 0:o.value)||"Conditional":t.value,subtitle:t.label,..."condition"===t.type&&{operator:"=",value:"",conditionField:t.value},..."action"===t.type&&{actionType:t.value}}})),[]),c=(0,r.useCallback)(((e,t,n)=>{var o;return{id:`edge_${e.id}-${t}`,source:e.id,target:t,type:n.type||"default",markerEnd:n.markerEnd,...n.sourceHandle&&{sourceHandle:n.sourceHandle},data:{...(null===(o=n.data)||void 0===o?void 0:o.condition)&&{condition:n.data.condition}}}}),[]),d=(0,r.useCallback)(((t,n,o,r,i,a=300,s=180)=>{var l;const{getNodes:c,setNodes:d,setEdges:u}=e.current,h={...n,position:{x:t.position.x+a,y:t.position.y+s}},f={id:`end_${(null===(l=c())||void 0===l?void 0:l.length)+1}`,type:"end",position:{x:t.position.x-a,y:t.position.y+s},data:{label:"End Flow",subtitle:"Automation stops here"}},g={id:`edge_${t.id}-${n.id}_true`,source:t.id,sourceHandle:"true",target:n.id,type:"smoothstep",markerEnd:{type:Qi.ArrowClosed},label:"True",data:{condition:"true",conditionInfo:i?{field:i.label,operator:"=",value:""}:void 0}},p={id:`edge_${t.id}-${f.id}_false`,source:t.id,sourceHandle:"false",target:f.id,type:"smoothstep",markerEnd:{type:Qi.ArrowClosed},label:"false",data:{condition:"false",conditionInfo:i?{field:i.label,operator:"=",value:""}:void 0}};d([...c().map((e=>e.id===n.id?h:e)),t,f]),u((e=>[...e.filter((e=>e.id!==r)),o,g,p]))}),[e]),u=(0,r.useCallback)(((t,n,o,r,i,a=180)=>{var s,l,c;const{getNodes:d,setNodes:u,setEdges:h}=e.current,f={id:`edge_${t.id}-${n.id}`,source:t.id,target:n.id,type:"smoothstep",markerEnd:i.markerEnd,...(null===(s=i.data)||void 0===s?void 0:s.condition)&&{label:null===(l=i.data)||void 0===l?void 0:l.condition},data:{...(null===(c=i.data)||void 0===c?void 0:c.condition)&&{condition:i.data.condition}}},g={...n,position:{x:n.position.x,y:t.position.y+a}};u([...d().map((e=>e.id===n.id?g:e)),t]),h((e=>[...e.filter((e=>e.id!==r)),o,f]))}),[e]);return{handleInsertNode:(0,r.useCallback)((r=>{var h,f;if(!e.current||!t)return console.error("React Flow instance or edge not available"),i(!1),void a(null);const{getNodes:g,getEdges:p}=e.current,m=p().find((e=>e.id===t));if(!m)return console.error("Edge not found:",t),i(!1),void a(null);const y=g().find((e=>e.id===m.source)),v=g().find((e=>e.id===m.target));if(!y||!v)return console.error("Source or target node not found"),i(!1),void a(null);const b=(y.position.x+v.position.x)/2,x=y.position.y+180,w=(null===(h=s.find((e=>""===e.trigger_value)))||void 0===h?void 0:h.conditional_dependencies)||[];let S;"condition"===r.type&&(S=w.find((e=>e.value===r.value)));const C=`node_${(null===(f=g())||void 0===f?void 0:f.length)+1}`,E=l(C,r,{x:b,y:x},S),_=c(y,C,m);"condition"===r.type?d(E,v,_,t,S,300,180):u(E,v,_,t,m,180),n(E),o("edit"),i(!0),a(null)}),[e,t,s,l,c,d,u,n,o,i,a])}})(m,w,u,C,S,E);(0,r.useEffect)((()=>{e&&M()}),[e]);const P=Yd(),j=(null===(t=P.find((e=>e.trigger_value===h)))||void 0===t?void 0:t.conditional_dependencies)||[],O=(0,r.useCallback)((()=>h?P.find((e=>e.trigger_value===h)):null),[h,P]),z=(0,r.useCallback)((()=>{if(!d)return null;if("condition"===d.type){const e=d.data.conditionField||"";return j.find((t=>t.value===e))||null}if("action"===d.type){const e=d.data.actionType,t=O();return{type:"action",actionType:e,...(e=>{if(e)return en[e]})(e),triggerData:t}}return null}),[d,j,O]),D=(0,r.useCallback)((e=>{if(d&&m.current){const{setNodes:t}=m.current;t((t=>t.map((t=>t.id===d.id?{...t,data:{...t.data,...e,..."action"===t.type&&{actionType:t.data.actionType}}}:t)))),S(!1),u(null)}}),[d,S,u]),I=(0,r.useCallback)((e=>{if(p(e),m.current=e,null==l?void 0:l.flow_config){const{setNodes:t,setEdges:n}=e;Array.isArray(l.flow_config.nodes)&&t(l.flow_config.nodes),Array.isArray(l.flow_config.edges)&&n(l.flow_config.edges)}}),[l]);return v()?(0,o.jsx)(pu,{}):(0,o.jsxs)("div",{className:"builder-page",children:[(0,o.jsx)(Qd,{flowName:n,onFlowNameChange:i,flowData:l,flowStatus:a,setFlowStatus:s,reactFlowInstanceRef:m}),(0,o.jsxs)("div",{className:"builder-page__body",children:[(0,o.jsx)("div",{className:"builder-page__canvas",children:(0,o.jsx)(ou,{onNodeClick:k,onPlusButtonClick:N,onInit:I})}),(0,o.jsx)(uu,{visible:b,onClose:_,nodeType:d?($=d.type,$?["trigger","end","condition","action"].includes($)?$:"end":"action"):void 0,nodeData:null==d?void 0:d.data,onSave:D,customizationSettings:z()||{},selectedTrigger:h,mode:x,onInsert:A,availableConditions:j})]})]});var $},{Option:yu}=i.A,vu=({open:e,onClose:t,onCreate:n})=>{const[r]=m.A.useForm(),{createFlow:s,isFlowCreating:l}=rn();Gt();const d=Yd(),u=()=>{r.resetFields(),t()};return(0,o.jsx)(f.A,{open:e,title:"Create New Automation",onCancel:u,footer:null,className:"create-flow-modal",children:(0,o.jsxs)(m.A,{form:r,layout:"vertical",children:[(0,o.jsx)(m.A.Item,{label:"Flow Name",name:"name",rules:[{required:!0,message:"Please enter flow name"}],children:(0,o.jsx)(a.A,{placeholder:"e.g. Welcome Email for Signup"})}),(0,o.jsx)(m.A.Item,{label:"Trigger Event",name:"trigger",rules:[{required:!0,message:"Please select a trigger"}],children:(0,o.jsx)(i.A,{placeholder:"Select a trigger",children:null==d?void 0:d.map((e=>(0,o.jsx)(yu,{value:e.trigger_value,children:e.trigger_label},e.trigger_value)))})}),(0,o.jsx)(m.A.Item,{className:"form-actions",children:(0,o.jsxs)(h.A,{className:"form-actions__buttons",children:[(0,o.jsx)(c.Ay,{onClick:u,children:"Cancel"}),(0,o.jsx)(c.Ay,{type:"primary",loading:l(),onClick:async()=>{try{const e=await r.validateFields(),o=(e=>{const t=Yd(),n=null==t?void 0:t.find((t=>t.trigger_value===e)),o=(null==n?void 0:n.trigger_label)||"Trigger";return{nodes:[{id:"node_1",type:"trigger",position:{x:200,y:50},data:{label:`trigger: ${e}`,subtitle:o,triggerValue:e}},{id:"node_2",type:"end",position:{x:200,y:200},data:{label:"end_flow",subtitle:"End execution path"}}],edges:[{id:"edge_node_1-node_2",source:"node_1",target:"node_2",type:"smoothstep",markerEnd:{type:Qi.ArrowClosed},data:{}}]}})(e.trigger),i={...e,flow_config:{nodes:o.nodes,edges:o.edges}},a=await s(i);r.resetFields(),t(),a&&a.id&&n(a.id)}catch(e){console.error("Error creating flow:",e)}},children:"Create"})]})})]})})},{Search:bu}=a.A,{confirm:xu}=f.A,wu=({onEdit:e})=>{const{notificationFlows:t,cloneFlow:n,deleteFlow:a,bulkDeleteFlows:s,editFlow:l,isFlowListLoading:d,isFlowSaving:h,statusCount:f,isFlowCloning:g,isFlowDeleting:p,fetchFlows:m,filterByStatus:y,searchFlows:v}=rn(),[b,x]=(0,r.useState)(!1),[w,S]=(0,r.useState)([]),C=[{title:"Automations",dataIndex:"name",key:"name"},{title:"Trigger",dataIndex:"trigger",key:"trigger",render:e=>e.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")},{title:"Status",dataIndex:"status",key:"status",render:e=>(0,o.jsx)(u.A,{color:"publish"===e?"green":"red",children:e.charAt(0).toUpperCase()+e.slice(1)},e)},{title:"Draft/Published",dataIndex:"status",key:"status-toggle",render:(e,t)=>(0,o.jsx)(ge.A,{checked:"publish"===e,onChange:e=>{const n=e?"publish":"draft";l(t.id,{...t,status:n},!0)}})},{title:"Action",key:"actions",dataIndex:"id",render:t=>(0,o.jsxs)("div",{className:"actions-cell",children:[(0,o.jsxs)(c.Ay,{type:"default",onClick:()=>e(t),children:[(0,o.jsx)(It,{}),"Edit"]}),(0,o.jsx)(pe.A,{trigger:["click"],menu:{items:[{key:"clone",label:"Clone",icon:(0,o.jsx)(_t,{}),onClick:()=>n(t)},{key:"delete",label:"Delete",icon:(0,o.jsx)(Nt,{}),onClick:()=>(e=>{xu({title:"Do you want to delete this flow?",icon:(0,o.jsx)(jt,{}),okText:"Delete",okButtonProps:{danger:!0},async onOk(){await a(e)}})})(t)}]},children:(0,o.jsx)(c.Ay,{icon:(0,o.jsx)(Ft,{style:{transform:"rotate(90deg)"}})})})]})}],E={selectedRowKeys:w,onChange:e=>{S(e)}};return(0,r.useEffect)((()=>{m()}),[]),(0,o.jsxs)("div",{className:"automation-list",children:[(0,o.jsxs)("div",{className:"automation-list__header",children:[(0,o.jsxs)("div",{className:"filter-search-group",children:[(0,o.jsx)(i.A,{defaultValue:"",placeholder:"All",className:"status-filter-select",onChange:e=>y(e),options:[{value:"",label:"All"},{value:"publish",label:`Publish (${null==f?void 0:f.publish})`},{value:"draft",label:`Draft (${null==f?void 0:f.draft})`}],disabled:d()}),(0,o.jsx)(bu,{placeholder:"Search",className:"automation-search",onSearch:e=>v(e),allowClear:!0,disabled:d()})]}),(0,o.jsx)(c.Ay,{type:"primary",onClick:()=>x(!0),icon:(0,o.jsx)(Xt,{}),children:"New Automation"})]}),w.length>0&&(0,o.jsxs)("div",{className:"bulk-actions-bar",children:[(0,o.jsx)(c.Ay,{danger:!0,type:"primary",className:"bulk-delete-btn",onClick:()=>{w.length>0&&xu({title:"Delete Selected Items",icon:(0,o.jsx)(jt,{}),content:`Are you sure you want to delete ${w.length} item${1!==w.length?"s":""}?`,okText:"Delete",okButtonProps:{danger:!0},cancelText:"Cancel",async onOk(){try{await s(w),S([])}catch(e){console.error("Bulk delete failed:",e)}}})},children:"Bulk Delete"}),(0,o.jsxs)("span",{className:"selected-count",children:[w.length," item",1!==w.length?"s":""," selected"]})]}),(0,o.jsx)(me.A,{className:"automation-list__table",dataSource:null!=t?t:[],rowSelection:E,columns:C,rowKey:"id",pagination:!1,loading:d()||h()||g()||p()}),(0,o.jsx)(vu,{open:b,onClose:()=>x(!1),onCreate:t=>{x(!1),e(t)}})]})}}}]);